import{r as p,R as z}from"./index-DRjF_FHU.js";import{r as pe}from"./index-uWwxbAOW.js";import{a as ve,$ as be}from"./FocusScope-BLnXaZ_1.js";import{j as $e,b as me,d as _,L as Se,B as Ke,n as V,M as le,G as ie}from"./useFocusRing-CbqlcRcM.js";import{b as ge,$ as de,c as he,d as xe}from"./usePress-BJhFWZiC.js";import{$ as we}from"./context-D23C6NFd.js";import{$ as Pe}from"./useControlledState-uSQY0H5C.js";function Te(i,e){const t=[];for(;i&&i!==document.documentElement;)ve(i,e)&&t.push(i),i=i.parentElement;return t}let ke=0;const Z=new Map;function De(i){let[e,t]=p.useState();return $e(()=>{if(!i)return;let l=Z.get(i);if(l)t(l.element.id);else{let n=`react-aria-description-${ke++}`;t(n);let o=document.createElement("div");o.id=n,o.style.display="none",o.textContent=i,document.body.appendChild(o),l={refCount:0,element:o},Z.set(i,l)}return l.refCount++,()=>{l&&--l.refCount===0&&(l.element.remove(),Z.delete(i))}},[i]),{"aria-describedby":i?e:void 0}}function ne(i,e,t,l){let n=me(t),o=t==null;p.useEffect(()=>{if(o||!i.current)return;let s=i.current;return s.addEventListener(e,n,l),()=>{s.removeEventListener(e,n,l)}},[i,e,l,o,n])}function ye(i,e){let t=se(i,e,"left"),l=se(i,e,"top"),n=e.offsetWidth,o=e.offsetHeight,s=i.scrollLeft,a=i.scrollTop,{borderTopWidth:f,borderLeftWidth:g}=getComputedStyle(i),b=i.scrollLeft+parseInt(g,10),w=i.scrollTop+parseInt(f,10),y=b+i.clientWidth,d=w+i.clientHeight;t<=s?s=t-parseInt(g,10):t+n>y&&(s+=t+n-y),l<=w?a=l-parseInt(f,10):l+o>d&&(a+=l+o-d),i.scrollLeft=s,i.scrollTop=a}function se(i,e,t){const l=t==="left"?"offsetLeft":"offsetTop";let n=0;for(;e.offsetParent&&(n+=e[l],e.offsetParent!==i);){if(e.offsetParent.contains(i)){n-=i[l];break}e=e.offsetParent}return n}function oe(i,e){if(i&&document.contains(i)){let s=document.scrollingElement||document.documentElement;if(window.getComputedStyle(s).overflow==="hidden"){let f=Te(i);for(let g of f)ye(g,i)}else{var t;let{left:f,top:g}=i.getBoundingClientRect();i==null||(t=i.scrollIntoView)===null||t===void 0||t.call(i,{block:"nearest"});let{left:b,top:w}=i.getBoundingClientRect();if(Math.abs(f-b)>1||Math.abs(g-w)>1){var l,n,o;e==null||(n=e.containingElement)===null||n===void 0||(l=n.scrollIntoView)===null||l===void 0||l.call(n,{block:"center",inline:"center"}),(o=i.scrollIntoView)===null||o===void 0||o.call(i,{block:"nearest"})}}}}const Fe=500;function Ie(i){let{isDisabled:e,onLongPressStart:t,onLongPressEnd:l,onLongPress:n,threshold:o=Fe,accessibilityDescription:s}=i;const a=p.useRef(void 0);let{addGlobalListener:f,removeGlobalListener:g}=ge(),{pressProps:b}=de({isDisabled:e,onPressStart(y){if(y.continuePropagation(),(y.pointerType==="mouse"||y.pointerType==="touch")&&(t&&t({...y,type:"longpressstart"}),a.current=setTimeout(()=>{y.target.dispatchEvent(new PointerEvent("pointercancel",{bubbles:!0})),n&&n({...y,type:"longpress"}),a.current=void 0},o),y.pointerType==="touch")){let d=I=>{I.preventDefault()};f(y.target,"contextmenu",d,{once:!0}),f(window,"pointerup",()=>{setTimeout(()=>{g(y.target,"contextmenu",d)},30)},{once:!0})}},onPressEnd(y){a.current&&clearTimeout(a.current),l&&(y.pointerType==="mouse"||y.pointerType==="touch")&&l({...y,type:"longpressend"})}}),w=De(n&&!e?s:void 0);return{longPressProps:_(b,w)}}function N(i){return Se()?i.altKey:i.ctrlKey}function W(i){return Ke()?i.metaKey:i.ctrlKey}const Ae=1e3;function Ce(i){let{keyboardDelegate:e,selectionManager:t,onTypeSelect:l}=i,n=p.useRef({search:"",timeout:void 0}).current,o=s=>{let a=Ee(s.key);if(!(!a||s.ctrlKey||s.metaKey||!s.currentTarget.contains(s.target))){if(a===" "&&n.search.trim().length>0&&(s.preventDefault(),"continuePropagation"in s||s.stopPropagation()),n.search+=a,e.getKeyForSearch!=null){let f=e.getKeyForSearch(n.search,t.focusedKey);f==null&&(f=e.getKeyForSearch(n.search)),f!=null&&(t.setFocusedKey(f),l&&l(f))}clearTimeout(n.timeout),n.timeout=setTimeout(()=>{n.search=""},Ae)}};return{typeSelectProps:{onKeyDownCapture:e.getKeyForSearch?o:void 0}}}function Ee(i){return i.length===1||!/^[A-Z]/i.test(i)?i:""}function Xe(i){let{selectionManager:e,keyboardDelegate:t,ref:l,autoFocus:n=!1,shouldFocusWrap:o=!1,disallowEmptySelection:s=!1,disallowSelectAll:a=!1,selectOnFocus:f=e.selectionBehavior==="replace",disallowTypeAhead:g=!1,shouldUseVirtualFocus:b,allowsTabNavigation:w=!1,isVirtualized:y,scrollRef:d=l,linkBehavior:I="action"}=i,{direction:D}=we(),h=he(),S=r=>{var m;if(r.altKey&&r.key==="Tab"&&r.preventDefault(),!(!((m=l.current)===null||m===void 0)&&m.contains(r.target)))return;const K=(u,U)=>{if(u!=null){if(e.isLink(u)&&I==="selection"&&f&&!N(r)){var L;pe.flushSync(()=>{e.setFocusedKey(u,U)});let ee=(L=d.current)===null||L===void 0?void 0:L.querySelector(`[data-key="${CSS.escape(u.toString())}"]`),te=e.getItemProps(u);ee&&h.open(ee,r,te.href,te.routerOptions);return}if(e.setFocusedKey(u,U),e.isLink(u)&&I==="override")return;r.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(u):f&&!N(r)&&e.replaceSelection(u)}};switch(r.key){case"ArrowDown":if(t.getKeyBelow){var P,k,T;let u=e.focusedKey!=null?(P=t.getKeyBelow)===null||P===void 0?void 0:P.call(t,e.focusedKey):(k=t.getFirstKey)===null||k===void 0?void 0:k.call(t);u==null&&o&&(u=(T=t.getFirstKey)===null||T===void 0?void 0:T.call(t,e.focusedKey)),u!=null&&(r.preventDefault(),K(u))}break;case"ArrowUp":if(t.getKeyAbove){var C,c,B;let u=e.focusedKey!=null?(C=t.getKeyAbove)===null||C===void 0?void 0:C.call(t,e.focusedKey):(c=t.getLastKey)===null||c===void 0?void 0:c.call(t);u==null&&o&&(u=(B=t.getLastKey)===null||B===void 0?void 0:B.call(t,e.focusedKey)),u!=null&&(r.preventDefault(),K(u))}break;case"ArrowLeft":if(t.getKeyLeftOf){var G,H,j;let u=e.focusedKey!=null?(G=t.getKeyLeftOf)===null||G===void 0?void 0:G.call(t,e.focusedKey):null;u==null&&o&&(u=D==="rtl"?(H=t.getFirstKey)===null||H===void 0?void 0:H.call(t,e.focusedKey):(j=t.getLastKey)===null||j===void 0?void 0:j.call(t,e.focusedKey)),u!=null&&(r.preventDefault(),K(u,D==="rtl"?"first":"last"))}break;case"ArrowRight":if(t.getKeyRightOf){var q,Y,X;let u=e.focusedKey!=null?(q=t.getKeyRightOf)===null||q===void 0?void 0:q.call(t,e.focusedKey):null;u==null&&o&&(u=D==="rtl"?(Y=t.getLastKey)===null||Y===void 0?void 0:Y.call(t,e.focusedKey):(X=t.getFirstKey)===null||X===void 0?void 0:X.call(t,e.focusedKey)),u!=null&&(r.preventDefault(),K(u,D==="rtl"?"last":"first"))}break;case"Home":if(t.getFirstKey){r.preventDefault();let u=t.getFirstKey(e.focusedKey,W(r));e.setFocusedKey(u),u!=null&&(W(r)&&r.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(u):f&&e.replaceSelection(u))}break;case"End":if(t.getLastKey){r.preventDefault();let u=t.getLastKey(e.focusedKey,W(r));e.setFocusedKey(u),u!=null&&(W(r)&&r.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(u):f&&e.replaceSelection(u))}break;case"PageDown":if(t.getKeyPageBelow&&e.focusedKey!=null){let u=t.getKeyPageBelow(e.focusedKey);u!=null&&(r.preventDefault(),K(u))}break;case"PageUp":if(t.getKeyPageAbove&&e.focusedKey!=null){let u=t.getKeyPageAbove(e.focusedKey);u!=null&&(r.preventDefault(),K(u))}break;case"a":W(r)&&e.selectionMode==="multiple"&&a!==!0&&(r.preventDefault(),e.selectAll());break;case"Escape":!s&&e.selectedKeys.size!==0&&(r.stopPropagation(),r.preventDefault(),e.clearSelection());break;case"Tab":if(!w){if(r.shiftKey)l.current.focus();else{let u=be(l.current,{tabbable:!0}),U,L;do L=u.lastChild(),L&&(U=L);while(L);U&&!U.contains(document.activeElement)&&ie(U)}break}}},v=p.useRef({top:0,left:0});ne(d,"scroll",y?void 0:()=>{var r,m,K,P;v.current={top:(K=(r=d.current)===null||r===void 0?void 0:r.scrollTop)!==null&&K!==void 0?K:0,left:(P=(m=d.current)===null||m===void 0?void 0:m.scrollLeft)!==null&&P!==void 0?P:0}});let $=r=>{if(e.isFocused){r.currentTarget.contains(r.target)||e.setFocused(!1);return}if(r.currentTarget.contains(r.target)){if(e.setFocused(!0),e.focusedKey==null){var m,K;let T=c=>{c!=null&&(e.setFocusedKey(c),f&&e.replaceSelection(c))},C=r.relatedTarget;var P,k;C&&r.currentTarget.compareDocumentPosition(C)&Node.DOCUMENT_POSITION_FOLLOWING?T((P=e.lastSelectedKey)!==null&&P!==void 0?P:(m=t.getLastKey)===null||m===void 0?void 0:m.call(t)):T((k=e.firstSelectedKey)!==null&&k!==void 0?k:(K=t.getFirstKey)===null||K===void 0?void 0:K.call(t))}else!y&&d.current&&(d.current.scrollTop=v.current.top,d.current.scrollLeft=v.current.left);if(e.focusedKey!=null&&d.current){let T=d.current.querySelector(`[data-key="${CSS.escape(e.focusedKey.toString())}"]`);T&&(T.contains(document.activeElement)||ie(T),le()==="keyboard"&&oe(T,{containingElement:l.current}))}}},x=r=>{r.currentTarget.contains(r.relatedTarget)||e.setFocused(!1)};const F=p.useRef(n);p.useEffect(()=>{if(F.current){var r,m;let k=null;var K;n==="first"&&(k=(K=(r=t.getFirstKey)===null||r===void 0?void 0:r.call(t))!==null&&K!==void 0?K:null);var P;n==="last"&&(k=(P=(m=t.getLastKey)===null||m===void 0?void 0:m.call(t))!==null&&P!==void 0?P:null);let T=e.selectedKeys;if(T.size){for(let C of T)if(e.canSelectItem(C)){k=C;break}}e.setFocused(!0),e.setFocusedKey(k),k==null&&!b&&l.current&&V(l.current)}},[]);let R=p.useRef(e.focusedKey);p.useEffect(()=>{if(e.isFocused&&e.focusedKey!=null&&(e.focusedKey!==R.current||F.current)&&d.current&&l.current){let r=le(),m=l.current.querySelector(`[data-key="${CSS.escape(e.focusedKey.toString())}"]`);if(!m)return;(r==="keyboard"||F.current)&&(ye(d.current,m),r!=="virtual"&&oe(m,{containingElement:l.current}))}!b&&e.isFocused&&e.focusedKey==null&&R.current!=null&&l.current&&V(l.current),R.current=e.focusedKey,F.current=!1}),ne(l,"react-aria-focus-scope-restore",r=>{r.preventDefault(),e.setFocused(!0)});let M={onKeyDown:S,onFocus:$,onBlur:x,onMouseDown(r){d.current===r.target&&r.preventDefault()}},{typeSelectProps:A}=Ce({keyboardDelegate:t,selectionManager:e});g||(M=_(A,M));let O;return b||(O=e.focusedKey==null?0:-1),{collectionProps:{...M,tabIndex:O}}}function Ze(i){let{selectionManager:e,key:t,ref:l,shouldSelectOnPressUp:n,shouldUseVirtualFocus:o,focus:s,isDisabled:a,onAction:f,allowsDifferentPressOrigin:g,linkBehavior:b="action"}=i,w=he(),y=c=>{if(c.pointerType==="keyboard"&&N(c))e.toggleSelection(t);else{if(e.selectionMode==="none")return;if(e.isLink(t)){if(b==="selection"&&l.current){let B=e.getItemProps(t);w.open(l.current,c,B.href,B.routerOptions),e.setSelectedKeys(e.selectedKeys);return}else if(b==="override"||b==="none")return}e.selectionMode==="single"?e.isSelected(t)&&!e.disallowEmptySelection?e.toggleSelection(t):e.replaceSelection(t):c&&c.shiftKey?e.extendSelection(t):e.selectionBehavior==="toggle"||c&&(W(c)||c.pointerType==="touch"||c.pointerType==="virtual")?e.toggleSelection(t):e.replaceSelection(t)}};p.useEffect(()=>{t===e.focusedKey&&e.isFocused&&!o&&(s?s():document.activeElement!==l.current&&l.current&&V(l.current))},[l,t,e.focusedKey,e.childFocusStrategy,e.isFocused,o]),a=a||e.isDisabled(t);let d={};!o&&!a?d={tabIndex:t===e.focusedKey?0:-1,onFocus(c){c.target===l.current&&e.setFocusedKey(t)}}:a&&(d.onMouseDown=c=>{c.preventDefault()});let I=e.isLink(t)&&b==="override",D=e.isLink(t)&&b!=="selection"&&b!=="none",h=!a&&e.canSelectItem(t)&&!I,S=(f||D)&&!a,v=S&&(e.selectionBehavior==="replace"?!h:!h||e.isEmpty),$=S&&h&&e.selectionBehavior==="replace",x=v||$,F=p.useRef(null),R=x&&h,M=p.useRef(!1),A=p.useRef(!1),O=c=>{if(f&&f(),D&&l.current){let B=e.getItemProps(t);w.open(l.current,c,B.href,B.routerOptions)}},r={};n?(r.onPressStart=c=>{F.current=c.pointerType,M.current=R,c.pointerType==="keyboard"&&(!x||ce())&&y(c)},g?(r.onPressUp=v?void 0:c=>{c.pointerType!=="keyboard"&&h&&y(c)},r.onPress=v?O:void 0):r.onPress=c=>{if(v||$&&c.pointerType!=="mouse"){if(c.pointerType==="keyboard"&&!re())return;O(c)}else c.pointerType!=="keyboard"&&h&&y(c)}):(r.onPressStart=c=>{F.current=c.pointerType,M.current=R,A.current=v,h&&(c.pointerType==="mouse"&&!v||c.pointerType==="keyboard"&&(!S||ce()))&&y(c)},r.onPress=c=>{(c.pointerType==="touch"||c.pointerType==="pen"||c.pointerType==="virtual"||c.pointerType==="keyboard"&&x&&re()||c.pointerType==="mouse"&&A.current)&&(x?O(c):h&&y(c))}),d["data-key"]=t,r.preventFocusOnPress=o;let{pressProps:m,isPressed:K}=de(r),P=$?c=>{F.current==="mouse"&&(c.stopPropagation(),c.preventDefault(),O(c))}:void 0,{longPressProps:k}=Ie({isDisabled:!R,onLongPress(c){c.pointerType==="touch"&&(y(c),e.setSelectionBehavior("toggle"))}}),T=c=>{F.current==="touch"&&M.current&&c.preventDefault()},C=e.isLink(t)?c=>{xe.isOpening||c.preventDefault()}:void 0;return{itemProps:_(d,h||v?m:{},R?k:{},{onDoubleClick:P,onDragStartCapture:T,onClick:C}),isPressed:K,isSelected:e.isSelected(t),isFocused:e.isFocused&&e.focusedKey===t,isDisabled:a,allowsSelection:h,hasAction:x}}function re(){let i=window.event;return(i==null?void 0:i.key)==="Enter"}function ce(){let i=window.event;return(i==null?void 0:i.key)===" "||(i==null?void 0:i.code)==="Space"}class Me{build(e,t){return this.context=t,ue(()=>this.iterateCollection(e))}*iterateCollection(e){let{children:t,items:l}=e;if(z.isValidElement(t)&&t.type===z.Fragment)yield*this.iterateCollection({children:t.props.children,items:l});else if(typeof t=="function"){if(!l)throw new Error("props.children was a function but props.items is missing");let n=0;for(let o of l)yield*this.getFullNode({value:o,index:n},{renderer:t}),n++}else{let n=[];z.Children.forEach(t,s=>{s&&n.push(s)});let o=0;for(let s of n){let a=this.getFullNode({element:s,index:o},{});for(let f of a)o++,yield f}}}getKey(e,t,l,n){if(e.key!=null)return e.key;if(t.type==="cell"&&t.key!=null)return`${n}${t.key}`;let o=t.value;if(o!=null){var s;let a=(s=o.key)!==null&&s!==void 0?s:o.id;if(a==null)throw new Error("No key found for item");return a}return n?`${n}.${t.index}`:`$.${t.index}`}getChildState(e,t){return{renderer:t.renderer||e.renderer}}*getFullNode(e,t,l,n){if(z.isValidElement(e.element)&&e.element.type===z.Fragment){let h=[];z.Children.forEach(e.element.props.children,v=>{h.push(v)});var o;let S=(o=e.index)!==null&&o!==void 0?o:0;for(const v of h)yield*this.getFullNode({element:v,index:S++},t,l,n);return}let s=e.element;if(!s&&e.value&&t&&t.renderer){let h=this.cache.get(e.value);if(h&&(!h.shouldInvalidate||!h.shouldInvalidate(this.context))){h.index=e.index,h.parentKey=n?n.key:null,yield h;return}s=t.renderer(e.value)}if(z.isValidElement(s)){let h=s.type;if(typeof h!="function"&&typeof h.getCollectionNode!="function"){let x=s.type;throw new Error(`Unknown element <${x}> in collection.`)}let S=h.getCollectionNode(s.props,this.context);var a;let v=(a=e.index)!==null&&a!==void 0?a:0,$=S.next();for(;!$.done&&$.value;){let x=$.value;e.index=v;var f;let F=(f=x.key)!==null&&f!==void 0?f:null;F==null&&(F=x.element?null:this.getKey(s,e,t,l));let M=[...this.getFullNode({...x,key:F,index:v,wrapper:Re(e.wrapper,x.wrapper)},this.getChildState(t,x),l?`${l}${s.key}`:s.key,n)];for(let A of M){var g,b;A.value=(b=(g=x.value)!==null&&g!==void 0?g:e.value)!==null&&b!==void 0?b:null,A.value&&this.cache.set(A.value,A);var w;if(e.type&&A.type!==e.type)throw new Error(`Unsupported type <${J(A.type)}> in <${J((w=n==null?void 0:n.type)!==null&&w!==void 0?w:"unknown parent type")}>. Only <${J(e.type)}> is supported.`);v++,yield A}$=S.next(M)}return}if(e.key==null||e.type==null)return;let y=this;var d,I;let D={type:e.type,props:e.props,key:e.key,parentKey:n?n.key:null,value:(d=e.value)!==null&&d!==void 0?d:null,level:n?n.level+1:0,index:e.index,rendered:e.rendered,textValue:(I=e.textValue)!==null&&I!==void 0?I:"","aria-label":e["aria-label"],wrapper:e.wrapper,shouldInvalidate:e.shouldInvalidate,hasChildNodes:e.hasChildNodes||!1,childNodes:ue(function*(){if(!e.hasChildNodes||!e.childNodes)return;let h=0;for(let S of e.childNodes()){S.key!=null&&(S.key=`${D.key}${S.key}`);let v=y.getFullNode({...S,index:h},y.getChildState(t,S),D.key,D);for(let $ of v)h++,yield $}})};yield D}constructor(){this.cache=new WeakMap}}function ue(i){let e=[],t=null;return{*[Symbol.iterator](){for(let l of e)yield l;t||(t=i());for(let l of t)e.push(l),yield l}}}function Re(i,e){if(i&&e)return t=>i(e(t));if(i)return i;if(e)return e}function J(i){return i[0].toUpperCase()+i.slice(1)}function Je(i,e,t){let l=p.useMemo(()=>new Me,[]),{children:n,items:o,collection:s}=i;return p.useMemo(()=>{if(s)return s;let f=l.build({children:n,items:o},t);return e(f)},[l,n,o,s,t,e])}function Be(i,e){return typeof e.getChildren=="function"?e.getChildren(i.key):i.childNodes}function Le(i){return Oe(i,0)}function Oe(i,e){if(e<0)return;let t=0;for(let l of i){if(t===e)return l;t++}}function Qe(i){let e;for(let t of i)e=t;return e}function Q(i,e,t){if(e.parentKey===t.parentKey)return e.index-t.index;let l=[...ae(i,e),e],n=[...ae(i,t),t],o=l.slice(0,n.length).findIndex((s,a)=>s!==n[a]);return o!==-1?(e=l[o],t=n[o],e.index-t.index):l.findIndex(s=>s===t)>=0?1:(n.findIndex(s=>s===e)>=0,-1)}function ae(i,e){let t=[],l=e;for(;(l==null?void 0:l.parentKey)!=null;)l=i.getItem(l.parentKey),l&&t.unshift(l);return t}class E extends Set{constructor(e,t,l){super(e),e instanceof E?(this.anchorKey=t??e.anchorKey,this.currentKey=l??e.currentKey):(this.anchorKey=t??null,this.currentKey=l??null)}}function Ue(i,e){if(i.size!==e.size)return!1;for(let t of i)if(!e.has(t))return!1;return!0}function Ve(i){let{selectionMode:e="none",disallowEmptySelection:t=!1,allowDuplicateSelectionEvents:l,selectionBehavior:n="toggle",disabledBehavior:o="all"}=i,s=p.useRef(!1),[,a]=p.useState(!1),f=p.useRef(null),g=p.useRef(null),[,b]=p.useState(null),w=p.useMemo(()=>fe(i.selectedKeys),[i.selectedKeys]),y=p.useMemo(()=>fe(i.defaultSelectedKeys,new E),[i.defaultSelectedKeys]),[d,I]=Pe(w,y,i.onSelectionChange),D=p.useMemo(()=>i.disabledKeys?new Set(i.disabledKeys):new Set,[i.disabledKeys]),[h,S]=p.useState(n);n==="replace"&&h==="toggle"&&typeof d=="object"&&d.size===0&&S("replace");let v=p.useRef(n);return p.useEffect(()=>{n!==v.current&&(S(n),v.current=n)},[n]),{selectionMode:e,disallowEmptySelection:t,selectionBehavior:h,setSelectionBehavior:S,get isFocused(){return s.current},setFocused($){s.current=$,a($)},get focusedKey(){return f.current},get childFocusStrategy(){return g.current},setFocusedKey($,x="first"){f.current=$,g.current=x,b($)},selectedKeys:d,setSelectedKeys($){(l||!Ue($,d))&&I($)},disabledKeys:D,disabledBehavior:o}}function fe(i,e){return i?i==="all"?"all":new E(i):e}class Ne{get selectionMode(){return this.state.selectionMode}get disallowEmptySelection(){return this.state.disallowEmptySelection}get selectionBehavior(){return this.state.selectionBehavior}setSelectionBehavior(e){this.state.setSelectionBehavior(e)}get isFocused(){return this.state.isFocused}setFocused(e){this.state.setFocused(e)}get focusedKey(){return this.state.focusedKey}get childFocusStrategy(){return this.state.childFocusStrategy}setFocusedKey(e,t){(e==null||this.collection.getItem(e))&&this.state.setFocusedKey(e,t)}get selectedKeys(){return this.state.selectedKeys==="all"?new Set(this.getSelectAllKeys()):this.state.selectedKeys}get rawSelection(){return this.state.selectedKeys}isSelected(e){if(this.state.selectionMode==="none")return!1;let t=this.getKey(e);return t==null?!1:this.state.selectedKeys==="all"?this.canSelectItem(t):this.state.selectedKeys.has(t)}get isEmpty(){return this.state.selectedKeys!=="all"&&this.state.selectedKeys.size===0}get isSelectAll(){if(this.isEmpty)return!1;if(this.state.selectedKeys==="all")return!0;if(this._isSelectAll!=null)return this._isSelectAll;let e=this.getSelectAllKeys(),t=this.state.selectedKeys;return this._isSelectAll=e.every(l=>t.has(l)),this._isSelectAll}get firstSelectedKey(){let e=null;for(let l of this.state.selectedKeys){let n=this.collection.getItem(l);(!e||n&&Q(this.collection,n,e)<0)&&(e=n)}var t;return(t=e==null?void 0:e.key)!==null&&t!==void 0?t:null}get lastSelectedKey(){let e=null;for(let l of this.state.selectedKeys){let n=this.collection.getItem(l);(!e||n&&Q(this.collection,n,e)>0)&&(e=n)}var t;return(t=e==null?void 0:e.key)!==null&&t!==void 0?t:null}get disabledKeys(){return this.state.disabledKeys}get disabledBehavior(){return this.state.disabledBehavior}extendSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"){this.replaceSelection(e);return}let t=this.getKey(e);if(t==null)return;let l;if(this.state.selectedKeys==="all")l=new E([t],t,t);else{let s=this.state.selectedKeys;var n;let a=(n=s.anchorKey)!==null&&n!==void 0?n:t;l=new E(s,a,t);var o;for(let f of this.getKeyRange(a,(o=s.currentKey)!==null&&o!==void 0?o:t))l.delete(f);for(let f of this.getKeyRange(t,a))this.canSelectItem(f)&&l.add(f)}this.state.setSelectedKeys(l)}getKeyRange(e,t){let l=this.collection.getItem(e),n=this.collection.getItem(t);return l&&n?Q(this.collection,l,n)<=0?this.getKeyRangeInternal(e,t):this.getKeyRangeInternal(t,e):[]}getKeyRangeInternal(e,t){var l;if(!((l=this.layoutDelegate)===null||l===void 0)&&l.getKeyRange)return this.layoutDelegate.getKeyRange(e,t);let n=[],o=e;for(;o!=null;){let s=this.collection.getItem(o);if(s&&(s.type==="item"||s.type==="cell"&&this.allowsCellSelection)&&n.push(o),o===t)return n;o=this.collection.getKeyAfter(o)}return[]}getKey(e){let t=this.collection.getItem(e);if(!t||t.type==="cell"&&this.allowsCellSelection)return e;for(;t&&t.type!=="item"&&t.parentKey!=null;)t=this.collection.getItem(t.parentKey);return!t||t.type!=="item"?null:t.key}toggleSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"&&!this.isSelected(e)){this.replaceSelection(e);return}let t=this.getKey(e);if(t==null)return;let l=new E(this.state.selectedKeys==="all"?this.getSelectAllKeys():this.state.selectedKeys);l.has(t)?l.delete(t):this.canSelectItem(t)&&(l.add(t),l.anchorKey=t,l.currentKey=t),!(this.disallowEmptySelection&&l.size===0)&&this.state.setSelectedKeys(l)}replaceSelection(e){if(this.selectionMode==="none")return;let t=this.getKey(e);if(t==null)return;let l=this.canSelectItem(t)?new E([t],t,t):new E;this.state.setSelectedKeys(l)}setSelectedKeys(e){if(this.selectionMode==="none")return;let t=new E;for(let l of e){let n=this.getKey(l);if(n!=null&&(t.add(n),this.selectionMode==="single"))break}this.state.setSelectedKeys(t)}getSelectAllKeys(){let e=[],t=l=>{for(;l!=null;){if(this.canSelectItem(l)){var n;let s=this.collection.getItem(l);(s==null?void 0:s.type)==="item"&&e.push(l);var o;s!=null&&s.hasChildNodes&&(this.allowsCellSelection||s.type!=="item")&&t((o=(n=Le(Be(s,this.collection)))===null||n===void 0?void 0:n.key)!==null&&o!==void 0?o:null)}l=this.collection.getKeyAfter(l)}};return t(this.collection.getFirstKey()),e}selectAll(){!this.isSelectAll&&this.selectionMode==="multiple"&&this.state.setSelectedKeys("all")}clearSelection(){!this.disallowEmptySelection&&(this.state.selectedKeys==="all"||this.state.selectedKeys.size>0)&&this.state.setSelectedKeys(new E)}toggleSelectAll(){this.isSelectAll?this.clearSelection():this.selectAll()}select(e,t){this.selectionMode!=="none"&&(this.selectionMode==="single"?this.isSelected(e)&&!this.disallowEmptySelection?this.toggleSelection(e):this.replaceSelection(e):this.selectionBehavior==="toggle"||t&&(t.pointerType==="touch"||t.pointerType==="virtual")?this.toggleSelection(e):this.replaceSelection(e))}isSelectionEqual(e){if(e===this.state.selectedKeys)return!0;let t=this.selectedKeys;if(e.size!==t.size)return!1;for(let l of e)if(!t.has(l))return!1;for(let l of t)if(!e.has(l))return!1;return!0}canSelectItem(e){var t;if(this.state.selectionMode==="none"||this.state.disabledKeys.has(e))return!1;let l=this.collection.getItem(e);return!(!l||!(l==null||(t=l.props)===null||t===void 0)&&t.isDisabled||l.type==="cell"&&!this.allowsCellSelection)}isDisabled(e){var t,l;return this.state.disabledBehavior==="all"&&(this.state.disabledKeys.has(e)||!!(!((l=this.collection.getItem(e))===null||l===void 0||(t=l.props)===null||t===void 0)&&t.isDisabled))}isLink(e){var t,l;return!!(!((l=this.collection.getItem(e))===null||l===void 0||(t=l.props)===null||t===void 0)&&t.href)}getItemProps(e){var t;return(t=this.collection.getItem(e))===null||t===void 0?void 0:t.props}constructor(e,t,l){this.collection=e,this.state=t;var n;this.allowsCellSelection=(n=l==null?void 0:l.allowsCellSelection)!==null&&n!==void 0?n:!1,this._isSelectAll=null,this.layoutDelegate=(l==null?void 0:l.layoutDelegate)||null}}export{Ve as $,Je as a,Ne as b,Ce as c,Xe as d,Be as e,Ze as f,Ie as g,De as h,Qe as i,oe as j,Oe as k,Le as l};
