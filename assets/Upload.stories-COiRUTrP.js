import{j as a}from"./jsx-runtime-DR9Q75dM.js";import{f as oe,F as ue}from"./FileList-D5GESV8F.js";import{c as B}from"./index-By-mRCMU.js";import{q as le}from"./Info-CwC22AGT.js";import{r as m,R as v}from"./index-DRjF_FHU.js";import{q as me,g as w,C as be,i as xe,b as ie,j as $e,k as he,r as ge,l as ve,p as se,w as ye,c as R,a as De}from"./useFocusRing-DmDxhQCI.js";import{$ as we}from"./intlStrings-ZMTSFH_M.js";import{a as je,b as L}from"./Text-w-xymXK0.js";import{$ as Pe}from"./useLabels-DHGrCtKF.js";import{a as Fe}from"./FocusScope-BD8VaRNk.js";import{$ as T,a as qe,b as ke}from"./useDrop-DV2M16MX.js";import{a as Ie}from"./Button-B8-bwU7B.js";import{$ as Se}from"./useLocalizedStringFormatter-DDHaVjp6.js";import{$ as ze}from"./VisuallyHidden-BC8uHK73.js";import{b as Ee}from"./Input-Br8Q7hRI.js";import{$ as Ne}from"./PressResponder-DV9psGSD.js";import{c as ne}from"./FieldError-QM41p4cP.js";import{u as Ue}from"./index-BSPp2CQF.js";import{B as de}from"./Button-6G4elcVo.js";import{T as Ae}from"./TextField-CUM5k8mr.js";import{u as ce}from"./useTranslation-DW3ljh-R.js";import"./IconButton-Bu33w1wy.js";import"./ButtonBase-C9UrqI5D.js";import"./Loader-Cgl1KvpE.js";import"./index-wL3GxAOQ.js";import"./Pill-ByEbGEhU.js";import"./Close-a0dMVUhZ.js";import"./Description-BZTUmzGN.js";import"./index-rX-Bn4lm.js";import"./platform-SeyP_Zfo.js";import"./ariaHideOutside-7Z-f0sYi.js";import"./useDescription-vAR7K5Yy.js";import"./Hidden-CICGlFC4.js";import"./useFocusable-Cuxsel3J.js";import"./usePress-76wSwCmG.js";import"./openLink--SV7cA94.js";import"./context-C5A1kbiU.js";import"./useFormReset-B7wBBm0H.js";import"./useControlledState-uSQY0H5C.js";import"./Form-qpAKqtEj.js";import"./context-BLxVKTzt.js";const Be=({title:e,titleId:o,...t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18",fill:"currentColor",width:"1.125rem",height:"1.125rem","aria-labelledby":o,...t,children:[e?a.jsx("title",{id:o,children:e}):null,a.jsx("g",{children:a.jsx("path",{d:"M4.945 14.4q-.558 0-.951-.397a1.3 1.3 0 0 1-.394-.953v-.675q0-.287.193-.481a.65.65 0 0 1 .478-.194q.285 0 .482.194.197.195.197.481v.675h8.1v-.675q0-.287.193-.481a.65.65 0 0 1 .478-.194q.284 0 .482.194.197.195.197.481v.675a1.3 1.3 0 0 1-.397.953 1.3 1.3 0 0 1-.954.397zM9.266 2.747a.7.7 0 0 0-.253-.047.68.68 0 0 0-.473.187L5.878 5.531a.67.67 0 0 0-.009.956q.215.207.49.216a.6.6 0 0 0 .475-.197l1.5-1.5v5.738q0 .287.197.48a.66.66 0 0 0 .482.195q.285 0 .478-.194a.66.66 0 0 0 .193-.481V5.006l1.481 1.5a.66.66 0 0 0 .478.206.71.71 0 0 0 .694-.685.62.62 0 0 0-.197-.477L9.478 2.887a.6.6 0 0 0-.212-.14"})})]}),A=new Map;function j(e,o){let t=A.get(e);if(!t){let n=new Set,i=p=>{for(let c of n)c(p)};t={listener:i,handlers:n},A.set(e,t),document.addEventListener(e,i)}return t.handlers.add(o),()=>{t.handlers.delete(o),t.handlers.size===0&&(document.removeEventListener(e,t.listener),A.delete(e))}}function Le(e){let{isDisabled:o}=e,t=m.useRef(!1),{focusProps:n}=me({onFocusChange:r=>{t.current=r}}),i=w(r=>{t.current&&e.getItems&&r.preventDefault()}),p=w(r=>{if(!(!t.current||!e.getItems)&&(r.preventDefault(),r.clipboardData)){var l;T(r.clipboardData,e.getItems()),(l=e.onCopy)===null||l===void 0||l.call(e)}}),c=w(r=>{t.current&&e.onCut&&e.getItems&&r.preventDefault()}),d=w(r=>{!t.current||!e.onCut||!e.getItems||(r.preventDefault(),r.clipboardData&&(T(r.clipboardData,e.getItems()),e.onCut()))}),$=w(r=>{t.current&&e.onPaste&&r.preventDefault()}),u=w(r=>{if(!(!t.current||!e.onPaste)&&(r.preventDefault(),r.clipboardData)){let l=qe(r.clipboardData);e.onPaste(l)}});return m.useEffect(()=>{if(!o)return be(j("beforecopy",i),j("copy",p),j("beforecut",c),j("cut",d),j("beforepaste",$),j("paste",u))},[o,i,p,c,d,$,u]),{clipboardProps:n}}function Me(e){return e&&e.__esModule?e.default:e}const Ce=m.createContext(null);function Ve(e,o){let{isDisabled:t=!1}=e;[e,o]=xe(e,o,Ce);let n=ie(o),i=m.useRef(null),{dropProps:p,dropButtonProps:c,isDropTarget:d}=ke({...e,ref:i,hasDropButton:!0}),{buttonProps:$}=Ie(c||{},i),{hoverProps:u,isHovered:r}=$e(e),{focusProps:l,isFocused:x,isFocusVisible:h}=he(),P=Se(Me(we),"react-aria-components"),b=ge(),f=e["aria-label"]||P.format("dropzoneLabel"),g=e["aria-labelledby"],s=[b,g].filter(Boolean).join(" "),F=Pe({"aria-label":f,"aria-labelledby":s}),{clipboardProps:pe}=Le({isDisabled:t,onPaste:N=>{var y;return(y=e.onDrop)===null||y===void 0?void 0:y.call(e,{type:"drop",items:N,x:0,y:0,dropOperation:"copy"})}}),C=ve({...e,values:{isHovered:r,isFocused:x,isFocusVisible:h,isDropTarget:d,isDisabled:t},defaultClassName:"react-aria-DropZone"}),V=se(e);return delete V.id,v.createElement(ye,{values:[[je,{id:b,slot:"label"}]]},v.createElement("div",{...R(p,u,V),...C,slot:e.slot||void 0,ref:n,onClick:N=>{var y;let D=N.target;for(;D&&(!((y=n.current)===null||y===void 0)&&y.contains(D))&&!Fe(D);){if(D===n.current){var U;(U=i.current)===null||U===void 0||U.focus();break}D=D.parentElement}},"data-hovered":r||void 0,"data-focused":x||void 0,"data-focus-visible":h||void 0,"data-drop-target":d||void 0,"data-disabled":t||void 0},v.createElement(ze,null,v.createElement("button",{...R($,l,pe,F),ref:i})),C.children))}const Re=m.forwardRef(Ve);function Te(e,o){let{onSelect:t,acceptedFileTypes:n,allowsMultiple:i,defaultCamera:p,children:c,acceptDirectory:d,...$}=e,u=ie(o),r=se($);return v.createElement(v.Fragment,null,v.createElement(Ne,{onPress:()=>{var l,x;!((l=u.current)===null||l===void 0)&&l.value&&(u.current.value=""),(x=u.current)===null||x===void 0||x.click()}},c),v.createElement(Ee,{...r,type:"file",ref:u,style:{display:"none"},accept:n==null?void 0:n.toString(),onChange:l=>t==null?void 0:t(l.target.files),capture:p,multiple:i,webkitdirectory:d?"":void 0}))}const fe=m.forwardRef(Te),Ze=({onFilesChange:e,onFileAdd:o,description:t,label:n,value:i,className:p,fileSizeLimit:c,acceptedFileTypes:d})=>{const $=Ue(),{t:u}=ce("components"),[r,l]=m.useState(i),[x,h]=m.useState(!1);m.useEffect(()=>{l(i)},[i]);const P=m.useCallback(b=>{(async()=>{const f=b==null?void 0:b[0];if(f){if(d&&!d.includes(f.type)||c&&f.size>c)return;o&&h(!0);const g=await(o==null?void 0:o(f));if($()){h(!1);const s=g??oe(f);l(s),e==null||e(s)}}})()},[d,c,$,o,e]);return a.jsxs(a.Fragment,{children:[n&&a.jsx(ne,{className:B("text-sm font-medium leading-none text-neutral-800","group-data-[disabled]:cursor-not-allowed group-data-[disabled]:opacity-70","group-data-[invalid]:text-error-hover"),children:n}),a.jsxs("div",{className:"flex space-x-2.5",children:[a.jsx(Ae,{prefix:a.jsx(Be,{}),value:r==null?void 0:r.name,placeholder:u("Upload.placeholder","Choose file"),isReadOnly:!0,className:p}),a.jsx("div",{children:a.jsx(fe,{onSelect:P,acceptedFileTypes:d,children:a.jsx(de,{variant:"secondary",isLoading:x,children:u("Upload.pickFile","Pick file")})})})]}),t&&a.jsxs("div",{className:"flex gap-1 items-center text-sm text-neutral-600",children:[a.jsx(le,{}),a.jsx(L,{slot:"description",children:t})]})]})},_e=({className:e,onFilesChange:o,onFileAdd:t,description:n,label:i,value:p,fileSizeLimit:c,acceptedFileTypes:d,actionButtons:$,...u})=>{const{t:r}=ce("components"),[l,x]=m.useState(p);m.useEffect(()=>{x(p)},[p]);const h=m.useCallback(b=>{if(!b)return;let f=[...b];if(d){const s=f.filter(F=>d.includes(F.type));s.length!==f.length&&(f=s)}if(c){const s=f.filter(F=>F.size<=c);s.length!==f.length&&(f=s)}const g=[...l??[],...f.map(s=>({...oe(s),loading:Promise.resolve(t==null?void 0:t(s))}))];o==null||o(g),x(g)},[d,c,l,t,o]),P=m.useCallback(b=>{(async()=>{const g=(await Promise.all(b.items.filter(s=>s.kind==="file").map(s=>s.getFile()))).filter(s=>s!==null);h(g)})()},[h]);return a.jsxs("div",{className:"space-y-2.5",children:[a.jsxs("div",{className:"space-y-1",children:[i&&a.jsx(ne,{className:B("text-sm font-medium leading-none text-neutral-800","group-data-[disabled]:cursor-not-allowed group-data-[disabled]:opacity-70","group-data-[invalid]:text-error-hover"),children:i}),a.jsx(Re,{onDrop:P,className:De(e,b=>B("flex px-2.5 py-5 w-full flex-col items-center justify-center gap-2 rounded-sm border border-dashed border-primary dark:border-neutral-850 text-sm ring-offset-background","data-[drop-target]:border-primary data-[drop-target]:bg-neutral-200","data-[focus-visible]:outline-none data-[focus-visible]:ring-2 data-[focus-visible]:ring-ring data-[focus-visible]:ring-offset-2",b)),...u,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(fe,{allowsMultiple:!0,onSelect:h,acceptedFileTypes:d,children:a.jsx(de,{variant:"ghost",className:" h-6 p-1 dark:text-brand-secondary",children:r("Upload.pickFile","Pick file")})}),a.jsx(L,{className:"mr-2",children:r("Upload.dropzonePlaceholder","or drag it here")})]})}),n&&a.jsxs("div",{className:"flex gap-1 items-center text-sm text-neutral-600",children:[a.jsx(le,{}),a.jsx(L,{slot:"description",children:n})]})]}),a.jsx(ue,{files:l,actionButtons:$,onFilesChange:x})]})},M=({errorMessage:e,...o})=>a.jsxs("div",{className:"space-y-1",children:[o.isDropZone?a.jsx(_e,{...o}):a.jsx(Ze,{...o}),e&&a.jsx("p",{className:"text-sm text-error-foreground",children:e})]});try{M.displayName="Upload",M.__docgenInfo={description:"Upload component available as single file input or file dropzone\n\nbased on `react-aria-components`",displayName:"Upload",props:{isDropZone:{defaultValue:null,description:`optionally render DropZone instead of FileInput
optionally render DropZone instead of FileInput`,name:"isDropZone",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:"current value (controlled)\n\nA utility function `fileToAttachment` is provided by this library to convert a `File` or an array of `File` to the required format.",name:"value",required:!1,type:{name:"Attachment | Attachment[]"}},errorMessage:{defaultValue:null,description:"error message to be displayed",name:"errorMessage",required:!1,type:{name:"string"}},onFilesChange:{defaultValue:null,description:"callback to handle file selection",name:"onFilesChange",required:!1,type:{name:"((file: Attachment) => void) | ((file: Attachment[]) => void)"}},label:{defaultValue:null,description:"Label for the file input/dropzone",name:"label",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"Description for the input/dropzone",name:"description",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"CSS classname for the component",name:"className",required:!1,type:{name:"string"}},fileSizeLimit:{defaultValue:null,description:"Maximum file size in bytes",name:"fileSizeLimit",required:!1,type:{name:"number"}},onFileAdd:{defaultValue:null,description:`Callback that is triggered when a new file is added.\\
The parameter is a File object instead of an Attachment.\\
If this callback returns an Attachment, it will be added to the list of files. Otherwise, the default Attachment transformation will be applied.`,name:"onFileAdd",required:!1,type:{name:"((file: File) => void | Attachment | Promise<void | Attachment>)"}},acceptedFileTypes:{defaultValue:null,description:"Specifies what mime type of files are allowed.",name:"acceptedFileTypes",required:!1,type:{name:"string[]"}},actionButtons:{defaultValue:null,description:`Allows configuration of action buttons.
<br/><br/>
If the value is a boolean, it will show or hide the action buttons with their default behaviour.
<br/><br/>
If the value is an object, it will allow to configure the behaviour of the individual buttons, either a boolean for default behaviour show/hide, or a function that will be triggered when the corresponding button is pressed.`,name:"actionButtons",required:!1,type:{name:"boolean | ActionButtons"}}}}}catch{}const Et={component:M},q={description:"Upload a file",label:"Upload"},k={args:q},I={args:{...q,isDropZone:!0}},S={args:{...q,isDropZone:!0,value:[{id:"file1",name:"file1.txt",size:1024,type:"text/plain",url:"https://www.example.com/file1.txt"},{id:"file2",name:"file2.txt",size:2048,type:"text/plain",url:"https://www.example.com/file2.txt"}]}},z={args:{...q,description:"Upload a file (max 1MB)",label:"Upload (max 1MB)",fileSizeLimit:1024*1024}},E={args:{...q,description:"Upload a file (only .txt files)",label:"Upload (.txt only)",acceptedFileTypes:["text/plain"]}};var Z,_,O;k.parameters={...k.parameters,docs:{...(Z=k.parameters)==null?void 0:Z.docs,source:{originalSource:`{
  args: defaultArgs
}`,...(O=(_=k.parameters)==null?void 0:_.docs)==null?void 0:O.source}}};var H,W,G;I.parameters={...I.parameters,docs:{...(H=I.parameters)==null?void 0:H.docs,source:{originalSource:`{
  args: {
    ...defaultArgs,
    isDropZone: true
  }
}`,...(G=(W=I.parameters)==null?void 0:W.docs)==null?void 0:G.source}}};var J,K,Q;S.parameters={...S.parameters,docs:{...(J=S.parameters)==null?void 0:J.docs,source:{originalSource:`{
  args: {
    ...defaultArgs,
    isDropZone: true,
    value: [{
      id: "file1",
      name: "file1.txt",
      size: 1024,
      type: "text/plain",
      url: "https://www.example.com/file1.txt"
    }, {
      id: "file2",
      name: "file2.txt",
      size: 2048,
      type: "text/plain",
      url: "https://www.example.com/file2.txt"
    }]
  }
}`,...(Q=(K=S.parameters)==null?void 0:K.docs)==null?void 0:Q.source}}};var X,Y,ee;z.parameters={...z.parameters,docs:{...(X=z.parameters)==null?void 0:X.docs,source:{originalSource:`{
  args: {
    ...defaultArgs,
    description: "Upload a file (max 1MB)",
    label: "Upload (max 1MB)",
    fileSizeLimit: 1024 * 1024
  }
}`,...(ee=(Y=z.parameters)==null?void 0:Y.docs)==null?void 0:ee.source}}};var te,ae,re;E.parameters={...E.parameters,docs:{...(te=E.parameters)==null?void 0:te.docs,source:{originalSource:`{
  args: {
    ...defaultArgs,
    description: "Upload a file (only .txt files)",
    label: "Upload (.txt only)",
    acceptedFileTypes: ["text/plain"]
  }
}`,...(re=(ae=E.parameters)==null?void 0:ae.docs)==null?void 0:re.source}}};const Nt=["Default","DragAndDrop","DragAndDropWithPreloadedFiles","LimitFileSize","LimitFileTypes"];export{k as Default,I as DragAndDrop,S as DragAndDropWithPreloadedFiles,z as LimitFileSize,E as LimitFileTypes,Nt as __namedExportsOrder,Et as default};
