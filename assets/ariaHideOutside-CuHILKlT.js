import{a as b}from"./FocusScope-CUPih6c7.js";function N(s,i){let r=s;for(b(r,i)&&(r=r.parentElement);r&&!b(r,i);)r=r.parentElement;return r||document.scrollingElement||document.documentElement}let d=new WeakMap,l=[];function v(s,i=document.body){let r=new Set(s),o=new Set,u=t=>{for(let a of t.querySelectorAll("[data-live-announcer], [data-react-aria-top-layer]"))r.add(a);let n=a=>{if(r.has(a)||o.has(a.parentElement)&&a.parentElement.getAttribute("role")!=="row")return NodeFilter.FILTER_REJECT;for(let m of r)if(a.contains(m))return NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_ACCEPT},e=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n}),E=n(t);if(E===NodeFilter.FILTER_ACCEPT&&p(t),E!==NodeFilter.FILTER_REJECT){let a=e.nextNode();for(;a!=null;)p(a),a=e.nextNode()}},p=t=>{var n;let e=(n=d.get(t))!==null&&n!==void 0?n:0;t.getAttribute("aria-hidden")==="true"&&e===0||(e===0&&t.setAttribute("aria-hidden","true"),o.add(t),d.set(t,e+1))};l.length&&l[l.length-1].disconnect(),u(i);let c=new MutationObserver(t=>{for(let n of t)if(!(n.type!=="childList"||n.addedNodes.length===0)&&![...r,...o].some(e=>e.contains(n.target))){for(let e of n.removedNodes)e instanceof Element&&(r.delete(e),o.delete(e));for(let e of n.addedNodes)(e instanceof HTMLElement||e instanceof SVGElement)&&(e.dataset.liveAnnouncer==="true"||e.dataset.reactAriaTopLayer==="true")?r.add(e):e instanceof Element&&u(e)}});c.observe(i,{childList:!0,subtree:!0});let f={observe(){c.observe(i,{childList:!0,subtree:!0})},disconnect(){c.disconnect()}};return l.push(f),()=>{c.disconnect();for(let t of o){let n=d.get(t);n===1?(t.removeAttribute("aria-hidden"),d.delete(t)):d.set(t,n-1)}f===l[l.length-1]?(l.pop(),l.length&&l[l.length-1].observe()):l.splice(l.indexOf(f),1)}}export{v as $,N as a};
