import{$ as b}from"./isScrollable-BSEN4xi5.js";function N(s,a){let n=s;for(b(n,a)&&(n=n.parentElement);n&&!b(n,a);)n=n.parentElement;return n||document.scrollingElement||document.documentElement}let d=new WeakMap,l=[];function $(s,a=document.body){let n=new Set(s),o=new Set,u=t=>{for(let i of t.querySelectorAll("[data-live-announcer], [data-react-aria-top-layer]"))n.add(i);let r=i=>{if(n.has(i)||i.parentElement&&o.has(i.parentElement)&&i.parentElement.getAttribute("role")!=="row")return NodeFilter.FILTER_REJECT;for(let m of n)if(i.contains(m))return NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_ACCEPT},e=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r}),E=r(t);if(E===NodeFilter.FILTER_ACCEPT&&p(t),E!==NodeFilter.FILTER_REJECT){let i=e.nextNode();for(;i!=null;)p(i),i=e.nextNode()}},p=t=>{var r;let e=(r=d.get(t))!==null&&r!==void 0?r:0;t.getAttribute("aria-hidden")==="true"&&e===0||(e===0&&t.setAttribute("aria-hidden","true"),o.add(t),d.set(t,e+1))};l.length&&l[l.length-1].disconnect(),u(a);let c=new MutationObserver(t=>{for(let r of t)if(!(r.type!=="childList"||r.addedNodes.length===0)&&![...n,...o].some(e=>e.contains(r.target))){for(let e of r.removedNodes)e instanceof Element&&(n.delete(e),o.delete(e));for(let e of r.addedNodes)(e instanceof HTMLElement||e instanceof SVGElement)&&(e.dataset.liveAnnouncer==="true"||e.dataset.reactAriaTopLayer==="true")?n.add(e):e instanceof Element&&u(e)}});c.observe(a,{childList:!0,subtree:!0});let f={observe(){c.observe(a,{childList:!0,subtree:!0})},disconnect(){c.disconnect()}};return l.push(f),()=>{c.disconnect();for(let t of o){let r=d.get(t);r!=null&&(r===1?(t.removeAttribute("aria-hidden"),d.delete(t)):d.set(t,r-1))}f===l[l.length-1]?(l.pop(),l.length&&l[l.length-1].observe()):l.splice(l.indexOf(f),1)}}export{$,N as a};
