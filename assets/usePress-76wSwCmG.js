import{n as k,D as ue,g as L,E as fe,F as j,m as H,c as ee,d as ce,C as de}from"./useFocusRing-DmDxhQCI.js";import{e as te,d as U,a as pe}from"./platform-SeyP_Zfo.js";import{r as $,R as ge}from"./index-DRjF_FHU.js";import{b as z}from"./openLink--SV7cA94.js";function ve(){let t=$.useRef(new Map),n=$.useCallback((u,p,c,g)=>{let v=g!=null&&g.once?(...h)=>{t.current.delete(c),c(...h)}:c;t.current.set(c,{type:p,eventTarget:u,fn:v,options:g}),u.addEventListener(p,c,g)},[]),s=$.useCallback((u,p,c,g)=>{var v;let h=((v=t.current.get(c))===null||v===void 0?void 0:v.fn)||c;u.removeEventListener(p,h,g),t.current.delete(c)},[]),o=$.useCallback(()=>{t.current.forEach((u,p)=>{s(u.eventTarget,u.type,p,u.options)})},[s]);return $.useEffect(()=>o,[o]),{addGlobalListener:n,removeGlobalListener:s,removeAllGlobalListeners:o}}let C="default",B="",G=new WeakMap;function W(t){if(te()){if(C==="default"){const n=k(t);B=n.documentElement.style.webkitUserSelect,n.documentElement.style.webkitUserSelect="none"}C="disabled"}else(t instanceof HTMLElement||t instanceof SVGElement)&&(G.set(t,t.style.userSelect),t.style.userSelect="none")}function A(t){if(te()){if(C!=="disabled")return;C="restoring",setTimeout(()=>{ue(()=>{if(C==="restoring"){const n=k(t);n.documentElement.style.webkitUserSelect==="none"&&(n.documentElement.style.webkitUserSelect=B||""),B="",C="default"}})},300)}else if((t instanceof HTMLElement||t instanceof SVGElement)&&t&&G.has(t)){let n=G.get(t);t.style.userSelect==="none"&&(t.style.userSelect=n),t.getAttribute("style")===""&&t.removeAttribute("style"),G.delete(t)}}const re=ge.createContext({register:()=>{}});re.displayName="PressResponderContext";function Te(t,n){return n.get?n.get.call(t):n.value}function ne(t,n,s){if(!n.has(t))throw new TypeError("attempted to "+s+" private field on non-instance");return n.get(t)}function ye(t,n){var s=ne(t,n,"get");return Te(t,s)}function Pe(t,n){if(n.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function $e(t,n,s){Pe(t,n),n.set(t,s)}function he(t,n,s){if(n.set)n.set.call(t,s);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=s}}function q(t,n,s){var o=ne(t,n,"set");return he(t,o,s),s}function be(t){let n=$.useContext(re);if(n){let{register:s,...o}=n;t=ee(o,t),s()}return ce(n,t.ref),t}var X=new WeakMap;class Y{continuePropagation(){q(this,X,!1)}get shouldStopPropagation(){return ye(this,X)}constructor(n,s,o,u){$e(this,X,{writable:!0,value:void 0}),q(this,X,!0);var p;let c=(p=u==null?void 0:u.target)!==null&&p!==void 0?p:o.currentTarget;const g=c==null?void 0:c.getBoundingClientRect();let v,h=0,y,D=null;o.clientX!=null&&o.clientY!=null&&(y=o.clientX,D=o.clientY),g&&(y!=null&&D!=null?(v=y-g.left,h=D-g.top):(v=g.width/2,h=g.height/2)),this.type=n,this.pointerType=s,this.target=o.currentTarget,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.x=v,this.y=h}}const J=Symbol("linkClicked");function we(t){let{onPress:n,onPressChange:s,onPressStart:o,onPressEnd:u,onPressUp:p,isDisabled:c,isPressed:g,preventFocusOnPress:v,shouldCancelOnPointerExit:h,allowTextSelectionOnPress:y,ref:D,...se}=be(t),[oe,N]=$.useState(!1),O=$.useRef({isPressed:!1,ignoreEmulatedMouseEvents:!1,ignoreClickAfterPress:!1,didFirePressStart:!1,isTriggeringEvent:!1,activePointerId:null,target:null,isOverTarget:!1,pointerType:null}),{addGlobalListener:S,removeAllGlobalListeners:M}=ve(),b=L((e,l)=>{let P=O.current;if(c||P.didFirePressStart)return!1;let i=!0;if(P.isTriggeringEvent=!0,o){let d=new Y("pressstart",l,e);o(d),i=d.shouldStopPropagation}return s&&s(!0),P.isTriggeringEvent=!1,P.didFirePressStart=!0,N(!0),i}),T=L((e,l,P=!0)=>{let i=O.current;if(!i.didFirePressStart)return!1;i.ignoreClickAfterPress=!0,i.didFirePressStart=!1,i.isTriggeringEvent=!0;let d=!0;if(u){let r=new Y("pressend",l,e);u(r),d=r.shouldStopPropagation}if(s&&s(!1),N(!1),n&&P&&!c){let r=new Y("press",l,e);n(r),d&&(d=r.shouldStopPropagation)}return i.isTriggeringEvent=!1,d}),w=L((e,l)=>{let P=O.current;if(c)return!1;if(p){P.isTriggeringEvent=!0;let i=new Y("pressup",l,e);return p(i),P.isTriggeringEvent=!1,i.shouldStopPropagation}return!0}),x=L(e=>{let l=O.current;l.isPressed&&l.target&&(l.isOverTarget&&l.pointerType!=null&&T(E(l.target,e),l.pointerType,!1),l.isPressed=!1,l.isOverTarget=!1,l.activePointerId=null,l.pointerType=null,M(),y||A(l.target))}),I=L(e=>{h&&x(e)}),le=$.useMemo(()=>{let e=O.current,l={onKeyDown(i){if(R(i.nativeEvent,i.currentTarget)&&i.currentTarget.contains(i.target)){var d;Z(i.target,i.key)&&i.preventDefault();let r=!0;if(!e.isPressed&&!i.repeat){e.target=i.currentTarget,e.isPressed=!0,r=b(i,"keyboard");let f=i.currentTarget,a=m=>{R(m,f)&&!m.repeat&&f.contains(m.target)&&e.target&&w(E(e.target,m),"keyboard")};S(k(i.currentTarget),"keyup",de(a,P),!0)}r&&i.stopPropagation(),i.metaKey&&pe()&&((d=e.metaKeyEvents)===null||d===void 0||d.set(i.key,i.nativeEvent))}else i.key==="Meta"&&(e.metaKeyEvents=new Map)},onClick(i){if(!(i&&!i.currentTarget.contains(i.target))&&i&&i.button===0&&!e.isTriggeringEvent&&!z.isOpening){let d=!0;if(c&&i.preventDefault(),!e.ignoreClickAfterPress&&!e.ignoreEmulatedMouseEvents&&!e.isPressed&&(e.pointerType==="virtual"||j(i.nativeEvent))){!c&&!v&&U(i.currentTarget);let r=b(i,"virtual"),f=w(i,"virtual"),a=T(i,"virtual");d=r&&f&&a}e.ignoreEmulatedMouseEvents=!1,e.ignoreClickAfterPress=!1,d&&i.stopPropagation()}}},P=i=>{var d;if(e.isPressed&&e.target&&R(i,e.target)){var r;Z(i.target,i.key)&&i.preventDefault();let a=i.target;T(E(e.target,i),"keyboard",e.target.contains(a)),M(),i.key!=="Enter"&&V(e.target)&&e.target.contains(a)&&!i[J]&&(i[J]=!0,z(e.target,i,!1)),e.isPressed=!1,(r=e.metaKeyEvents)===null||r===void 0||r.delete(i.key)}else if(i.key==="Meta"&&(!((d=e.metaKeyEvents)===null||d===void 0)&&d.size)){var f;let a=e.metaKeyEvents;e.metaKeyEvents=void 0;for(let m of a.values())(f=e.target)===null||f===void 0||f.dispatchEvent(new KeyboardEvent("keyup",m))}};if(typeof PointerEvent<"u"){l.onPointerDown=a=>{if(a.button!==0||!a.currentTarget.contains(a.target))return;if(fe(a.nativeEvent)){e.pointerType="virtual";return}F(a.currentTarget)&&a.preventDefault(),e.pointerType=a.pointerType;let m=!0;e.isPressed||(e.isPressed=!0,e.isOverTarget=!0,e.activePointerId=a.pointerId,e.target=a.currentTarget,!c&&!v&&U(a.currentTarget),y||W(e.target),m=b(a,e.pointerType),S(k(a.currentTarget),"pointermove",i,!1),S(k(a.currentTarget),"pointerup",d,!1),S(k(a.currentTarget),"pointercancel",f,!1)),m&&a.stopPropagation()},l.onMouseDown=a=>{a.currentTarget.contains(a.target)&&a.button===0&&(F(a.currentTarget)&&a.preventDefault(),a.stopPropagation())},l.onPointerUp=a=>{!a.currentTarget.contains(a.target)||e.pointerType==="virtual"||a.button===0&&_(a,a.currentTarget)&&w(a,e.pointerType||a.pointerType)};let i=a=>{a.pointerId===e.activePointerId&&(e.target&&_(a,e.target)?!e.isOverTarget&&e.pointerType!=null&&(e.isOverTarget=!0,b(E(e.target,a),e.pointerType)):e.target&&e.isOverTarget&&e.pointerType!=null&&(e.isOverTarget=!1,T(E(e.target,a),e.pointerType,!1),I(a)))},d=a=>{a.pointerId===e.activePointerId&&e.isPressed&&a.button===0&&e.target&&(_(a,e.target)&&e.pointerType!=null?T(E(e.target,a),e.pointerType):e.isOverTarget&&e.pointerType!=null&&T(E(e.target,a),e.pointerType,!1),e.isPressed=!1,e.isOverTarget=!1,e.activePointerId=null,e.pointerType=null,M(),y||A(e.target),"ontouchend"in e.target&&a.pointerType!=="mouse"&&S(e.target,"touchend",r,{once:!0}))},r=a=>{ae(a.currentTarget)&&a.preventDefault()},f=a=>{x(a)};l.onDragStart=a=>{a.currentTarget.contains(a.target)&&x(a)}}else{l.onMouseDown=r=>{if(r.button!==0||!r.currentTarget.contains(r.target))return;if(F(r.currentTarget)&&r.preventDefault(),e.ignoreEmulatedMouseEvents){r.stopPropagation();return}e.isPressed=!0,e.isOverTarget=!0,e.target=r.currentTarget,e.pointerType=j(r.nativeEvent)?"virtual":"mouse",!c&&!v&&U(r.currentTarget),b(r,e.pointerType)&&r.stopPropagation(),S(k(r.currentTarget),"mouseup",i,!1)},l.onMouseEnter=r=>{if(!r.currentTarget.contains(r.target))return;let f=!0;e.isPressed&&!e.ignoreEmulatedMouseEvents&&e.pointerType!=null&&(e.isOverTarget=!0,f=b(r,e.pointerType)),f&&r.stopPropagation()},l.onMouseLeave=r=>{if(!r.currentTarget.contains(r.target))return;let f=!0;e.isPressed&&!e.ignoreEmulatedMouseEvents&&e.pointerType!=null&&(e.isOverTarget=!1,f=T(r,e.pointerType,!1),I(r)),f&&r.stopPropagation()},l.onMouseUp=r=>{r.currentTarget.contains(r.target)&&!e.ignoreEmulatedMouseEvents&&r.button===0&&w(r,e.pointerType||"mouse")};let i=r=>{if(r.button===0){if(e.isPressed=!1,M(),e.ignoreEmulatedMouseEvents){e.ignoreEmulatedMouseEvents=!1;return}e.target&&_(r,e.target)&&e.pointerType!=null?T(E(e.target,r),e.pointerType):e.target&&e.isOverTarget&&e.pointerType!=null&&T(E(e.target,r),e.pointerType,!1),e.isOverTarget=!1}};l.onTouchStart=r=>{if(!r.currentTarget.contains(r.target))return;let f=me(r.nativeEvent);if(!f)return;e.activePointerId=f.identifier,e.ignoreEmulatedMouseEvents=!0,e.isOverTarget=!0,e.isPressed=!0,e.target=r.currentTarget,e.pointerType="touch",!c&&!v&&U(r.currentTarget),y||W(e.target),b(K(e.target,r),e.pointerType)&&r.stopPropagation(),S(H(r.currentTarget),"scroll",d,!0)},l.onTouchMove=r=>{if(!r.currentTarget.contains(r.target))return;if(!e.isPressed){r.stopPropagation();return}let f=Q(r.nativeEvent,e.activePointerId),a=!0;f&&_(f,r.currentTarget)?!e.isOverTarget&&e.pointerType!=null&&(e.isOverTarget=!0,a=b(K(e.target,r),e.pointerType)):e.isOverTarget&&e.pointerType!=null&&(e.isOverTarget=!1,a=T(K(e.target,r),e.pointerType,!1),I(K(e.target,r))),a&&r.stopPropagation()},l.onTouchEnd=r=>{if(!r.currentTarget.contains(r.target))return;if(!e.isPressed){r.stopPropagation();return}let f=Q(r.nativeEvent,e.activePointerId),a=!0;f&&_(f,r.currentTarget)&&e.pointerType!=null?(w(K(e.target,r),e.pointerType),a=T(K(e.target,r),e.pointerType)):e.isOverTarget&&e.pointerType!=null&&(a=T(K(e.target,r),e.pointerType,!1)),a&&r.stopPropagation(),e.isPressed=!1,e.activePointerId=null,e.isOverTarget=!1,e.ignoreEmulatedMouseEvents=!0,e.target&&!y&&A(e.target),M()},l.onTouchCancel=r=>{r.currentTarget.contains(r.target)&&(r.stopPropagation(),e.isPressed&&x(K(e.target,r)))};let d=r=>{e.isPressed&&r.target.contains(e.target)&&x({currentTarget:e.target,shiftKey:!1,ctrlKey:!1,metaKey:!1,altKey:!1})};l.onDragStart=r=>{r.currentTarget.contains(r.target)&&x(r)}}return l},[S,c,v,M,y,x,I,T,b,w]);return $.useEffect(()=>()=>{var e;y||A((e=O.current.target)!==null&&e!==void 0?e:void 0)},[y]),{isPressed:g||oe,pressProps:ee(se,le)}}function V(t){return t.tagName==="A"&&t.hasAttribute("href")}function R(t,n){const{key:s,code:o}=t,u=n,p=u.getAttribute("role");return(s==="Enter"||s===" "||s==="Spacebar"||o==="Space")&&!(u instanceof H(u).HTMLInputElement&&!ie(u,s)||u instanceof H(u).HTMLTextAreaElement||u.isContentEditable)&&!((p==="link"||!p&&V(u))&&s!=="Enter")}function me(t){const{targetTouches:n}=t;return n.length>0?n[0]:null}function Q(t,n){const s=t.changedTouches;for(let o=0;o<s.length;o++){const u=s[o];if(u.identifier===n)return u}return null}function K(t,n){let s=0,o=0;return n.targetTouches&&n.targetTouches.length===1&&(s=n.targetTouches[0].clientX,o=n.targetTouches[0].clientY),{currentTarget:t,shiftKey:n.shiftKey,ctrlKey:n.ctrlKey,metaKey:n.metaKey,altKey:n.altKey,clientX:s,clientY:o}}function E(t,n){let s=n.clientX,o=n.clientY;return{currentTarget:t,shiftKey:n.shiftKey,ctrlKey:n.ctrlKey,metaKey:n.metaKey,altKey:n.altKey,clientX:s,clientY:o}}function Ee(t){let n=0,s=0;return t.width!==void 0?n=t.width/2:t.radiusX!==void 0&&(n=t.radiusX),t.height!==void 0?s=t.height/2:t.radiusY!==void 0&&(s=t.radiusY),{top:t.clientY-s,right:t.clientX+n,bottom:t.clientY+s,left:t.clientX-n}}function Se(t,n){return!(t.left>n.right||n.left>t.right||t.top>n.bottom||n.top>t.bottom)}function _(t,n){let s=n.getBoundingClientRect(),o=Ee(t);return Se(s,o)}function F(t){return!(t instanceof HTMLElement)||!t.hasAttribute("draggable")}function ae(t){return t instanceof HTMLInputElement?!1:t instanceof HTMLButtonElement?t.type!=="submit"&&t.type!=="reset":!V(t)}function Z(t,n){return t instanceof HTMLInputElement?!ie(t,n):ae(t)}const Ke=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function ie(t,n){return t.type==="checkbox"||t.type==="radio"?n===" ":Ke.has(t.type)}export{re as $,we as a,ve as b,A as c,W as d};
