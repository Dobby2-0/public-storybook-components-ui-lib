import{j as t}from"./jsx-runtime-DR9Q75dM.js";import{f as ae,F as me}from"./FileList-DsHj_jj5.js";import{L as le,D as se}from"./Label-C3T7MHLE.js";import{E as be,T as he}from"./TextField-BDd_KEhY.js";import{c as xe}from"./index-By-mRCMU.js";import{q as ie}from"./Info-CwC22AGT.js";import{r as m,R as y}from"./index-DRjF_FHU.js";import{q as $e,g as q,C as ge,i as ve,b as oe,j as ye,k as De,r as we,l as Pe,p as ne,w as qe,c as S,a as je}from"./useFocusRing-DmDxhQCI.js";import{$ as Ee}from"./intlStrings-ZMTSFH_M.js";import{a as Ie,b as V}from"./Text-w-xymXK0.js";import{$ as ke}from"./useLabels-DHGrCtKF.js";import{a as ze}from"./FocusScope-BD8VaRNk.js";import{$ as Z,a as Ae,b as Le}from"./useDrop-DV2M16MX.js";import{a as Ue}from"./Button-B8-bwU7B.js";import{$ as Te}from"./useLocalizedStringFormatter-DDHaVjp6.js";import{$ as Be}from"./VisuallyHidden-BC8uHK73.js";import{b as Me}from"./Input-BW45IPKB.js";import{$ as Ve}from"./PressResponder-DV9psGSD.js";import{u as Ce}from"./index-BSPp2CQF.js";import{B as de}from"./Button-Cyl0gDq7.js";import{u as ce}from"./useTranslation-DW3ljh-R.js";import"./IconButton-3VsyiOdu.js";import"./ButtonBase-Cv97aE-9.js";import"./Loader-Cgl1KvpE.js";import"./index-wL3GxAOQ.js";import"./Pill-ByEbGEhU.js";import"./Close-a0dMVUhZ.js";import"./Description-BZTUmzGN.js";import"./index-rX-Bn4lm.js";import"./FieldError-CciZ9EgW.js";import"./Form-qpAKqtEj.js";import"./platform-SeyP_Zfo.js";import"./ariaHideOutside-7Z-f0sYi.js";import"./useDescription-vAR7K5Yy.js";import"./Hidden-CICGlFC4.js";import"./useFocusable-Cuxsel3J.js";import"./usePress-76wSwCmG.js";import"./openLink--SV7cA94.js";import"./context-C5A1kbiU.js";import"./useFormReset-B7wBBm0H.js";import"./useControlledState-uSQY0H5C.js";import"./context-BLxVKTzt.js";const Ne=({title:e,titleId:l,...r})=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18",fill:"currentColor",width:"1.125rem",height:"1.125rem","aria-labelledby":l,...r,children:[e?t.jsx("title",{id:l,children:e}):null,t.jsx("g",{children:t.jsx("path",{d:"M4.945 14.4q-.558 0-.951-.397a1.3 1.3 0 0 1-.394-.953v-.675q0-.287.193-.481a.65.65 0 0 1 .478-.194q.285 0 .482.194.197.195.197.481v.675h8.1v-.675q0-.287.193-.481a.65.65 0 0 1 .478-.194q.284 0 .482.194.197.195.197.481v.675a1.3 1.3 0 0 1-.397.953 1.3 1.3 0 0 1-.954.397zM9.266 2.747a.7.7 0 0 0-.253-.047.68.68 0 0 0-.473.187L5.878 5.531a.67.67 0 0 0-.009.956q.215.207.49.216a.6.6 0 0 0 .475-.197l1.5-1.5v5.738q0 .287.197.48a.66.66 0 0 0 .482.195q.285 0 .478-.194a.66.66 0 0 0 .193-.481V5.006l1.481 1.5a.66.66 0 0 0 .478.206.71.71 0 0 0 .694-.685.62.62 0 0 0-.197-.477L9.478 2.887a.6.6 0 0 0-.212-.14"})})]}),M=new Map;function j(e,l){let r=M.get(e);if(!r){let c=new Set,s=n=>{for(let p of c)p(n)};r={listener:s,handlers:c},M.set(e,r),document.addEventListener(e,s)}return r.handlers.add(l),()=>{r.handlers.delete(l),r.handlers.size===0&&(document.removeEventListener(e,r.listener),M.delete(e))}}function Se(e){let{isDisabled:l}=e,r=m.useRef(!1),{focusProps:c}=$e({onFocusChange:a=>{r.current=a}}),s=q(a=>{r.current&&e.getItems&&a.preventDefault()}),n=q(a=>{if(!(!r.current||!e.getItems)&&(a.preventDefault(),a.clipboardData)){var o;Z(a.clipboardData,e.getItems()),(o=e.onCopy)===null||o===void 0||o.call(e)}}),p=q(a=>{r.current&&e.onCut&&e.getItems&&a.preventDefault()}),f=q(a=>{!r.current||!e.onCut||!e.getItems||(a.preventDefault(),a.clipboardData&&(Z(a.clipboardData,e.getItems()),e.onCut()))}),d=q(a=>{r.current&&e.onPaste&&a.preventDefault()}),i=q(a=>{if(!(!r.current||!e.onPaste)&&(a.preventDefault(),a.clipboardData)){let o=Ae(a.clipboardData);e.onPaste(o)}});return m.useEffect(()=>{if(!l)return ge(j("beforecopy",s),j("copy",n),j("beforecut",p),j("cut",f),j("beforepaste",d),j("paste",i))},[l,s,n,p,f,d,i]),{clipboardProps:c}}function Ze(e){return e&&e.__esModule?e.default:e}const _e=m.createContext(null);function Fe(e,l){let{isDisabled:r=!1}=e;[e,l]=ve(e,l,_e);let c=oe(l),s=m.useRef(null),{dropProps:n,dropButtonProps:p,isDropTarget:f}=Le({...e,ref:s,hasDropButton:!0}),{buttonProps:d}=Ue(p||{},s),{hoverProps:i,isHovered:a}=ye(e),{focusProps:o,isFocused:b,isFocusVisible:g}=De(),v=Te(Ze(Ee),"react-aria-components"),w=we(),$=e["aria-label"]||v.format("dropzoneLabel"),u=e["aria-labelledby"],h=[w,u].filter(Boolean).join(" "),x=ke({"aria-label":$,"aria-labelledby":h}),{clipboardProps:ue}=Se({isDisabled:r,onPaste:T=>{var D;return(D=e.onDrop)===null||D===void 0?void 0:D.call(e,{type:"drop",items:T,x:0,y:0,dropOperation:"copy"})}}),C=Pe({...e,values:{isHovered:a,isFocused:b,isFocusVisible:g,isDropTarget:f,isDisabled:r},defaultClassName:"react-aria-DropZone"}),N=ne(e);return delete N.id,y.createElement(qe,{values:[[Ie,{id:w,slot:"label"}]]},y.createElement("div",{...S(n,i,N),...C,slot:e.slot||void 0,ref:c,onClick:T=>{var D;let P=T.target;for(;P&&(!((D=c.current)===null||D===void 0)&&D.contains(P))&&!ze(P);){if(P===c.current){var B;(B=s.current)===null||B===void 0||B.focus();break}P=P.parentElement}},"data-hovered":a||void 0,"data-focused":b||void 0,"data-focus-visible":g||void 0,"data-drop-target":f||void 0,"data-disabled":r||void 0},y.createElement(Be,null,y.createElement("button",{...S(d,o,ue,x),ref:s})),C.children))}const Oe=m.forwardRef(Fe);function He(e,l){let{onSelect:r,acceptedFileTypes:c,allowsMultiple:s,defaultCamera:n,children:p,acceptDirectory:f,...d}=e,i=oe(l),a=ne(d);return y.createElement(y.Fragment,null,y.createElement(Ve,{onPress:()=>{var o,b;!((o=i.current)===null||o===void 0)&&o.value&&(i.current.value=""),(b=i.current)===null||b===void 0||b.click()}},p),y.createElement(Me,{...a,type:"file",ref:i,style:{display:"none"},accept:c==null?void 0:c.toString(),onChange:o=>r==null?void 0:r(o.target.files),capture:n,multiple:s,webkitdirectory:f?"":void 0}))}const fe=m.forwardRef(He);var pe=(e=>(e.FILE_TYPE="fileType",e.FILE_SIZE="fileSize",e))(pe||{});const Re=({file:e,description:l,label:r,className:c,fileSizeLimit:s,acceptedFileTypes:n,onFileAdd:p,onFileSelectionChange:f,onFileReject:d})=>{const i=Ce(),{t:a}=ce("components"),[o,b]=m.useState(e),[g,v]=m.useState(!1);m.useEffect(()=>{b(e)},[e]);const w=m.useCallback($=>{(async()=>{const u=$==null?void 0:$[0];if(u){if(n&&!n.includes(u.type)){d==null||d(u,"fileType");return}if(s&&u.size>s){d==null||d(u,"fileSize");return}p&&v(!0);const h=await(p==null?void 0:p(u));if(i()){v(!1);const x=h??ae(u);b(x),f==null||f(x)}}})()},[n,s,i,p,f,d]);return t.jsxs(t.Fragment,{children:[r&&t.jsx(le,{children:r}),t.jsxs("div",{className:"flex space-x-2.5",children:[t.jsx(he,{prefix:t.jsx(Ne,{}),value:o==null?void 0:o.name,placeholder:a("Upload.placeholder","Choose file"),isReadOnly:!0,className:c}),t.jsx("div",{children:t.jsx(fe,{onSelect:w,acceptedFileTypes:n,children:t.jsx(de,{variant:"secondary",isLoading:g,children:a("Upload.pickFile","Pick file")})})})]}),l&&t.jsxs(se,{className:"flex gap-1 items-center",children:[t.jsx(ie,{}),t.jsx(V,{slot:"description",children:l})]})]})},We=({files:e,className:l,description:r,label:c,fileSizeLimit:s,acceptedFileTypes:n,actionButtons:p,onFileAdd:f,onFileSelectionChange:d,onFileReject:i,...a})=>{const{t:o}=ce("components"),[b,g]=m.useState(e);m.useEffect(()=>{g(e)},[e]);const v=m.useCallback($=>{if(!$)return;let u=[...$];if((n||s)&&(u=u.filter(h=>n&&!n.includes(h.type)?(i==null||i(h,"fileType"),!1):s&&h.size>s?(i==null||i(h,"fileSize"),!1):!0)),u.length){const h=[...b??[],...u.map(x=>({...ae(x),loading:Promise.resolve(f==null?void 0:f(x))}))];d==null||d(h),g(h)}},[n,s,b,f,i,d]),w=m.useCallback($=>{(async()=>{const h=(await Promise.all($.items.filter(x=>x.kind==="file").map(x=>x.getFile()))).filter(x=>x!==null);v(h)})()},[v]);return t.jsxs("div",{className:"space-y-2.5",children:[t.jsxs("div",{className:"space-y-1",children:[c&&t.jsx(le,{children:c}),t.jsx(Oe,{onDrop:w,className:je(l,$=>xe("flex px-2.5 py-5 w-full flex-col items-center justify-center gap-2 rounded-sm border border-dashed border-primary dark:border-neutral-850 text-sm ring-offset-background","data-[drop-target]:border-primary data-[drop-target]:bg-neutral-200","data-[focus-visible]:outline-none data-[focus-visible]:ring-2 data-[focus-visible]:ring-ring data-[focus-visible]:ring-offset-2",$)),...a,children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(fe,{allowsMultiple:!0,onSelect:v,acceptedFileTypes:n,children:t.jsx(de,{variant:"ghost",className:" h-6 p-1 dark:text-brand-secondary",children:o("Upload.pickFile","Pick file")})}),t.jsx(V,{className:"mr-2",children:o("Upload.dropzonePlaceholder","or drag it here")})]})}),r&&t.jsxs(se,{className:"flex gap-1 items-center",children:[t.jsx(ie,{}),t.jsx(V,{slot:"description",children:r})]})]}),t.jsx(me,{files:b,actionButtons:p,onFilesChange:g})]})},U=({errorMessage:e,...l})=>t.jsxs("div",{className:"space-y-1",children:[l.isDropZone?t.jsx(We,{...l}):t.jsx(Re,{...l}),e&&t.jsx(be,{children:e})]});U.RejectReason=pe;try{U.displayName="Upload",U.__docgenInfo={description:"Upload component available as single file input or file dropzone\n\nbased on `react-aria-components`",displayName:"Upload",props:{isDropZone:{defaultValue:null,description:"optionally render DropZone instead of FileInput",name:"isDropZone",required:!1,type:{name:"boolean"}},errorMessage:{defaultValue:null,description:"error message to be displayed",name:"errorMessage",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"Label for the file input/dropzone",name:"label",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"Description for the input/dropzone",name:"description",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"CSS classname for the component",name:"className",required:!1,type:{name:"string"}},fileSizeLimit:{defaultValue:null,description:"Maximum file size in bytes",name:"fileSizeLimit",required:!1,type:{name:"number"}},onFileAdd:{defaultValue:null,description:`Callback that is triggered when a new file is added.\\
The parameter is a File object instead of an Attachment.\\
If this callback returns an Attachment, it will be added to the list of files. Otherwise, the default Attachment transformation will be applied.`,name:"onFileAdd",required:!1,type:{name:"((file: File) => FileAddResult | Promise<FileAddResult>)"}},onFileReject:{defaultValue:null,description:"Callback that is triggered when a file is rejected due to file type or size constraints.\\\nThe RejectReason enum is exported through this component: `Upload.RejectReason`.",name:"onFileReject",required:!1,type:{name:"((file: File, reason: RejectReason) => void)"}},file:{defaultValue:null,description:"current value (controlled)\n\nA utility function `fileToAttachment` is provided by this library to convert a `File` or an array of `File` to the required format.",name:"file",required:!1,type:{name:"Attachment"}},onFileSelectionChange:{defaultValue:null,description:"callback to handle file selection",name:"onFileSelectionChange",required:!1,type:{name:"((file: Attachment) => void) | ((files: Attachment[]) => void)"}},acceptedFileTypes:{defaultValue:null,description:"Specifies what mime type of files are allowed.",name:"acceptedFileTypes",required:!1,type:{name:"string[]"}},files:{defaultValue:null,description:"current value (controlled)\n\nA utility function `fileToAttachment` is provided by this library to convert a `File` or an array of `File` to the required format.",name:"files",required:!1,type:{name:"Attachment[]"}},actionButtons:{defaultValue:null,description:`Allows configuration of action buttons.
<br/><br/>
If the value is a boolean, it will show or hide the action buttons with their default behaviour.
<br/><br/>
If the value is an object, it will allow to configure the behaviour of the individual buttons, either a boolean for default behaviour show/hide, or a function that will be triggered when the corresponding button is pressed.`,name:"actionButtons",required:!1,type:{name:"boolean | ActionButtons"}}}}}catch{}const Mt={component:U,argTypes:{file:{if:{arg:"isDropZone",truthy:!1}},files:{if:{arg:"isDropZone"}}}},E={description:"Upload a file",label:"Upload"},I={args:E},k={args:{...E,isDropZone:!0}},z={args:{...E,isDropZone:!0,files:[{id:"file1",name:"file1.txt",size:1024,type:"text/plain",url:"https://www.example.com/file1.txt"},{id:"file2",name:"file2.txt",size:2048,type:"text/plain",url:"https://www.example.com/file2.txt"}]}},A={args:{...E,description:"Upload a file (max 1MB)",label:"Upload (max 1MB)",fileSizeLimit:1024*1024}},L={args:{...E,description:"Upload a file (only .txt files)",label:"Upload (.txt only)",acceptedFileTypes:["text/plain"]}};var _,F,O;I.parameters={...I.parameters,docs:{...(_=I.parameters)==null?void 0:_.docs,source:{originalSource:`{
  args: defaultArgs
}`,...(O=(F=I.parameters)==null?void 0:F.docs)==null?void 0:O.source}}};var H,R,W;k.parameters={...k.parameters,docs:{...(H=k.parameters)==null?void 0:H.docs,source:{originalSource:`{
  args: {
    ...defaultArgs,
    isDropZone: true
  }
}`,...(W=(R=k.parameters)==null?void 0:R.docs)==null?void 0:W.source}}};var G,Y,J;z.parameters={...z.parameters,docs:{...(G=z.parameters)==null?void 0:G.docs,source:{originalSource:`{
  args: {
    ...defaultArgs,
    isDropZone: true,
    files: [{
      id: "file1",
      name: "file1.txt",
      size: 1024,
      type: "text/plain",
      url: "https://www.example.com/file1.txt"
    }, {
      id: "file2",
      name: "file2.txt",
      size: 2048,
      type: "text/plain",
      url: "https://www.example.com/file2.txt"
    }]
  }
}`,...(J=(Y=z.parameters)==null?void 0:Y.docs)==null?void 0:J.source}}};var K,Q,X;A.parameters={...A.parameters,docs:{...(K=A.parameters)==null?void 0:K.docs,source:{originalSource:`{
  args: {
    ...defaultArgs,
    description: "Upload a file (max 1MB)",
    label: "Upload (max 1MB)",
    fileSizeLimit: 1024 * 1024
  }
}`,...(X=(Q=A.parameters)==null?void 0:Q.docs)==null?void 0:X.source}}};var ee,te,re;L.parameters={...L.parameters,docs:{...(ee=L.parameters)==null?void 0:ee.docs,source:{originalSource:`{
  args: {
    ...defaultArgs,
    description: "Upload a file (only .txt files)",
    label: "Upload (.txt only)",
    acceptedFileTypes: ["text/plain"]
  }
}`,...(re=(te=L.parameters)==null?void 0:te.docs)==null?void 0:re.source}}};const Vt=["Default","DragAndDrop","DragAndDropWithPreloadedFiles","LimitFileSize","LimitFileTypes"];export{I as Default,k as DragAndDrop,z as DragAndDropWithPreloadedFiles,A as LimitFileSize,L as LimitFileTypes,Vt as __namedExportsOrder,Mt as default};
