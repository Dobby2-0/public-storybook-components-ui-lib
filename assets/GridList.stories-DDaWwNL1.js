import{j as H}from"./jsx-runtime-DR9Q75dM.js";import{C as qe}from"./Checkbox-BMkKiRSi.js";import{r as Ae,b as ze,c as ie,g as $e}from"./index-By-mRCMU.js";import{$ as Ge,a as je,b as Ue,m as We}from"./useGridSelectionCheckbox-CXruGBmI.js";import{r as w,R}from"./index-DRjF_FHU.js";import{b as Xe,$ as Ye}from"./Button-B8-bwU7B.js";import{h as Te,E as Ze,F as Je,s as Y,e as ue,c as W,p as pe,r as Qe,C as _e,o as q,z as et,b as Me,j as tt,k as Ce,l as fe,w as Be,G as _,i as rt,a as ne}from"./useFocusRing-DmDxhQCI.js";import{$ as ot}from"./RSPContexts-BlCrYygD.js";import{a as it,c as le,f as nt,$ as lt,b as at}from"./Collection-BXZCYl9S.js";import{m as dt,c as st,n as G,i as Q,$ as ct,a as De,j as ut,k as pt,l as ft,o as gt}from"./DragAndDrop-CF_SXvn4.js";import{e as yt,d as ae,f as mt}from"./ListBox-DM1LzFJn.js";import{a as bt}from"./Text-w-xymXK0.js";import{d as vt}from"./openLink--SV7cA94.js";import{$ as z}from"./getScrollParent-BL0kfGii.js";import{$ as he,b as $t}from"./FocusScope-BD8VaRNk.js";import{$ as ge}from"./context-C5A1kbiU.js";import{$ as Dt}from"./useHasTabbableChild-B31XKCoF.js";import{a as ye}from"./VisuallyHidden-BC8uHK73.js";import{c as ee,d as j,e as Fe,f as me,$ as ht,g as xt,h as te,i as re,j as xe,k as kt,l as N,b as Pt,m as V,n as wt,o as de,p as U,q as Kt,r as It,s as Ve,t as St,u as Et,v as Rt,w as Le,x as Ot,y as At,z as Tt,A as Mt}from"./useDrop-DV2M16MX.js";import{$ as Ct}from"./isScrollable-BSEN4xi5.js";import{b as Bt,e as Ft}from"./platform-SeyP_Zfo.js";import{$ as be}from"./useLocalizedStringFormatter-DDHaVjp6.js";import{b as Vt}from"./usePress-76wSwCmG.js";import{$ as He}from"./useDescription-vAR7K5Yy.js";import{r as Lt}from"./index-rX-Bn4lm.js";import"./Check-f6fs0czz.js";import"./Form-qpAKqtEj.js";import"./useToggleState-gOjv4do9.js";import"./useFormReset-B7wBBm0H.js";import"./useFocusable-Cuxsel3J.js";import"./useControlledState-uSQY0H5C.js";import"./Hidden-CICGlFC4.js";import"./useLabels-DHGrCtKF.js";import"./ariaHideOutside-7Z-f0sYi.js";function Ht(o){return o&&o.__esModule?o.default:o}const ke={keyboard:{start:"dragDescriptionKeyboard",end:"endDragKeyboard"},touch:{start:"dragDescriptionTouch",end:"endDragTouch"},virtual:{start:"dragDescriptionVirtual",end:"endDragVirtual"}};function Nt(o){let{hasDragButton:t,isDisabled:n}=o,e=be(Ht(me),"@react-aria/dnd"),i=w.useRef({options:o,x:0,y:0}).current;i.options=o;let r=w.useRef(!1),[a,u]=w.useState(!1),$=l=>{r.current=l,u(l)},{addGlobalListener:h,removeAllGlobalListeners:b}=Vt(),k=w.useRef(null),s=l=>{var v;if(l.defaultPrevented)return;if(l.stopPropagation(),k.current==="virtual"){l.preventDefault(),m(l.target),k.current=null;return}typeof o.onDragStart=="function"&&o.onDragStart({type:"dragstart",x:l.clientX,y:l.clientY});let D=o.getItems();ht(l.dataTransfer,D);let K=j.all;if(typeof o.getAllowedDropOperations=="function"){let I=o.getAllowedDropOperations();K=j.none;for(let E of I)K|=j[E]||j.none}ee(K),l.dataTransfer.effectAllowed=xt[K]||"none",typeof((v=o.preview)===null||v===void 0?void 0:v.current)=="function"&&o.preview.current(D,I=>{if(!I)return;let E=I.getBoundingClientRect(),x=l.currentTarget.getBoundingClientRect(),O=l.clientX-x.x,T=l.clientY-x.y;(O>E.width||T>E.height)&&(O=E.width/2,T=E.height/2);let B=2*Math.round(E.height/2);I.style.height=`${B}px`,l.dataTransfer.setDragImage(I,O,T)}),h(window,"drop",I=>{I.preventDefault(),I.stopPropagation(),console.warn("Drags initiated from the React Aria useDrag hook may only be dropped on a target created with useDrop. This ensures that a keyboard and screen reader accessible alternative is available.")},{once:!0}),i.x=l.clientX,i.y=l.clientY,requestAnimationFrame(()=>{$(!0)})},y=l=>{l.stopPropagation(),!(l.clientX===i.x&&l.clientY===i.y)&&(typeof o.onDragMove=="function"&&o.onDragMove({type:"dragmove",x:l.clientX,y:l.clientY}),i.x=l.clientX,i.y=l.clientY)},p=l=>{if(l.stopPropagation(),typeof o.onDragEnd=="function"){let v={type:"dragend",x:l.clientX,y:l.clientY,dropOperation:te[l.dataTransfer.dropEffect]};re&&(v.dropOperation=te[re]),o.onDragEnd(v)}$(!1),b(),ee(j.none),xe(void 0)};Te(()=>()=>{if(r.current){if(typeof i.options.onDragEnd=="function"){let l={type:"dragend",x:0,y:0,dropOperation:te[re||"none"]};i.options.onDragEnd(l)}$(!1),ee(j.none),xe(void 0)}},[i]);let d=l=>{l.pointerType!=="keyboard"&&l.pointerType!=="virtual"||m(l.target)},m=l=>{if(typeof i.options.onDragStart=="function"){let v=l.getBoundingClientRect();i.options.onDragStart({type:"dragstart",x:v.x+v.width/2,y:v.y+v.height/2})}kt({element:l,items:i.options.getItems(),allowedDropOperations:typeof i.options.getAllowedDropOperations=="function"?i.options.getAllowedDropOperations():["move","copy","link"],onDragEnd(v){$(!1),typeof i.options.onDragEnd=="function"&&i.options.onDragEnd(v)}},e),$(!0)},f=Fe(),c=a?ke[f].end:ke[f].start,g=He(e.format(c)),P={};return t||(P={...g,onPointerDown(l){if(k.current=Ze(l.nativeEvent)?"virtual":l.pointerType,l.width<1&&l.height<1)k.current="virtual";else{let v=l.currentTarget.getBoundingClientRect(),D=l.clientX-v.x,K=l.clientY-v.y,I=v.width/2,E=v.height/2;Math.abs(D-I)<=.5&&Math.abs(K-E)<=.5?k.current="virtual":k.current=l.pointerType}},onKeyDownCapture(l){l.target===l.currentTarget&&l.key==="Enter"&&(l.preventDefault(),l.stopPropagation())},onKeyUpCapture(l){l.target===l.currentTarget&&l.key==="Enter"&&(l.preventDefault(),l.stopPropagation(),m(l.target))},onClick(l){(Je(l.nativeEvent)||k.current==="virtual")&&(l.preventDefault(),l.stopPropagation(),m(l.target))}}),n?{dragProps:{draggable:"false"},dragButtonProps:{},isDragging:!1}:{dragProps:{...P,draggable:"true",onDragStart:s,onDrag:y,onDragEnd:p},dragButtonProps:{...g,onPress:d},isDragging:a}}const Z=20;function qt(o){let t=w.useRef(null),n=w.useRef(!0),e=w.useRef(!0);w.useEffect(()=>{if(o.current){t.current=Ct(o.current)?o.current:z(o.current);let a=window.getComputedStyle(t.current);n.current=/(auto|scroll)/.test(a.overflowX),e.current=/(auto|scroll)/.test(a.overflowY)}},[o]);let i=w.useRef({timer:void 0,dx:0,dy:0}).current;w.useEffect(()=>()=>{i.timer&&(cancelAnimationFrame(i.timer),i.timer=void 0)},[i]);let r=w.useCallback(()=>{n.current&&t.current&&(t.current.scrollLeft+=i.dx),e.current&&t.current&&(t.current.scrollTop+=i.dy),i.timer&&(i.timer=requestAnimationFrame(r))},[t,i]);return{move(a,u){if(!Bt()||Ft()||!t.current)return;let $=t.current.getBoundingClientRect(),h=Z,b=Z,k=$.height-Z,s=$.width-Z;a<h||a>s||u<b||u>k?(a<h?i.dx=a-h:a>s&&(i.dx=a-s),u<b?i.dy=u-b:u>k&&(i.dy=u-k),i.timer||(i.timer=requestAnimationFrame(r))):this.stop()},stop(){i.timer&&(cancelAnimationFrame(i.timer),i.timer=void 0)}}}const Pe=["before","on","after"],we=["after","on","before"];function zt(o,t,n){let e=w.useRef({props:o,state:t,nextTarget:null,dropOperation:null}).current;e.props=o,e.state=t;let i=w.useCallback(async s=>{let{onInsert:y,onRootDrop:p,onItemDrop:d,onReorder:m,acceptedDragTypes:f="all",shouldAcceptItemDrop:c}=e.props,{draggingKeys:g}=V,P=N(n),{target:l,dropOperation:v,items:D}=s,K=D;(f!=="all"||c)&&(K=D.filter(I=>{let E;return I.kind==="directory"?E=new Set([It]):E=I.kind==="file"?new Set([I.type]):I.types,f==="all"||f.some(x=>E.has(x))?l.type==="item"&&l.dropPosition==="on"&&c?c(l,E):!0:!1})),K.length>0&&(l.type==="root"&&p&&await p({items:K,dropOperation:v}),l.type==="item"&&(l.dropPosition==="on"&&d&&await d({items:K,dropOperation:v,isInternal:P,target:l}),l.dropPosition!=="on"&&(!P&&y&&await y({items:K,dropOperation:v,target:l}),P&&m&&await m({keys:g,dropOperation:v,target:l}))))},[e,n]),r=qt(n),{dropProps:a}=Pt({ref:n,onDropEnter(){e.nextTarget!=null&&t.setTarget(e.nextTarget)},onDropMove(s){e.nextTarget!=null&&t.setTarget(e.nextTarget),r.move(s.x,s.y)},getDropOperationForPoint(s,y,p,d){let{draggingKeys:m,dropCollectionRef:f}=V,c=N(n),g=l=>t.getDropOperation({target:l,types:s,allowedOperations:y,isInternal:c,draggingKeys:m})!=="cancel",P=o.dropTargetDelegate.getDropTargetFromPoint(p,d,g);if(!P)return e.dropOperation="cancel",e.nextTarget=null,"cancel";if(e.dropOperation=t.getDropOperation({target:P,types:s,allowedOperations:y,isInternal:c,draggingKeys:m}),e.dropOperation==="cancel"){let l={type:"root"},v=t.getDropOperation({target:l,types:s,allowedOperations:y,isInternal:c,draggingKeys:m});v!=="cancel"&&(P=l,e.dropOperation=v)}return P&&e.dropOperation!=="cancel"&&(n==null?void 0:n.current)!==(f==null?void 0:f.current)&&U(n),e.nextTarget=e.dropOperation==="cancel"?null:P,e.dropOperation},onDropExit(){U(void 0),t.setTarget(null),r.stop()},onDropActivate(s){var y,p;((y=t.target)===null||y===void 0?void 0:y.type)==="item"&&((p=t.target)===null||p===void 0?void 0:p.dropPosition)==="on"&&typeof o.onDropActivate=="function"&&o.onDropActivate({type:"dropactivate",x:s.x,y:s.y,target:t.target})},onDrop(s){U(n),t.target&&h(s,t.target);let{draggingCollectionRef:y}=V;y==null&&Ve()}}),u=w.useRef(null),$=w.useCallback(()=>{let{state:s}=e;if(u.current){var y;let{target:m,collection:f,selectedKeys:c,focusedKey:g,isInternal:P,draggingKeys:l}=u.current;if(s.collection.size>f.size&&s.selectionManager.isSelectionEqual(c)){let v=new Set;for(let D of s.collection.getKeys())f.getItem(D)||v.add(D);if(s.selectionManager.setSelectedKeys(v),s.selectionManager.focusedKey===g){let D=v.keys().next().value,K=s.collection.getItem(D);(K==null?void 0:K.type)==="cell"&&(D=K.parentKey),s.selectionManager.setFocusedKey(D),s.selectionManager.selectionMode==="none"&&Y("keyboard")}}else if(g!=null&&s.selectionManager.focusedKey===g&&P&&m.type==="item"&&m.dropPosition!=="on"&&l.has((y=s.collection.getItem(g))===null||y===void 0?void 0:y.parentKey)){var p,d;s.selectionManager.setFocusedKey((d=(p=s.collection.getItem(g))===null||p===void 0?void 0:p.parentKey)!==null&&d!==void 0?d:null),Y("keyboard")}else s.selectionManager.focusedKey===g&&m.type==="item"&&m.dropPosition==="on"&&s.collection.getItem(m.key)!=null?(s.selectionManager.setFocusedKey(m.key),Y("keyboard")):s.selectionManager.focusedKey!=null&&!s.selectionManager.isSelected(s.selectionManager.focusedKey)&&Y("keyboard");s.selectionManager.setFocused(!0)}},[e]),h=w.useCallback((s,y)=>{let{state:p}=e;u.current={timeout:void 0,focusedKey:p.selectionManager.focusedKey,collection:p.collection,selectedKeys:p.selectionManager.selectedKeys,draggingKeys:V.draggingKeys,isInternal:N(n),target:y},(e.props.onDrop||i)({type:"drop",x:s.x,y:s.y,target:y,items:s.items,dropOperation:s.dropOperation}),u.current.timeout=setTimeout(()=>{$(),u.current=null},50)},[e,i,n,$]);w.useEffect(()=>()=>{u.current&&clearTimeout(u.current.timeout)},[]),Te(()=>{u.current&&t.collection!==u.current.collection&&$()});let{direction:b}=ge();w.useEffect(()=>{if(!n.current)return;let s=(d,m=!0,f=!1)=>{var c,g,P,l;if(!d)return{type:"root"};let{keyboardDelegate:v}=e.props,D;(d==null?void 0:d.type)==="item"?D=f?(c=v.getKeyRightOf)===null||c===void 0?void 0:c.call(v,d.key):(g=v.getKeyBelow)===null||g===void 0?void 0:g.call(v,d.key):D=f&&b==="rtl"?(P=v.getLastKey)===null||P===void 0?void 0:P.call(v):(l=v.getFirstKey)===null||l===void 0?void 0:l.call(v);let K=f&&b==="rtl"?we:Pe,I=K[0];if(d.type==="item"){let E=f&&b==="rtl"?e.state.collection.getKeyBefore(d.key):e.state.collection.getKeyAfter(d.key);if(D==null||D===E){let x=K.indexOf(d.dropPosition),O=K[x+1];if(x<K.length-1&&!(O===K[2]&&D!=null))return{type:"item",key:d.key,dropPosition:O};d.dropPosition===K[2]&&(I="on")}else I=d.dropPosition}return D==null?m?{type:"root"}:null:{type:"item",key:D,dropPosition:I}},y=(d,m=!0,f=!1)=>{var c,g,P,l;let{keyboardDelegate:v}=e.props,D;(d==null?void 0:d.type)==="item"?D=f?(c=v.getKeyLeftOf)===null||c===void 0?void 0:c.call(v,d.key):(g=v.getKeyAbove)===null||g===void 0?void 0:g.call(v,d.key):D=f&&b==="rtl"?(P=v.getFirstKey)===null||P===void 0?void 0:P.call(v):(l=v.getLastKey)===null||l===void 0?void 0:l.call(v);let K=f&&b==="rtl"?we:Pe,I=!d||d.type==="root"?K[2]:"on";if((d==null?void 0:d.type)==="item"){let E=f&&b==="rtl"?e.state.collection.getKeyAfter(d.key):e.state.collection.getKeyBefore(d.key);if(D==null||D===E){let x=K.indexOf(d.dropPosition),O=K[x-1];if(x>0&&O!==K[2])return{type:"item",key:d.key,dropPosition:O};d.dropPosition===K[0]&&(I="on")}else I=d.dropPosition}return D==null?m?{type:"root"}:null:{type:"item",key:D,dropPosition:I}},p=(d,m,f,c,g=!0)=>{let P=0,l,{draggingKeys:v}=V,D=N(n);do{let K=c(d,g);if(!K)return null;d=K,l=e.state.getDropOperation({target:K,types:m,allowedOperations:f,isInternal:D,draggingKeys:v}),d.type==="root"&&P++}while(l==="cancel"&&!e.state.isDropTarget(d)&&P<2);return l==="cancel"?null:d};return wt({element:n.current,preventFocusOnDrop:!0,getDropOperation(d,m){if(e.state.target){let{draggingKeys:c}=V,g=N(n);return e.state.getDropOperation({target:e.state.target,types:d,allowedOperations:m,isInternal:g,draggingKeys:c})}return p(null,d,m,s)?"move":"cancel"},onDropEnter(d,m){let f=de(m.items),c=e.state.selectionManager,g=null;U(n);let P=c.focusedKey,l="after",v=P!=null?e.state.collection.getItem(P):null;if((v==null?void 0:v.type)==="cell"&&(P=v.parentKey),P!=null&&c.isSelected(P)&&(c.selectedKeys.size>1&&c.firstSelectedKey===P?l="before":P=c.lastSelectedKey),P!=null){g={type:"item",key:P,dropPosition:l};let{draggingKeys:K}=V,I=N(n);var D;e.state.getDropOperation({target:g,types:f,allowedOperations:m.allowedDropOperations,isInternal:I,draggingKeys:K})==="cancel"&&(g=(D=p(g,f,m.allowedDropOperations,s,!1))!==null&&D!==void 0?D:p(g,f,m.allowedDropOperations,y,!1))}g||(g=p(null,f,m.allowedDropOperations,s)),e.state.setTarget(g)},onDropExit(){U(void 0),e.state.setTarget(null)},onDropTargetEnter(d){e.state.setTarget(d)},onDropActivate(d){var m,f;((m=e.state.target)===null||m===void 0?void 0:m.type)==="item"&&((f=e.state.target)===null||f===void 0?void 0:f.dropPosition)==="on"&&typeof e.props.onDropActivate=="function"&&e.props.onDropActivate({type:"dropactivate",x:d.x,y:d.y,target:e.state.target})},onDrop(d,m){U(n),e.state.target&&h(d,m||e.state.target)},onKeyDown(d,m){let{keyboardDelegate:f}=e.props,c=de(m.items);switch(d.key){case"ArrowDown":if(f.getKeyBelow){let x=p(e.state.target,c,m.allowedDropOperations,s);e.state.setTarget(x)}break;case"ArrowUp":if(f.getKeyAbove){let x=p(e.state.target,c,m.allowedDropOperations,y);e.state.setTarget(x)}break;case"ArrowLeft":if(f.getKeyLeftOf){let x=p(e.state.target,c,m.allowedDropOperations,(O,T)=>y(O,T,!0));e.state.setTarget(x)}break;case"ArrowRight":if(f.getKeyRightOf){let x=p(e.state.target,c,m.allowedDropOperations,(O,T)=>s(O,T,!0));e.state.setTarget(x)}break;case"Home":if(f.getFirstKey){let x=p(null,c,m.allowedDropOperations,s);e.state.setTarget(x)}break;case"End":if(f.getLastKey){let x=p(null,c,m.allowedDropOperations,y);e.state.setTarget(x)}break;case"PageDown":if(f.getKeyPageBelow){let x=e.state.target;if(!x)x=p(null,c,m.allowedDropOperations,s);else{var g,P;let O=(g=f.getFirstKey)===null||g===void 0?void 0:g.call(f);x.type==="item"&&(O=x.key);let T=null;O!=null&&(T=f.getKeyPageBelow(O));let B=x.type==="item"?x.dropPosition:"after";if(T==null||x.type==="item"&&x.key===((P=f.getLastKey)===null||P===void 0?void 0:P.call(f))){var l,v;T=(v=(l=f.getLastKey)===null||l===void 0?void 0:l.call(f))!==null&&v!==void 0?v:null,B="after"}if(T==null)break;x={type:"item",key:T,dropPosition:B};let{draggingCollectionRef:C,draggingKeys:S}=V,M=(C==null?void 0:C.current)===(n==null?void 0:n.current),L=e.state.getDropOperation({target:x,types:c,allowedOperations:m.allowedDropOperations,isInternal:M,draggingKeys:S});var D;L==="cancel"&&(x=(D=p(x,c,m.allowedDropOperations,s,!1))!==null&&D!==void 0?D:p(x,c,m.allowedDropOperations,y,!1))}e.state.setTarget(x??e.state.target)}break;case"PageUp":{if(!f.getKeyPageAbove)break;let x=e.state.target;if(!x)x=p(null,c,m.allowedDropOperations,y);else if(x.type==="item"){var K;if(x.key===((K=f.getFirstKey)===null||K===void 0?void 0:K.call(f)))x={type:"root"};else{let C=f.getKeyPageAbove(x.key),S=x.dropPosition;if(C==null){var I;C=(I=f.getFirstKey)===null||I===void 0?void 0:I.call(f),S="before"}if(C==null)break;x={type:"item",key:C,dropPosition:S}}let{draggingKeys:O}=V,T=N(n),B=e.state.getDropOperation({target:x,types:c,allowedOperations:m.allowedDropOperations,isInternal:T,draggingKeys:O});var E;B==="cancel"&&(x=(E=p(x,c,m.allowedDropOperations,y,!1))!==null&&E!==void 0?E:p(x,c,m.allowedDropOperations,s,!1))}e.state.setTarget(x??e.state.target);break}}}})},[e,n,h,b]);let k=ue();return Kt.set(t,{id:k,ref:n}),{collectionProps:W(a,{id:k,"aria-describedby":null})}}function Ne(o,t,n){let{dropProps:e}=St(),i=Et(t);w.useEffect(()=>{if(n.current)return Rt({element:n.current,target:o.target,getDropOperation(b,k){let{draggingKeys:s}=V,y=N(i);return t.getDropOperation({target:o.target,types:b,allowedOperations:k,isInternal:y,draggingKeys:s})}})},[n,o.target,t,i]);let r=Le(),{draggingKeys:a}=V,u=N(i),$=r&&t.getDropOperation({target:o.target,types:de(r.dragTarget.items),allowedOperations:r.dragTarget.allowedDropOperations,isInternal:u,draggingKeys:a})!=="cancel",h=t.isDropTarget(o.target);return w.useEffect(()=>{r&&h&&n.current&&n.current.focus()},[h,r,n]),{dropProps:{...e,"aria-hidden":!r||$?void 0:"true"},isDropTarget:h}}function Gt(o){return o&&o.__esModule?o.default:o}function jt(o,t,n){let{target:e}=o,{collection:i}=t,r=be(Gt(me),"@react-aria/dnd"),a=Le(),{dropProps:u}=Ne(o,t,n),$=ue(),h=p=>{var d,m,f,c;return p==null?"":(c=(f=(d=i.getTextValue)===null||d===void 0?void 0:d.call(i,p))!==null&&f!==void 0?f:(m=i.getItem(p))===null||m===void 0?void 0:m.textValue)!==null&&c!==void 0?c:""},b="",k;if(e.type==="root")b=r.format("dropOnRoot"),k=`${$} ${Ot(t)}`;else if(e.dropPosition==="on")b=r.format("dropOnItem",{itemText:h(e.key)});else{let p,d;i.getFirstKey()===e.key&&e.dropPosition==="before"?p=null:p=e.dropPosition==="before"?i.getKeyBefore(e.key):e.key,i.getLastKey()===e.key&&e.dropPosition==="after"?d=null:d=e.dropPosition==="after"?i.getKeyAfter(e.key):e.key,p&&d?b=r.format("insertBetween",{beforeItemText:h(p),afterItemText:h(d)}):p?b=r.format("insertAfter",{itemText:h(p)}):d&&(b=r.format("insertBefore",{itemText:h(d)}))}let s=t.isDropTarget(e),y=a?u["aria-hidden"]:"true";return{dropIndicatorProps:{...u,id:$,"aria-roledescription":r.format("dropIndicator"),"aria-label":b,"aria-labelledby":k,"aria-hidden":y,tabIndex:-1},isDropTarget:s,isHidden:!s&&!!y}}function Ut(o){return o&&o.__esModule?o.default:o}const Wt={keyboard:{selected:"dragSelectedKeyboard",notSelected:"dragDescriptionKeyboard"},touch:{selected:"dragSelectedLongPress",notSelected:"dragDescriptionLongPress"},virtual:{selected:"dragDescriptionVirtual",notSelected:"dragDescriptionVirtual"}};function Xt(o,t){let n=be(Ut(me),"@react-aria/dnd"),e=t.isDisabled||t.selectionManager.isDisabled(o.key),{dragProps:i,dragButtonProps:r}=Nt({getItems(){return t.getItems(o.key)},preview:t.preview,getAllowedDropOperations:t.getAllowedDropOperations,hasDragButton:o.hasDragButton,onDragStart(f){t.startDrag(o.key,f),At(t.draggingKeys)},onDragMove(f){t.moveDrag(f)},onDragEnd(f){let{dropOperation:c}=f,g=c==="cancel"?!1:N();t.endDrag({...f,keys:t.draggingKeys,isInternal:g}),Ve()}}),a=t.collection.getItem(o.key),u=t.getKeysForDrag(o.key).size,$=u>1&&t.selectionManager.isSelected(o.key),h,b,k=Fe();if(!o.hasDragButton&&t.selectionManager.selectionMode!=="none"){let f=Wt[k][$?"selected":"notSelected"];o.hasAction&&k==="keyboard"&&(f+="Alt"),$?b=n.format(f,{count:u}):b=n.format(f),delete i.onClick}else if($)h=n.format("dragSelectedItems",{count:u});else{var s,y,p,d;let f=(d=(p=(s=(y=t.collection).getTextValue)===null||s===void 0?void 0:s.call(y,o.key))!==null&&p!==void 0?p:a==null?void 0:a.textValue)!==null&&d!==void 0?d:"";h=n.format("dragItem",{itemText:f})}let m=He(b);if(b&&Object.assign(i,m),!o.hasDragButton&&o.hasAction){let{onKeyDownCapture:f,onKeyUpCapture:c}=i;k==="touch"&&delete i["aria-describedby"],i.onKeyDownCapture=g=>{g.altKey&&(f==null||f(g))},i.onKeyUpCapture=g=>{g.altKey&&(c==null||c(g))}}return{dragProps:e?{}:i,dragButtonProps:{...r,isDisabled:e,"aria-label":h}}}function Yt(o,t,n){let{draggingCollectionRef:e}=V;t.draggingKeys.size>0&&(e==null?void 0:e.current)!==n.current&&Tt(n)}function Zt(o,t){let n=o.children,[e,i]=w.useState(null),r=w.useRef(null),a=w.useRef(void 0);return w.useImperativeHandle(t,()=>(u,$)=>{Lt.flushSync(()=>{i(n(u))}),$(r.current),a.current=requestAnimationFrame(()=>{i(null)})},[n]),w.useEffect(()=>()=>{a.current&&cancelAnimationFrame(a.current)},[]),e?R.createElement("div",{style:{zIndex:-100,position:"absolute",top:0,left:-1e5},ref:r},e):null}let Jt=R.forwardRef(Zt);class Qt{getPrimaryStart(t){return this.orientation==="horizontal"?t.left:t.top}getPrimaryEnd(t){return this.orientation==="horizontal"?t.right:t.bottom}getSecondaryStart(t){return this.orientation==="horizontal"?t.top:t.left}getSecondaryEnd(t){return this.orientation==="horizontal"?t.bottom:t.right}getFlowStart(t){return this.layout==="stack"?this.getPrimaryStart(t):this.getSecondaryStart(t)}getFlowEnd(t){return this.layout==="stack"?this.getPrimaryEnd(t):this.getSecondaryEnd(t)}getFlowSize(t){return this.getFlowEnd(t)-this.getFlowStart(t)}getDropTargetFromPoint(t,n,e){if(this.collection[Symbol.iterator]().next().done||!this.ref.current)return{type:"root"};let i=this.ref.current.getBoundingClientRect(),r=this.orientation==="horizontal"?t:n,a=this.orientation==="horizontal"?n:t;r+=this.getPrimaryStart(i),a+=this.getSecondaryStart(i);let u=this.layout==="stack"?r:a,$=this.orientation==="horizontal"&&this.direction==="rtl",h=this.layout==="grid"&&this.orientation==="vertical"&&this.direction==="rtl",b=this.layout==="stack"?$:h,k=this.ref.current.querySelectorAll("[data-key]"),s=new Map;for(let c of k)c instanceof HTMLElement&&c.dataset.key!=null&&s.set(c.dataset.key,c);let y=[...this.collection].filter(c=>c.type==="item"),p=0,d=y.length;for(;p<d;){let c=Math.floor((p+d)/2),g=y[c],P=s.get(String(g.key));if(!P)break;let l=P.getBoundingClientRect(),v=D=>{D?p=c+1:d=c};if(r<this.getPrimaryStart(l))v($);else if(r>this.getPrimaryEnd(l))v(!$);else if(a<this.getSecondaryStart(l))v(h);else if(a>this.getSecondaryEnd(l))v(!h);else{let D={type:"item",key:g.key,dropPosition:"on"};if(e(D))u<=this.getFlowStart(l)+5&&e({...D,dropPosition:"before"})?D.dropPosition=b?"after":"before":u>=this.getFlowEnd(l)-5&&e({...D,dropPosition:"after"})&&(D.dropPosition=b?"before":"after");else{let K=this.getFlowStart(l)+this.getFlowSize(l)/2;u<=K&&e({...D,dropPosition:"before"})?D.dropPosition=b?"after":"before":u>=K&&e({...D,dropPosition:"after"})&&(D.dropPosition=b?"before":"after")}return D}}let m=y[Math.min(p,y.length-1)],f=s.get(String(m.key));return i=f==null?void 0:f.getBoundingClientRect(),i&&(r<this.getPrimaryStart(i)||Math.abs(u-this.getFlowStart(i))<Math.abs(u-this.getFlowEnd(i)))?{type:"item",key:m.key,dropPosition:b?"after":"before"}:{type:"item",key:m.key,dropPosition:b?"before":"after"}}constructor(t,n,e){this.collection=t,this.ref=n,this.layout=(e==null?void 0:e.layout)||"stack",this.orientation=(e==null?void 0:e.orientation)||"vertical",this.direction=(e==null?void 0:e.direction)||"ltr"}}const ve=new WeakMap;function se(o,t){var n;let{id:e}=(n=ve.get(o))!==null&&n!==void 0?n:{};if(!e)throw new Error("Unknown list");return`${e}-${_t(t)}`}function _t(o){return typeof o=="string"?o.replace(/\s*/g,""):""+o}function er(o,t,n){let{isVirtualized:e,keyboardDelegate:i,layoutDelegate:r,onAction:a,linkBehavior:u="action",keyboardNavigationBehavior:$="arrow"}=o;!o["aria-label"]&&!o["aria-labelledby"]&&console.warn("An aria-label or aria-labelledby prop is required for accessibility.");let{listProps:h}=yt({selectionManager:t.selectionManager,collection:t.collection,disabledKeys:t.disabledKeys,ref:n,keyboardDelegate:i,layoutDelegate:r,isVirtualized:e,selectOnFocus:t.selectionManager.selectionBehavior==="replace",shouldFocusWrap:o.shouldFocusWrap,linkBehavior:u}),b=ue(o.id);ve.set(t,{id:b,onAction:a,linkBehavior:u,keyboardNavigationBehavior:$});let k=Ge({selectionManager:t.selectionManager,hasItemActions:!!a}),s=Dt(n,{isDisabled:t.collection.size!==0}),y=pe(o,{labelable:!0}),p=W(y,{role:"grid",id:b,"aria-multiselectable":t.selectionManager.selectionMode==="multiple"?"true":void 0},t.collection.size===0?{tabIndex:s?-1:0}:h,k);return e&&(p["aria-rowcount"]=t.collection.size,p["aria-colcount"]=1),je({},t),{gridProps:p}}const Ke={expand:{ltr:"ArrowRight",rtl:"ArrowLeft"},collapse:{ltr:"ArrowLeft",rtl:"ArrowRight"}};function tr(o,t,n){var e,i;let{node:r,isVirtualized:a,shouldSelectOnPressUp:u}=o,{direction:$}=ge(),{onAction:h,linkBehavior:b,keyboardNavigationBehavior:k}=ve.get(t),s=Qe(),y=w.useRef(null),p=()=>{var S;n.current!==null&&(y.current!=null&&r.key!==y.current||!(!((S=n.current)===null||S===void 0)&&S.contains(document.activeElement)))&&q(n.current)},d={},m,f=t.selectionManager.isLink(r.key);if(r!=null&&"expandedKeys"in t){var c,g,P;let S=(c=(g=t.collection).getChildren)===null||c===void 0?void 0:c.call(g,r.key);m=[...S??[]].length>1,h==null&&!f&&t.selectionManager.selectionMode==="none"&&m&&(h=()=>t.toggleKey(r.key));let M=m?t.expandedKeys.has(r.key):void 0,L=1;var l;if(r.level>0&&(r==null?void 0:r.parentKey)!=null){let A=t.collection.getItem(r.parentKey);if(A){var v,D;let F=(v=(D=t.collection).getChildren)===null||v===void 0?void 0:v.call(D,A.key);L=dt(F).index+1}}else L=((l=(P=[...t.collection].filter(A=>A.level===0).at(-1))===null||P===void 0?void 0:P.index)!==null&&l!==void 0?l:0)+1;d={"aria-expanded":M,"aria-level":r.level+1,"aria-posinset":(r==null?void 0:r.index)+1,"aria-setsize":L}}let{itemProps:K,...I}=st({selectionManager:t.selectionManager,key:r.key,ref:n,isVirtualized:a,shouldSelectOnPressUp:u,onAction:h||!((e=r.props)===null||e===void 0)&&e.onAction?_e((i=r.props)===null||i===void 0?void 0:i.onAction,h?()=>h(r.key):void 0):void 0,focus:p,linkBehavior:b}),E=S=>{if(!S.currentTarget.contains(S.target)||!n.current||!document.activeElement)return;let M=he(n.current);if(M.currentNode=document.activeElement,"expandedKeys"in t&&document.activeElement===n.current){if(S.key===Ke.expand[$]&&t.selectionManager.focusedKey===r.key&&m&&!t.expandedKeys.has(r.key)){t.toggleKey(r.key),S.stopPropagation();return}else if(S.key===Ke.collapse[$]&&t.selectionManager.focusedKey===r.key&&m&&t.expandedKeys.has(r.key)){t.toggleKey(r.key),S.stopPropagation();return}}switch(S.key){case"ArrowLeft":if(k==="arrow"){let A=$==="rtl"?M.nextNode():M.previousNode();if(A)S.preventDefault(),S.stopPropagation(),q(A),G(A,{containingElement:z(n.current)});else if(S.preventDefault(),S.stopPropagation(),$==="rtl")q(n.current),G(n.current,{containingElement:z(n.current)});else{M.currentNode=n.current;let F=Ie(M);F&&(q(F),G(F,{containingElement:z(n.current)}))}}break;case"ArrowRight":if(k==="arrow"){let A=$==="rtl"?M.previousNode():M.nextNode();if(A)S.preventDefault(),S.stopPropagation(),q(A),G(A,{containingElement:z(n.current)});else if(S.preventDefault(),S.stopPropagation(),$==="ltr")q(n.current),G(n.current,{containingElement:z(n.current)});else{M.currentNode=n.current;let F=Ie(M);F&&(q(F),G(F,{containingElement:z(n.current)}))}}break;case"ArrowUp":case"ArrowDown":if(!S.altKey&&n.current.contains(S.target)){var L;S.stopPropagation(),S.preventDefault(),(L=n.current.parentElement)===null||L===void 0||L.dispatchEvent(new KeyboardEvent(S.nativeEvent.type,S.nativeEvent))}break;case"Tab":if(k==="tab"){let A=he(n.current,{tabbable:!0});A.currentNode=document.activeElement,(S.shiftKey?A.previousNode():A.nextNode())&&S.stopPropagation()}}},x=S=>{if(y.current=r.key,S.target!==n.current){et()||t.selectionManager.setFocusedKey(r.key);return}},O=vt(r.props),T=I.hasAction?O:{},B=W(K,T,{role:"row",onKeyDownCapture:E,onFocus:x,"aria-label":r.textValue||void 0,"aria-selected":t.selectionManager.canSelectItem(r.key)?t.selectionManager.isSelected(r.key):void 0,"aria-disabled":t.selectionManager.isDisabled(r.key)||void 0,"aria-labelledby":s&&r.textValue?`${se(t,r.key)} ${s}`:void 0,id:se(t,r.key)});a&&(B["aria-rowindex"]=r.index+1);let C={role:"gridcell","aria-colindex":1};return{rowProps:{...W(B,d)},gridCellProps:C,descriptionProps:{id:s},...I}}function Ie(o){let t=null,n=null;do n=o.lastChild(),n&&(t=n);while(n);return t}function rr(o,t){let{key:n}=o;const{checkboxProps:e}=Ue(o,t);return{checkboxProps:{...e,"aria-labelledby":`${e.id} ${se(t,n)}`}}}function or(o){let{getItems:t,isDisabled:n,collection:e,selectionManager:i,onDragStart:r,onDragMove:a,onDragEnd:u,preview:$,getAllowedDropOperations:h}=o,[,b]=w.useState(!1),k=w.useRef(new Set),s=w.useRef(null),y=p=>{let d=new Set(i.isSelected(p)?new Set([...i.selectedKeys].filter(m=>!!e.getItem(m))):[]);return d.add(p),d};return{collection:e,selectionManager:i,get draggedKey(){return s.current},get draggingKeys(){return k.current},isDragging(p){return k.current.has(p)},getKeysForDrag:y,getItems(p){return t(y(p))},isDisabled:n,preview:$,getAllowedDropOperations:h,startDrag(p,d){let m=y(p);k.current=m,s.current=p,i.setFocused(!1),b(!0),typeof r=="function"&&r({...d,keys:m})},moveDrag(p){typeof a=="function"&&a({...p,keys:k.current})},endDrag(p){let{isInternal:d}=p;typeof u=="function"&&u({...p,keys:k.current,isInternal:d}),k.current=new Set,s.current=null,b(!1)}}}function ir(o){let{acceptedDragTypes:t="all",isDisabled:n,onInsert:e,onRootDrop:i,onItemDrop:r,onReorder:a,shouldAcceptItemDrop:u,collection:$,selectionManager:h,onDropEnter:b,getDropOperation:k,onDrop:s}=o,[y,p]=w.useState(null),d=w.useRef(null),m=c=>{if(c.dropPosition==="before"){let g=$.getKeyBefore(c.key);return g!=null?{type:"item",key:g,dropPosition:"after"}:null}else if(c.dropPosition==="after"){let g=$.getKeyAfter(c.key);return g!=null?{type:"item",key:g,dropPosition:"before"}:null}return null},f=w.useCallback(c=>{let{target:g,types:P,allowedOperations:l,isInternal:v,draggingKeys:D}=c;if(n||!g)return"cancel";if(t==="all"||t.some(K=>P.has(K))){let K=e&&g.type==="item"&&!v&&(g.dropPosition==="before"||g.dropPosition==="after"),I=a&&g.type==="item"&&v&&(g.dropPosition==="before"||g.dropPosition==="after"),E=i&&g.type==="root"&&!v,x=r&&g.type==="item"&&g.dropPosition==="on"&&!(v&&g.key!=null&&D.has(g.key))&&(!u||u(g,P));if(s||K||I||E||x)return k?k(g,P,l):l[0]}return"cancel"},[n,t,k,e,i,r,u,a,s]);return{collection:$,selectionManager:h,isDisabled:n,target:y,setTarget(c){if(this.isDropTarget(c))return;let g=d.current;g&&typeof o.onDropExit=="function"&&o.onDropExit({type:"dropexit",x:0,y:0,target:g}),c&&typeof b=="function"&&b({type:"dropenter",x:0,y:0,target:c}),d.current=c??null,p(c??null)},isDropTarget(c){let g=d.current;return!g||!c?!1:oe(c,g)?!0:(c==null?void 0:c.type)==="item"&&(g==null?void 0:g.type)==="item"&&c.key!==g.key&&c.dropPosition!==g.dropPosition&&c.dropPosition!=="on"&&g.dropPosition!=="on"?oe(m(c),g)||oe(c,m(g)):!1},getDropOperation(c){return f(c)}}}function oe(o,t){if(!o)return!t;switch(o.type){case"root":return(t==null?void 0:t.type)==="root";case"item":return(t==null?void 0:t.type)==="item"&&(t==null?void 0:t.key)===o.key&&(t==null?void 0:t.dropPosition)===o.dropPosition}}function nr(o){let{initialItems:t=[],initialSelectedKeys:n,getKey:e=h=>{var b;return(b=h.id)!==null&&b!==void 0?b:h.key},filter:i,initialFilterText:r=""}=o,[a,u]=w.useState({items:t,selectedKeys:n==="all"?"all":new Set(n||[]),filterText:r}),$=w.useMemo(()=>i?a.items.filter(h=>i(h,a.filterText)):a.items,[a.items,a.filterText,i]);return{...a,items:$,...lr({getKey:e},u),getItem(h){return a.items.find(b=>e(b)===h)}}}function lr(o,t){let{cursor:n,getKey:e}=o;return{setSelectedKeys(i){t(r=>({...r,selectedKeys:i}))},setFilterText(i){t(r=>({...r,filterText:i}))},insert(i,...r){t(a=>X(a,i,...r))},insertBefore(i,...r){t(a=>{let u=a.items.findIndex($=>(e==null?void 0:e($))===i);if(u===-1)if(a.items.length===0)u=0;else return a;return X(a,u,...r)})},insertAfter(i,...r){t(a=>{let u=a.items.findIndex($=>(e==null?void 0:e($))===i);if(u===-1)if(a.items.length===0)u=0;else return a;return X(a,u+1,...r)})},prepend(...i){t(r=>X(r,0,...i))},append(...i){t(r=>X(r,r.items.length,...i))},remove(...i){t(r=>{let a=new Set(i),u=r.items.filter(h=>!a.has(e(h))),$="all";if(r.selectedKeys!=="all"){$=new Set(r.selectedKeys);for(let h of i)$.delete(h)}return n==null&&u.length===0&&($=new Set),{...r,items:u,selectedKeys:$}})},removeSelectedItems(){t(i=>{if(i.selectedKeys==="all")return{...i,items:[],selectedKeys:new Set};let r=i.selectedKeys,a=i.items.filter(u=>!r.has(e(u)));return{...i,items:a,selectedKeys:new Set}})},move(i,r){t(a=>{let u=a.items.findIndex(b=>e(b)===i);if(u===-1)return a;let $=a.items.slice(),[h]=$.splice(u,1);return $.splice(r,0,h),{...a,items:$}})},moveBefore(i,r){t(a=>{let u=a.items.findIndex(b=>e(b)===i);if(u===-1)return a;let h=(Array.isArray(r)?r:[...r]).map(b=>a.items.findIndex(k=>e(k)===b)).sort((b,k)=>b-k);return Se(a,h,u)})},moveAfter(i,r){t(a=>{let u=a.items.findIndex(b=>e(b)===i);if(u===-1)return a;let h=(Array.isArray(r)?r:[...r]).map(b=>a.items.findIndex(k=>e(k)===b)).sort((b,k)=>b-k);return Se(a,h,u+1)})},update(i,r){t(a=>{let u=a.items.findIndex($=>e($)===i);return u===-1?a:{...a,items:[...a.items.slice(0,u),r,...a.items.slice(u+1)]}})}}}function X(o,t,...n){return{...o,items:[...o.items.slice(0,t),...n,...o.items.slice(t)]}}function Se(o,t,n){n-=t.filter(r=>r<n).length;let e=t.map(r=>({from:r,to:n++}));for(let r=0;r<e.length;r++){let a=e[r].from;for(let u=r;u<e.length;u++)e[u].from>a&&e[u].from--}for(let r=0;r<e.length;r++){let a=e[r];for(let u=e.length-1;u>r;u--){let $=e[u];$.from<a.to?a.to++:$.from++}}let i=o.items.slice();for(let r of e){let[a]=i.splice(r.from,1);i.splice(r.to,0,a)}return{...o,items:i}}const ar=w.createContext(null);function dr(o,t){return[o,t]=rt(o,t,ar),R.createElement(lt,{content:R.createElement(at,o)},n=>R.createElement(sr,{props:o,collection:n,gridListRef:t}))}function sr({props:o,collection:t,gridListRef:n}){let{dragAndDropHooks:e,keyboardNavigationBehavior:i="arrow",layout:r="stack"}=o,{CollectionRoot:a,isVirtualized:u,layoutDelegate:$,dropTargetDelegate:h}=w.useContext(le),b=mt({...o,collection:t,children:void 0,layoutDelegate:$}),k=ct({usage:"search",sensitivity:"base"}),{disabledBehavior:s,disabledKeys:y}=b.selectionManager,{direction:p}=ge(),d=w.useMemo(()=>new De({collection:t,collator:k,ref:n,disabledKeys:y,disabledBehavior:s,layoutDelegate:$,layout:r,direction:p}),[t,n,r,y,s,$,k,p]),{gridProps:m}=er({...o,keyboardDelegate:d,keyboardNavigationBehavior:r==="grid"?"tab":i,isVirtualized:u},b,n),f=b.selectionManager,c=!!(e!=null&&e.useDraggableCollectionState),g=!!(e!=null&&e.useDroppableCollectionState),P=w.useRef(c),l=w.useRef(g);w.useEffect(()=>{P.current!==c&&console.warn("Drag hooks were provided during one render, but not another. This should be avoided as it may produce unexpected behavior."),l.current!==g&&console.warn("Drop hooks were provided during one render, but not another. This should be avoided as it may produce unexpected behavior.")},[c,g]);let v,D,K,I=!1,E=null,x=w.useRef(null);if(c&&e){v=e.useDraggableCollectionState({collection:t,selectionManager:f,preview:e.renderDragPreview?x:void 0}),e.useDraggableCollection({},v,n);let A=e.DragPreview;E=e.renderDragPreview?R.createElement(A,{ref:x},e.renderDragPreview):null}if(g&&e){D=e.useDroppableCollectionState({collection:t,selectionManager:f});let A=new De({collection:t,disabledKeys:f.disabledKeys,disabledBehavior:f.disabledBehavior,ref:n}),F=e.dropTargetDelegate||h||new e.ListDropTargetDelegate(t,n,{layout:r,direction:p});K=e.useDroppableCollection({keyboardDelegate:A,dropTargetDelegate:F},D,n),I=D.isDropTarget({type:"root"})}let{focusProps:O,isFocused:T,isFocusVisible:B}=Ce(),C={isDropTarget:I,isEmpty:b.collection.size===0,isFocused:T,isFocusVisible:B,layout:r,state:b},S=fe({className:o.className,style:o.style,defaultClassName:"react-aria-GridList",values:C}),M=null,L=null;if(b.collection.size===0&&o.renderEmptyState){let A=o.renderEmptyState(C);M=R.createElement("div",{role:"row",style:{display:"contents"}},R.createElement("div",{role:"gridcell",style:{display:"contents"}},A))}return R.createElement($t,null,R.createElement("div",{...pe(o),...S,...W(m,O,K==null?void 0:K.collectionProps,L),ref:n,slot:o.slot||void 0,onScroll:o.onScroll,"data-drop-target":I||void 0,"data-empty":b.collection.size===0||void 0,"data-focused":T||void 0,"data-focus-visible":B||void 0,"data-layout":r},R.createElement(Be,{values:[[ae,b],[Q,{dragAndDropHooks:e,dragState:v,dropState:D}],[ut,{render:pr}]]},g&&R.createElement(yr,null),R.createElement(a,{collection:t,scrollRef:n,persistedKeys:pt(f,e,D),renderDropIndicator:ft(e,D)})),M,E))}const cr=w.forwardRef(dr),ur=it("item",function(t,n,e){let i=w.useContext(ae),{dragAndDropHooks:r,dragState:a,dropState:u}=w.useContext(Q),$=Me(n),{isVirtualized:h}=w.useContext(le),{rowProps:b,gridCellProps:k,descriptionProps:s,...y}=tr({node:e,shouldSelectOnPressUp:!!a,isVirtualized:h},i,$),{hoverProps:p,isHovered:d}=tt({isDisabled:!y.allowsSelection&&!y.hasAction,onHoverStart:e.props.onHoverStart,onHoverChange:e.props.onHoverChange,onHoverEnd:e.props.onHoverEnd}),{isFocusVisible:m,focusProps:f}=Ce(),{checkboxProps:c}=rr({key:e.key},i),g=i.selectionManager.disabledBehavior==="all"&&y.isDisabled?{isDisabled:!0}:{},P=null;a&&r&&(P=r.useDraggableItem({key:e.key,hasDragButton:!0},a));let l=null,v=w.useRef(null),{visuallyHiddenProps:D}=ye();u&&r&&(l=r.useDropIndicator({target:{type:"item",key:e.key,dropPosition:"on"}},u,v));let K=a&&a.isDragging(e.key),I=fe({...t,id:void 0,children:e.rendered,defaultClassName:"react-aria-GridListItem",values:{...y,isHovered:d,isFocusVisible:m,selectionMode:i.selectionManager.selectionMode,selectionBehavior:i.selectionManager.selectionBehavior,allowsDragging:!!a,isDragging:K,isDropTarget:l==null?void 0:l.isDropTarget}}),E=w.useRef(null);return w.useEffect(()=>{a&&!E.current&&console.warn('Draggable items in a GridList must contain a <Button slot="drag"> element so that keyboard and screen reader users can drag them.')},[]),w.useEffect(()=>{e.textValue||console.warn("A `textValue` prop is required for <GridListItem> elements with non-plain text children in order to support accessibility features such as type to select.")},[e.textValue]),R.createElement(R.Fragment,null,l&&!l.isHidden&&R.createElement("div",{role:"row",style:{position:"absolute"}},R.createElement("div",{role:"gridcell"},R.createElement("div",{role:"button",...D,...l==null?void 0:l.dropIndicatorProps,ref:v}))),R.createElement("div",{...W(pe(t),b,f,p,P==null?void 0:P.dragProps),...I,ref:$,"data-selected":y.isSelected||void 0,"data-disabled":y.isDisabled||void 0,"data-hovered":d||void 0,"data-focused":y.isFocused||void 0,"data-focus-visible":m||void 0,"data-pressed":y.isPressed||void 0,"data-allows-dragging":!!a||void 0,"data-dragging":K||void 0,"data-drop-target":(l==null?void 0:l.isDropTarget)||void 0,"data-selection-mode":i.selectionManager.selectionMode==="none"?void 0:i.selectionManager.selectionMode},R.createElement("div",{...k,style:{display:"contents"}},R.createElement(Be,{values:[[ot,{slots:{[_]:{},selection:c}}],[Xe,{slots:{[_]:g,drag:{...P==null?void 0:P.dragButtonProps,ref:E,style:{pointerEvents:"none"}}}}],[bt,{slots:{[_]:{},description:s}}],[le,nt],[ae,null]]},I.children))))});function pr(o,t){t=Me(t);let{dragAndDropHooks:n,dropState:e}=w.useContext(Q),i=w.useRef(null),{dropIndicatorProps:r,isHidden:a,isDropTarget:u}=n.useDropIndicator(o,e,i);return a?null:R.createElement(gr,{...o,dropIndicatorProps:r,isDropTarget:u,buttonRef:i,ref:t})}function fr(o,t){let{dropIndicatorProps:n,isDropTarget:e,buttonRef:i,...r}=o,{visuallyHiddenProps:a}=ye(),u=fe({...r,defaultClassName:"react-aria-DropIndicator",values:{isDropTarget:e}});return R.createElement("div",{...u,role:"row",ref:t,"data-drop-target":e||void 0},R.createElement("div",{role:"gridcell"},R.createElement("div",{...a,role:"button",...n,ref:i}),u.children))}const gr=w.forwardRef(fr);function yr(){let{dragAndDropHooks:o,dropState:t}=w.useContext(Q),n=w.useRef(null),{dropIndicatorProps:e}=o.useDropIndicator({target:{type:"root"}},t,n),i=t.isDropTarget({type:"root"}),{visuallyHiddenProps:r}=ye();return!i&&e["aria-hidden"]?null:R.createElement("div",{role:"row","aria-hidden":e["aria-hidden"],style:{position:"absolute"}},R.createElement("div",{role:"gridcell"},R.createElement("div",{role:"button",...r,...e,ref:n})))}function mr(o){return{dragAndDropHooks:w.useMemo(()=>{let{onDrop:n,onInsert:e,onItemDrop:i,onReorder:r,onRootDrop:a,getItems:u,renderDragPreview:$,renderDropIndicator:h,dropTargetDelegate:b}=o,k=!!u,s=!!(n||e||i||r||a),y={};return k&&(y.useDraggableCollectionState=function(d){return or({...d,...o})},y.useDraggableCollection=Yt,y.useDraggableItem=Xt,y.DragPreview=Jt,y.renderDragPreview=$,y.isVirtualDragging=Mt),s&&(y.useDroppableCollectionState=function(d){return ir({...d,...o})},y.useDroppableItem=Ne,y.useDroppableCollection=function(d,m,f){return zt({...d,...o},m,f)},y.useDropIndicator=jt,y.renderDropIndicator=h,y.dropTargetDelegate=b,y.ListDropTargetDelegate=Qt),y},[o])}}const br=({children:o,...t})=>H.jsx(cr,{...t,className:ne(t.className,n=>ie("group flex flex-col gap-1 overflow-auto rounded-sm border border-neutral-200 bg-control p-1 text-foreground outline-none","data-[empty]:p-6 data-[empty]:text-center data-[empty]:text-sm",n)),children:o}),vr=({children:o,className:t,classNames:n,...e})=>{const i=typeof o=="string"?o:void 0;return H.jsx(ur,{textValue:i,className:ne(t,r=>ie("relative flex w-full cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none","data-[disabled]:pointer-events-none data-[disabled]:opacity-50","data-[focus-visible]:z-10 data-[focus-visible]:outline-none data-[focus-visible]:ring-2 data-[focus-visible]:ring-ring data-[focus-visible]:ring-offset-2 data-[focus-visible]:ring-offset-background","data-[hovered]:bg-accent data-[hovered]:text-accent-foreground","data-[selected]:bg-accent data-[selected]:text-accent-foreground","data-[dragging]:opacity-60",$e(n==null?void 0:n.item),r)),...e,children:ne(o,(r,a)=>H.jsxs(H.Fragment,{children:[a.selectionMode==="multiple"&&a.selectionBehavior==="toggle"&&H.jsx(qe,{slot:"selection"}),H.jsx("span",{className:"flex-1",children:r}),a.allowsDragging&&H.jsx(Ye,{slot:"drag",children:H.jsx(We,{className:ie("size-4",$e(n==null?void 0:n.icon))})})]}))})},$r=o=>t=>{if(!t)throw new Error("GridList: no item provided to getKey");return Ae(t,o)},ce=({items:o,idResolver:t,className:n,onOrderChange:e,...i})=>{const r=w.useMemo(()=>$r(t),[t]),a=nr({initialItems:o,getKey:r}),u=w.useRef(a.items),{dragAndDropHooks:$}=mr({getItems:s=>[...s].map(y=>({"text/plain":r(a.getItem(y))})),onReorder:s=>{s.target.dropPosition==="before"?a.moveBefore(s.target.key,s.keys):s.target.dropPosition==="after"&&a.moveAfter(s.target.key,s.keys)},renderDropIndicator:s=>H.jsx(gt,{target:s,className:"outline outline-1 outline-offset-0 outline-primary"})});w.useEffect(()=>{const s=a.items.map(p=>r(p)),y=u.current.map(p=>r(p));if(s.length===y.length){for(let p=0;p<s.length;p++)if(s[p]!==y[p]){e==null||e(s);return}}},[r,a.items,e]);const{children:h,labelResolver:b}=i,k=typeof n=="object"?n:{base:n};return H.jsx(br,{"aria-label":"gridlist",items:a.items,dragAndDropHooks:$,className:k.base,...i,children:s=>{const y=Ae(s,t),p={};let d;return h?d=h(s,p):b?d=ze(s,p,b):d=y,H.jsx(vr,{id:y,classNames:k,children:d})}})};try{ce.displayName="GridList",ce.__docgenInfo={description:"",displayName:"GridList",props:{className:{defaultValue:null,description:"",name:"className",required:!0,type:{name:"string | ClassNameObject"}},onOrderChange:{defaultValue:null,description:"",name:"onOrderChange",required:!1,type:{name:"((items: string[]) => void)"}},children:{defaultValue:null,description:`The contents of the collection.
Function that will be called with an item as the first argument and an object with extra props for the underlying ListBoxItem as the second argument. It must return a ReactNode.`,name:"children",required:!1,type:{name:'((ReactNode | ((item: unknown) => ReactNode)) & ResolverFunctionWithProps<T, ReactNode, Omit<ListBoxItemProps<object>, "value" | "id" | "textValue">>)'}},id:{defaultValue:null,description:"The element's unique identifier. See [MDN](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/id).",name:"id",required:!1,type:{name:"string"}},"aria-label":{defaultValue:null,description:"Defines a string value that labels the current element.",name:"aria-label",required:!1,type:{name:"string"}},"aria-labelledby":{defaultValue:null,description:"Identifies the element (or elements) that labels the current element.",name:"aria-labelledby",required:!1,type:{name:"string"}},"aria-describedby":{defaultValue:null,description:"Identifies the element (or elements) that describes the object.",name:"aria-describedby",required:!1,type:{name:"string"}},"aria-details":{defaultValue:null,description:"Identifies the element (or elements) that provide a detailed, extended description for the object.",name:"aria-details",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"The inline [style](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/style) for the element. A function may be provided to compute the style based on component state.",name:"style",required:!1,type:{name:"CSSProperties | ((values: GridListRenderProps & { defaultStyle: CSSProperties; }) => CSSProperties)"}},slot:{defaultValue:null,description:"A slot name for the component. Slots allow the component to receive props from a parent component.\nAn explicit `null` value indicates that the local props completely override all props received from a parent.",name:"slot",required:!1,type:{name:"string | null"}},onScroll:{defaultValue:null,description:"Handler that is called when a user scrolls. See [MDN](https://developer.mozilla.org/en-US/docs/Web/API/Element/scroll_event).",name:"onScroll",required:!1,type:{name:"((e: UIEvent<HTMLDivElement, UIEvent>) => void)"}},disabledKeys:{defaultValue:null,description:"The item keys that are disabled. These items cannot be selected, focused, or otherwise interacted with.",name:"disabledKeys",required:!1,type:{name:"Iterable<Key>"}},dependencies:{defaultValue:null,description:"Values that should invalidate the item cache when using dynamic collections.",name:"dependencies",required:!1,type:{name:"any[]"}},onAction:{defaultValue:null,description:"Handler that is called when a user performs an action on an item. The exact user event depends on\nthe collection's `selectionBehavior` prop and the interaction modality.",name:"onAction",required:!1,type:{name:"((key: Key) => void)"}},onSelectionChange:{defaultValue:null,description:"Handler that is called when the selection changes.",name:"onSelectionChange",required:!1,type:{name:"((keys: Selection) => void)"}},disallowEmptySelection:{defaultValue:null,description:"Whether the collection allows empty selection.",name:"disallowEmptySelection",required:!1,type:{name:"boolean"}},selectionBehavior:{defaultValue:null,description:"How multiple selection should behave in the collection.",name:"selectionBehavior",required:!1,type:{name:"enum",value:[{value:'"replace"'},{value:'"toggle"'}]}},selectionMode:{defaultValue:null,description:"The type of selection that is allowed in the collection.",name:"selectionMode",required:!1,type:{name:"enum",value:[{value:'"none"'},{value:'"single"'},{value:'"multiple"'}]}},selectedKeys:{defaultValue:null,description:"The currently selected keys in the collection (controlled).",name:"selectedKeys",required:!1,type:{name:'"all" | Iterable<Key>'}},defaultSelectedKeys:{defaultValue:null,description:"The initial selected keys in the collection (uncontrolled).",name:"defaultSelectedKeys",required:!1,type:{name:'"all" | Iterable<Key>'}},dragAndDropHooks:{defaultValue:null,description:"The drag and drop hooks returned by `useDragAndDrop` used to enable drag and drop behavior for the GridList.",name:"dragAndDropHooks",required:!1,type:{name:"DragAndDropHooks"}},renderEmptyState:{defaultValue:null,description:"Provides content to display when there are no items in the list.",name:"renderEmptyState",required:!1,type:{name:"((props: GridListRenderProps) => ReactNode)"}},layout:{defaultValue:{value:"'stack'"},description:"Whether the items are arranged in a stack or grid.",name:"layout",required:!1,type:{name:"enum",value:[{value:'"grid"'},{value:'"stack"'}]}},keyboardNavigationBehavior:{defaultValue:{value:"'arrow'"},description:`Whether keyboard navigation to focusable elements within grid list items is
via the left/right arrow keys or the tab key.`,name:"keyboardNavigationBehavior",required:!1,type:{name:"enum",value:[{value:'"tab"'},{value:'"arrow"'}]}},disabledBehavior:{defaultValue:null,description:"Whether `disabledKeys` applies to all interactions, or only selection.",name:"disabledBehavior",required:!1,type:{name:"enum",value:[{value:'"all"'},{value:'"selection"'}]}},labelResolver:{defaultValue:null,description:`Field to use as the item label, defaults to result of the "itemId" resolution.<br/>
If a function is provided, it will be called with an item as the first argument and an object with extra props for the underlying ListBoxItem as the second argument. It must return a ReactNode.`,name:"labelResolver",required:!1,type:{name:'string | number | symbol | ResolverFunctionWithProps<T, ReactNode, Omit<ListBoxItemProps<object>, "value" | "id" | "textValue">>'}},items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"T[]"}},idResolver:{defaultValue:null,description:`Field to use as the item id, defaults to "id".<br/>
If a function is provided, it will be called with an item as the first argument. It must return a string.`,name:"idResolver",required:!1,type:{name:"string | number | symbol | ResolverFunction<T, string>"}}}}}catch{}const eo={component:ce},J={args:{items:[{id:"1",label:"Item 1"},{id:"2",label:"Item 2"},{id:"3",label:"Item 3"},{id:"4",label:"Item 4"},{id:"5",label:"Item 5"},{id:"6",label:"Item 6"}]}};var Ee,Re,Oe;J.parameters={...J.parameters,docs:{...(Ee=J.parameters)==null?void 0:Ee.docs,source:{originalSource:`{
  args: {
    items: [{
      id: "1",
      label: "Item 1"
    }, {
      id: "2",
      label: "Item 2"
    }, {
      id: "3",
      label: "Item 3"
    }, {
      id: "4",
      label: "Item 4"
    }, {
      id: "5",
      label: "Item 5"
    }, {
      id: "6",
      label: "Item 6"
    }]
  }
}`,...(Oe=(Re=J.parameters)==null?void 0:Re.docs)==null?void 0:Oe.source}}};const to=["Default"];export{J as Default,to as __namedExportsOrder,eo as default};
