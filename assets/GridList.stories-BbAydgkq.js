import{j as H}from"./jsx-runtime-DR9Q75dM.js";import{C as qe}from"./Checkbox-Pukc-Ky5.js";import{c as ne,g as De}from"./index-DbF_LCtC.js";import{$ as ze,a as Ge,b as je,m as Ue}from"./useGridSelectionCheckbox-D6F1e8qC.js";import{r as K,R as A}from"./index-DRjF_FHU.js";import{a as We,$ as Xe}from"./Button-DUand396.js";import{h as Re,C as Ye,D as Ze,s as Y,e as pe,c as W,p as fe,r as Je,A as Qe,o as q,E as _e,b as Me,j as et,k as Ce,l as ge,w as Be,G as ee,i as tt,a as le}from"./useFocusRing-CTUx4aJi.js";import{a as rt}from"./RSPContexts-DYuYEgz3.js";import{c as ot,d as ae,g as it,b as nt,a as lt}from"./Collection-GnXY1aZw.js";import{m as at,e as dt,n as G,i as _,$ as st,a as he,j as ct,k as ut,l as pt,o as ft}from"./DragAndDrop-DdmGpbn0.js";import{e as gt,d as de,f as yt}from"./ListBox-5V49jJM1.js";import{a as bt}from"./Text-CrGTCES4.js";import{d as mt}from"./openLink-Bn3ypVk4.js";import{$ as z}from"./getScrollParent-BL0kfGii.js";import{$ as xe,b as vt}from"./FocusScope-DHH2R_3E.js";import{$ as ye}from"./context-CDvmUKuB.js";import{$ as $t}from"./useHasTabbableChild-DFDNsnfE.js";import{a as be}from"./VisuallyHidden-NzxdHr3p.js";import{c as te,d as j,e as Fe,f as me,$ as Dt,g as ht,h as re,i as oe,j as ke,k as xt,l as N,b as kt,m as L,n as Pt,o as se,p as U,q as wt,r as Kt,s as Le,t as It,u as St,v as Et,w as Ve,x as At,y as Ot,z as Tt,A as Rt}from"./useDrop-B7VJI1nB.js";import{$ as Mt}from"./isScrollable-BSEN4xi5.js";import{b as Ct,e as Bt}from"./platform-SeyP_Zfo.js";import{$ as ve}from"./useLocalizedStringFormatter-B6gzYrDB.js";import{b as Ft}from"./usePress-BJWzjFmP.js";import{$ as He}from"./useDescription-3QDDZ4kR.js";import{r as Lt}from"./index-rX-Bn4lm.js";import"./Check-f6fs0czz.js";import"./Form-DBrwXylw.js";import"./useToggleState-CyYYBHqj.js";import"./useFormReset-D0SLiLjc.js";import"./useFocusable-BlssCjI6.js";import"./useControlledState-uSQY0H5C.js";import"./Hidden-C-5vjR2A.js";import"./useLabels-BRQo3gLb.js";import"./ariaHideOutside-7Z-f0sYi.js";function Vt(o){return o&&o.__esModule?o.default:o}const Pe={keyboard:{start:"dragDescriptionKeyboard",end:"endDragKeyboard"},touch:{start:"dragDescriptionTouch",end:"endDragTouch"},virtual:{start:"dragDescriptionVirtual",end:"endDragVirtual"}};function Ht(o){let{hasDragButton:t,isDisabled:n}=o,e=ve(Vt(me),"@react-aria/dnd"),i=K.useRef({options:o,x:0,y:0}).current;i.options=o;let r=K.useRef(!1),[a,c]=K.useState(!1),u=l=>{r.current=l,c(l)},{addGlobalListener:D,removeAllGlobalListeners:g}=Ft(),P=K.useRef(null),y=l=>{var $;if(l.defaultPrevented)return;if(l.stopPropagation(),P.current==="virtual"){l.preventDefault(),m(l.target),P.current=null;return}typeof o.onDragStart=="function"&&o.onDragStart({type:"dragstart",x:l.clientX,y:l.clientY});let h=o.getItems();Dt(l.dataTransfer,h);let w=j.all;if(typeof o.getAllowedDropOperations=="function"){let I=o.getAllowedDropOperations();w=j.none;for(let E of I)w|=j[E]||j.none}te(w),l.dataTransfer.effectAllowed=ht[w]||"none",typeof(($=o.preview)===null||$===void 0?void 0:$.current)=="function"&&o.preview.current(h,I=>{if(!I)return;let E=I.getBoundingClientRect(),x=l.currentTarget.getBoundingClientRect(),O=l.clientX-x.x,R=l.clientY-x.y;(O>E.width||R>E.height)&&(O=E.width/2,R=E.height/2);let B=2*Math.round(E.height/2);I.style.height=`${B}px`,l.dataTransfer.setDragImage(I,O,R)}),D(window,"drop",I=>{I.preventDefault(),I.stopPropagation(),console.warn("Drags initiated from the React Aria useDrag hook may only be dropped on a target created with useDrop. This ensures that a keyboard and screen reader accessible alternative is available.")},{once:!0}),i.x=l.clientX,i.y=l.clientY,requestAnimationFrame(()=>{u(!0)})},v=l=>{l.stopPropagation(),!(l.clientX===i.x&&l.clientY===i.y)&&(typeof o.onDragMove=="function"&&o.onDragMove({type:"dragmove",x:l.clientX,y:l.clientY}),i.x=l.clientX,i.y=l.clientY)},b=l=>{if(l.stopPropagation(),typeof o.onDragEnd=="function"){let $={type:"dragend",x:l.clientX,y:l.clientY,dropOperation:re[l.dataTransfer.dropEffect]};oe&&($.dropOperation=re[oe]),o.onDragEnd($)}u(!1),g(),te(j.none),ke(void 0)};Re(()=>()=>{if(r.current){if(typeof i.options.onDragEnd=="function"){let l={type:"dragend",x:0,y:0,dropOperation:re[oe||"none"]};i.options.onDragEnd(l)}u(!1),te(j.none),ke(void 0)}},[i]);let s=l=>{l.pointerType!=="keyboard"&&l.pointerType!=="virtual"||m(l.target)},m=l=>{if(typeof i.options.onDragStart=="function"){let $=l.getBoundingClientRect();i.options.onDragStart({type:"dragstart",x:$.x+$.width/2,y:$.y+$.height/2})}xt({element:l,items:i.options.getItems(),allowedDropOperations:typeof i.options.getAllowedDropOperations=="function"?i.options.getAllowedDropOperations():["move","copy","link"],onDragEnd($){u(!1),typeof i.options.onDragEnd=="function"&&i.options.onDragEnd($)}},e),u(!0)},p=Fe(),d=a?Pe[p].end:Pe[p].start,f=He(e.format(d)),k={};return t||(k={...f,onPointerDown(l){if(P.current=Ye(l.nativeEvent)?"virtual":l.pointerType,l.width<1&&l.height<1)P.current="virtual";else{let $=l.currentTarget.getBoundingClientRect(),h=l.clientX-$.x,w=l.clientY-$.y,I=$.width/2,E=$.height/2;Math.abs(h-I)<=.5&&Math.abs(w-E)<=.5?P.current="virtual":P.current=l.pointerType}},onKeyDownCapture(l){l.target===l.currentTarget&&l.key==="Enter"&&(l.preventDefault(),l.stopPropagation())},onKeyUpCapture(l){l.target===l.currentTarget&&l.key==="Enter"&&(l.preventDefault(),l.stopPropagation(),m(l.target))},onClick(l){(Ze(l.nativeEvent)||P.current==="virtual")&&(l.preventDefault(),l.stopPropagation(),m(l.target))}}),n?{dragProps:{draggable:"false"},dragButtonProps:{},isDragging:!1}:{dragProps:{...k,draggable:"true",onDragStart:y,onDrag:v,onDragEnd:b},dragButtonProps:{...f,onPress:s},isDragging:a}}const Z=20;function Nt(o){let t=K.useRef(null),n=K.useRef(!0),e=K.useRef(!0);K.useEffect(()=>{if(o.current){t.current=Mt(o.current)?o.current:z(o.current);let a=window.getComputedStyle(t.current);n.current=/(auto|scroll)/.test(a.overflowX),e.current=/(auto|scroll)/.test(a.overflowY)}},[o]);let i=K.useRef({timer:void 0,dx:0,dy:0}).current;K.useEffect(()=>()=>{i.timer&&(cancelAnimationFrame(i.timer),i.timer=void 0)},[i]);let r=K.useCallback(()=>{n.current&&t.current&&(t.current.scrollLeft+=i.dx),e.current&&t.current&&(t.current.scrollTop+=i.dy),i.timer&&(i.timer=requestAnimationFrame(r))},[t,i]);return{move(a,c){if(!Ct()||Bt()||!t.current)return;let u=t.current.getBoundingClientRect(),D=Z,g=Z,P=u.height-Z,y=u.width-Z;a<D||a>y||c<g||c>P?(a<D?i.dx=a-D:a>y&&(i.dx=a-y),c<g?i.dy=c-g:c>P&&(i.dy=c-P),i.timer||(i.timer=requestAnimationFrame(r))):this.stop()},stop(){i.timer&&(cancelAnimationFrame(i.timer),i.timer=void 0)}}}const we=["before","on","after"],Ke=["after","on","before"];function qt(o,t,n){let e=K.useRef({props:o,state:t,nextTarget:null,dropOperation:null}).current;e.props=o,e.state=t;let i=K.useCallback(async y=>{let{onInsert:v,onRootDrop:b,onItemDrop:s,onReorder:m,acceptedDragTypes:p="all",shouldAcceptItemDrop:d}=e.props,{draggingKeys:f}=L,k=N(n),{target:l,dropOperation:$,items:h}=y,w=h;(p!=="all"||d)&&(w=h.filter(I=>{let E;return I.kind==="directory"?E=new Set([Kt]):E=I.kind==="file"?new Set([I.type]):I.types,p==="all"||p.some(x=>E.has(x))?l.type==="item"&&l.dropPosition==="on"&&d?d(l,E):!0:!1})),w.length>0&&(l.type==="root"&&b&&await b({items:w,dropOperation:$}),l.type==="item"&&(l.dropPosition==="on"&&s&&await s({items:w,dropOperation:$,isInternal:k,target:l}),l.dropPosition!=="on"&&(!k&&v&&await v({items:w,dropOperation:$,target:l}),k&&m&&await m({keys:f,dropOperation:$,target:l}))))},[e,n]),r=Nt(n),{dropProps:a}=kt({ref:n,onDropEnter(){e.nextTarget!=null&&t.setTarget(e.nextTarget)},onDropMove(y){e.nextTarget!=null&&t.setTarget(e.nextTarget),r.move(y.x,y.y)},getDropOperationForPoint(y,v,b,s){let{draggingKeys:m,dropCollectionRef:p}=L,d=N(n),f=l=>t.getDropOperation({target:l,types:y,allowedOperations:v,isInternal:d,draggingKeys:m})!=="cancel",k=o.dropTargetDelegate.getDropTargetFromPoint(b,s,f);if(!k)return e.dropOperation="cancel",e.nextTarget=null,"cancel";if(e.dropOperation=t.getDropOperation({target:k,types:y,allowedOperations:v,isInternal:d,draggingKeys:m}),e.dropOperation==="cancel"){let l={type:"root"},$=t.getDropOperation({target:l,types:y,allowedOperations:v,isInternal:d,draggingKeys:m});$!=="cancel"&&(k=l,e.dropOperation=$)}return k&&e.dropOperation!=="cancel"&&(n==null?void 0:n.current)!==(p==null?void 0:p.current)&&U(n),e.nextTarget=e.dropOperation==="cancel"?null:k,e.dropOperation},onDropExit(){U(void 0),t.setTarget(null),r.stop()},onDropActivate(y){var v,b;((v=t.target)===null||v===void 0?void 0:v.type)==="item"&&((b=t.target)===null||b===void 0?void 0:b.dropPosition)==="on"&&typeof o.onDropActivate=="function"&&o.onDropActivate({type:"dropactivate",x:y.x,y:y.y,target:t.target})},onDrop(y){U(n),t.target&&D(y,t.target);let{draggingCollectionRef:v}=L;v==null&&Le()}}),c=K.useRef(null),u=K.useCallback(()=>{let{state:y}=e;if(c.current){var v;let{target:m,collection:p,selectedKeys:d,focusedKey:f,isInternal:k,draggingKeys:l}=c.current;if(y.collection.size>p.size&&y.selectionManager.isSelectionEqual(d)){let $=new Set;for(let h of y.collection.getKeys())p.getItem(h)||$.add(h);if(y.selectionManager.setSelectedKeys($),y.selectionManager.focusedKey===f){let h=$.keys().next().value,w=y.collection.getItem(h);(w==null?void 0:w.type)==="cell"&&(h=w.parentKey),y.selectionManager.setFocusedKey(h),y.selectionManager.selectionMode==="none"&&Y("keyboard")}}else if(f!=null&&y.selectionManager.focusedKey===f&&k&&m.type==="item"&&m.dropPosition!=="on"&&l.has((v=y.collection.getItem(f))===null||v===void 0?void 0:v.parentKey)){var b,s;y.selectionManager.setFocusedKey((s=(b=y.collection.getItem(f))===null||b===void 0?void 0:b.parentKey)!==null&&s!==void 0?s:null),Y("keyboard")}else y.selectionManager.focusedKey===f&&m.type==="item"&&m.dropPosition==="on"&&y.collection.getItem(m.key)!=null?(y.selectionManager.setFocusedKey(m.key),Y("keyboard")):y.selectionManager.focusedKey!=null&&!y.selectionManager.isSelected(y.selectionManager.focusedKey)&&Y("keyboard");y.selectionManager.setFocused(!0)}},[e]),D=K.useCallback((y,v)=>{let{state:b}=e;c.current={timeout:void 0,focusedKey:b.selectionManager.focusedKey,collection:b.collection,selectedKeys:b.selectionManager.selectedKeys,draggingKeys:L.draggingKeys,isInternal:N(n),target:v},(e.props.onDrop||i)({type:"drop",x:y.x,y:y.y,target:v,items:y.items,dropOperation:y.dropOperation}),c.current.timeout=setTimeout(()=>{u(),c.current=null},50)},[e,i,n,u]);K.useEffect(()=>()=>{c.current&&clearTimeout(c.current.timeout)},[]),Re(()=>{c.current&&t.collection!==c.current.collection&&u()});let{direction:g}=ye();K.useEffect(()=>{if(!n.current)return;let y=(s,m=!0,p=!1)=>{var d,f,k,l;if(!s)return{type:"root"};let{keyboardDelegate:$}=e.props,h;(s==null?void 0:s.type)==="item"?h=p?(d=$.getKeyRightOf)===null||d===void 0?void 0:d.call($,s.key):(f=$.getKeyBelow)===null||f===void 0?void 0:f.call($,s.key):h=p&&g==="rtl"?(k=$.getLastKey)===null||k===void 0?void 0:k.call($):(l=$.getFirstKey)===null||l===void 0?void 0:l.call($);let w=p&&g==="rtl"?Ke:we,I=w[0];if(s.type==="item"){let E=p&&g==="rtl"?e.state.collection.getKeyBefore(s.key):e.state.collection.getKeyAfter(s.key);if(h==null||h===E){let x=w.indexOf(s.dropPosition),O=w[x+1];if(x<w.length-1&&!(O===w[2]&&h!=null))return{type:"item",key:s.key,dropPosition:O};s.dropPosition===w[2]&&(I="on")}else I=s.dropPosition}return h==null?m?{type:"root"}:null:{type:"item",key:h,dropPosition:I}},v=(s,m=!0,p=!1)=>{var d,f,k,l;let{keyboardDelegate:$}=e.props,h;(s==null?void 0:s.type)==="item"?h=p?(d=$.getKeyLeftOf)===null||d===void 0?void 0:d.call($,s.key):(f=$.getKeyAbove)===null||f===void 0?void 0:f.call($,s.key):h=p&&g==="rtl"?(k=$.getFirstKey)===null||k===void 0?void 0:k.call($):(l=$.getLastKey)===null||l===void 0?void 0:l.call($);let w=p&&g==="rtl"?Ke:we,I=!s||s.type==="root"?w[2]:"on";if((s==null?void 0:s.type)==="item"){let E=p&&g==="rtl"?e.state.collection.getKeyAfter(s.key):e.state.collection.getKeyBefore(s.key);if(h==null||h===E){let x=w.indexOf(s.dropPosition),O=w[x-1];if(x>0&&O!==w[2])return{type:"item",key:s.key,dropPosition:O};s.dropPosition===w[0]&&(I="on")}else I=s.dropPosition}return h==null?m?{type:"root"}:null:{type:"item",key:h,dropPosition:I}},b=(s,m,p,d,f=!0)=>{let k=0,l,{draggingKeys:$}=L,h=N(n);do{let w=d(s,f);if(!w)return null;s=w,l=e.state.getDropOperation({target:w,types:m,allowedOperations:p,isInternal:h,draggingKeys:$}),s.type==="root"&&k++}while(l==="cancel"&&!e.state.isDropTarget(s)&&k<2);return l==="cancel"?null:s};return Pt({element:n.current,preventFocusOnDrop:!0,getDropOperation(s,m){if(e.state.target){let{draggingKeys:d}=L,f=N(n);return e.state.getDropOperation({target:e.state.target,types:s,allowedOperations:m,isInternal:f,draggingKeys:d})}return b(null,s,m,y)?"move":"cancel"},onDropEnter(s,m){let p=se(m.items),d=e.state.selectionManager,f=null;U(n);let k=d.focusedKey,l="after",$=k!=null?e.state.collection.getItem(k):null;if(($==null?void 0:$.type)==="cell"&&(k=$.parentKey),k!=null&&d.isSelected(k)&&(d.selectedKeys.size>1&&d.firstSelectedKey===k?l="before":k=d.lastSelectedKey),k!=null){f={type:"item",key:k,dropPosition:l};let{draggingKeys:w}=L,I=N(n);var h;e.state.getDropOperation({target:f,types:p,allowedOperations:m.allowedDropOperations,isInternal:I,draggingKeys:w})==="cancel"&&(f=(h=b(f,p,m.allowedDropOperations,y,!1))!==null&&h!==void 0?h:b(f,p,m.allowedDropOperations,v,!1))}f||(f=b(null,p,m.allowedDropOperations,y)),e.state.setTarget(f)},onDropExit(){U(void 0),e.state.setTarget(null)},onDropTargetEnter(s){e.state.setTarget(s)},onDropActivate(s){var m,p;((m=e.state.target)===null||m===void 0?void 0:m.type)==="item"&&((p=e.state.target)===null||p===void 0?void 0:p.dropPosition)==="on"&&typeof e.props.onDropActivate=="function"&&e.props.onDropActivate({type:"dropactivate",x:s.x,y:s.y,target:e.state.target})},onDrop(s,m){U(n),e.state.target&&D(s,m||e.state.target)},onKeyDown(s,m){let{keyboardDelegate:p}=e.props,d=se(m.items);switch(s.key){case"ArrowDown":if(p.getKeyBelow){let x=b(e.state.target,d,m.allowedDropOperations,y);e.state.setTarget(x)}break;case"ArrowUp":if(p.getKeyAbove){let x=b(e.state.target,d,m.allowedDropOperations,v);e.state.setTarget(x)}break;case"ArrowLeft":if(p.getKeyLeftOf){let x=b(e.state.target,d,m.allowedDropOperations,(O,R)=>v(O,R,!0));e.state.setTarget(x)}break;case"ArrowRight":if(p.getKeyRightOf){let x=b(e.state.target,d,m.allowedDropOperations,(O,R)=>y(O,R,!0));e.state.setTarget(x)}break;case"Home":if(p.getFirstKey){let x=b(null,d,m.allowedDropOperations,y);e.state.setTarget(x)}break;case"End":if(p.getLastKey){let x=b(null,d,m.allowedDropOperations,v);e.state.setTarget(x)}break;case"PageDown":if(p.getKeyPageBelow){let x=e.state.target;if(!x)x=b(null,d,m.allowedDropOperations,y);else{var f,k;let O=(f=p.getFirstKey)===null||f===void 0?void 0:f.call(p);x.type==="item"&&(O=x.key);let R=null;O!=null&&(R=p.getKeyPageBelow(O));let B=x.type==="item"?x.dropPosition:"after";if(R==null||x.type==="item"&&x.key===((k=p.getLastKey)===null||k===void 0?void 0:k.call(p))){var l,$;R=($=(l=p.getLastKey)===null||l===void 0?void 0:l.call(p))!==null&&$!==void 0?$:null,B="after"}if(R==null)break;x={type:"item",key:R,dropPosition:B};let{draggingCollectionRef:C,draggingKeys:S}=L,M=(C==null?void 0:C.current)===(n==null?void 0:n.current),V=e.state.getDropOperation({target:x,types:d,allowedOperations:m.allowedDropOperations,isInternal:M,draggingKeys:S});var h;V==="cancel"&&(x=(h=b(x,d,m.allowedDropOperations,y,!1))!==null&&h!==void 0?h:b(x,d,m.allowedDropOperations,v,!1))}e.state.setTarget(x??e.state.target)}break;case"PageUp":{if(!p.getKeyPageAbove)break;let x=e.state.target;if(!x)x=b(null,d,m.allowedDropOperations,v);else if(x.type==="item"){var w;if(x.key===((w=p.getFirstKey)===null||w===void 0?void 0:w.call(p)))x={type:"root"};else{let C=p.getKeyPageAbove(x.key),S=x.dropPosition;if(C==null){var I;C=(I=p.getFirstKey)===null||I===void 0?void 0:I.call(p),S="before"}if(C==null)break;x={type:"item",key:C,dropPosition:S}}let{draggingKeys:O}=L,R=N(n),B=e.state.getDropOperation({target:x,types:d,allowedOperations:m.allowedDropOperations,isInternal:R,draggingKeys:O});var E;B==="cancel"&&(x=(E=b(x,d,m.allowedDropOperations,v,!1))!==null&&E!==void 0?E:b(x,d,m.allowedDropOperations,y,!1))}e.state.setTarget(x??e.state.target);break}}}})},[e,n,D,g]);let P=pe();return wt.set(t,{id:P,ref:n}),{collectionProps:W(a,{id:P,"aria-describedby":null})}}function Ne(o,t,n){let{dropProps:e}=It(),i=St(t);K.useEffect(()=>{if(n.current)return Et({element:n.current,target:o.target,getDropOperation(g,P){let{draggingKeys:y}=L,v=N(i);return t.getDropOperation({target:o.target,types:g,allowedOperations:P,isInternal:v,draggingKeys:y})}})},[n,o.target,t,i]);let r=Ve(),{draggingKeys:a}=L,c=N(i),u=r&&t.getDropOperation({target:o.target,types:se(r.dragTarget.items),allowedOperations:r.dragTarget.allowedDropOperations,isInternal:c,draggingKeys:a})!=="cancel",D=t.isDropTarget(o.target);return K.useEffect(()=>{r&&D&&n.current&&n.current.focus()},[D,r,n]),{dropProps:{...e,"aria-hidden":!r||u?void 0:"true"},isDropTarget:D}}function zt(o){return o&&o.__esModule?o.default:o}function Gt(o,t,n){let{target:e}=o,{collection:i}=t,r=ve(zt(me),"@react-aria/dnd"),a=Ve(),{dropProps:c}=Ne(o,t,n),u=pe(),D=b=>{var s,m,p,d;return b==null?"":(d=(p=(s=i.getTextValue)===null||s===void 0?void 0:s.call(i,b))!==null&&p!==void 0?p:(m=i.getItem(b))===null||m===void 0?void 0:m.textValue)!==null&&d!==void 0?d:""},g="",P;if(e.type==="root")g=r.format("dropOnRoot"),P=`${u} ${At(t)}`;else if(e.dropPosition==="on")g=r.format("dropOnItem",{itemText:D(e.key)});else{let b,s;i.getFirstKey()===e.key&&e.dropPosition==="before"?b=null:b=e.dropPosition==="before"?i.getKeyBefore(e.key):e.key,i.getLastKey()===e.key&&e.dropPosition==="after"?s=null:s=e.dropPosition==="after"?i.getKeyAfter(e.key):e.key,b&&s?g=r.format("insertBetween",{beforeItemText:D(b),afterItemText:D(s)}):b?g=r.format("insertAfter",{itemText:D(b)}):s&&(g=r.format("insertBefore",{itemText:D(s)}))}let y=t.isDropTarget(e),v=a?c["aria-hidden"]:"true";return{dropIndicatorProps:{...c,id:u,"aria-roledescription":r.format("dropIndicator"),"aria-label":g,"aria-labelledby":P,"aria-hidden":v,tabIndex:-1},isDropTarget:y,isHidden:!y&&!!v}}function jt(o){return o&&o.__esModule?o.default:o}const Ut={keyboard:{selected:"dragSelectedKeyboard",notSelected:"dragDescriptionKeyboard"},touch:{selected:"dragSelectedLongPress",notSelected:"dragDescriptionLongPress"},virtual:{selected:"dragDescriptionVirtual",notSelected:"dragDescriptionVirtual"}};function Wt(o,t){let n=ve(jt(me),"@react-aria/dnd"),e=t.isDisabled||t.selectionManager.isDisabled(o.key),{dragProps:i,dragButtonProps:r}=Ht({getItems(){return t.getItems(o.key)},preview:t.preview,getAllowedDropOperations:t.getAllowedDropOperations,hasDragButton:o.hasDragButton,onDragStart(p){t.startDrag(o.key,p),Ot(t.draggingKeys)},onDragMove(p){t.moveDrag(p)},onDragEnd(p){let{dropOperation:d}=p,f=d==="cancel"?!1:N();t.endDrag({...p,keys:t.draggingKeys,isInternal:f}),Le()}}),a=t.collection.getItem(o.key),c=t.getKeysForDrag(o.key).size,u=c>1&&t.selectionManager.isSelected(o.key),D,g,P=Fe();if(!o.hasDragButton&&t.selectionManager.selectionMode!=="none"){let p=Ut[P][u?"selected":"notSelected"];o.hasAction&&P==="keyboard"&&(p+="Alt"),u?g=n.format(p,{count:c}):g=n.format(p),delete i.onClick}else if(u)D=n.format("dragSelectedItems",{count:c});else{var y,v,b,s;let p=(s=(b=(y=(v=t.collection).getTextValue)===null||y===void 0?void 0:y.call(v,o.key))!==null&&b!==void 0?b:a==null?void 0:a.textValue)!==null&&s!==void 0?s:"";D=n.format("dragItem",{itemText:p})}let m=He(g);if(g&&Object.assign(i,m),!o.hasDragButton&&o.hasAction){let{onKeyDownCapture:p,onKeyUpCapture:d}=i;P==="touch"&&delete i["aria-describedby"],i.onKeyDownCapture=f=>{f.altKey&&(p==null||p(f))},i.onKeyUpCapture=f=>{f.altKey&&(d==null||d(f))}}return{dragProps:e?{}:i,dragButtonProps:{...r,isDisabled:e,"aria-label":D}}}function Xt(o,t,n){let{draggingCollectionRef:e}=L;t.draggingKeys.size>0&&(e==null?void 0:e.current)!==n.current&&Tt(n)}function Yt(o,t){let n=o.children,[e,i]=K.useState(null),r=K.useRef(null),a=K.useRef(void 0);return K.useImperativeHandle(t,()=>(c,u)=>{Lt.flushSync(()=>{i(n(c))}),u(r.current),a.current=requestAnimationFrame(()=>{i(null)})},[n]),K.useEffect(()=>()=>{a.current&&cancelAnimationFrame(a.current)},[]),e?A.createElement("div",{style:{zIndex:-100,position:"absolute",top:0,left:-1e5},ref:r},e):null}let Zt=A.forwardRef(Yt);class Jt{getPrimaryStart(t){return this.orientation==="horizontal"?t.left:t.top}getPrimaryEnd(t){return this.orientation==="horizontal"?t.right:t.bottom}getSecondaryStart(t){return this.orientation==="horizontal"?t.top:t.left}getSecondaryEnd(t){return this.orientation==="horizontal"?t.bottom:t.right}getFlowStart(t){return this.layout==="stack"?this.getPrimaryStart(t):this.getSecondaryStart(t)}getFlowEnd(t){return this.layout==="stack"?this.getPrimaryEnd(t):this.getSecondaryEnd(t)}getFlowSize(t){return this.getFlowEnd(t)-this.getFlowStart(t)}getDropTargetFromPoint(t,n,e){if(this.collection[Symbol.iterator]().next().done||!this.ref.current)return{type:"root"};let i=this.ref.current.getBoundingClientRect(),r=this.orientation==="horizontal"?t:n,a=this.orientation==="horizontal"?n:t;r+=this.getPrimaryStart(i),a+=this.getSecondaryStart(i);let c=this.layout==="stack"?r:a,u=this.orientation==="horizontal"&&this.direction==="rtl",D=this.layout==="grid"&&this.orientation==="vertical"&&this.direction==="rtl",g=this.layout==="stack"?u:D,P=this.ref.current.querySelectorAll("[data-key]"),y=new Map;for(let d of P)d instanceof HTMLElement&&d.dataset.key!=null&&y.set(d.dataset.key,d);let v=[...this.collection].filter(d=>d.type==="item"),b=0,s=v.length;for(;b<s;){let d=Math.floor((b+s)/2),f=v[d],k=y.get(String(f.key));if(!k)break;let l=k.getBoundingClientRect(),$=h=>{h?b=d+1:s=d};if(r<this.getPrimaryStart(l))$(u);else if(r>this.getPrimaryEnd(l))$(!u);else if(a<this.getSecondaryStart(l))$(D);else if(a>this.getSecondaryEnd(l))$(!D);else{let h={type:"item",key:f.key,dropPosition:"on"};if(e(h))c<=this.getFlowStart(l)+5&&e({...h,dropPosition:"before"})?h.dropPosition=g?"after":"before":c>=this.getFlowEnd(l)-5&&e({...h,dropPosition:"after"})&&(h.dropPosition=g?"before":"after");else{let w=this.getFlowStart(l)+this.getFlowSize(l)/2;c<=w&&e({...h,dropPosition:"before"})?h.dropPosition=g?"after":"before":c>=w&&e({...h,dropPosition:"after"})&&(h.dropPosition=g?"before":"after")}return h}}let m=v[Math.min(b,v.length-1)],p=y.get(String(m.key));return i=p==null?void 0:p.getBoundingClientRect(),i&&(r<this.getPrimaryStart(i)||Math.abs(c-this.getFlowStart(i))<Math.abs(c-this.getFlowEnd(i)))?{type:"item",key:m.key,dropPosition:g?"after":"before"}:{type:"item",key:m.key,dropPosition:g?"before":"after"}}constructor(t,n,e){this.collection=t,this.ref=n,this.layout=(e==null?void 0:e.layout)||"stack",this.orientation=(e==null?void 0:e.orientation)||"vertical",this.direction=(e==null?void 0:e.direction)||"ltr"}}const $e=new WeakMap;function ce(o,t){var n;let{id:e}=(n=$e.get(o))!==null&&n!==void 0?n:{};if(!e)throw new Error("Unknown list");return`${e}-${Qt(t)}`}function Qt(o){return typeof o=="string"?o.replace(/\s*/g,""):""+o}function _t(o,t,n){let{isVirtualized:e,keyboardDelegate:i,layoutDelegate:r,onAction:a,linkBehavior:c="action",keyboardNavigationBehavior:u="arrow"}=o;!o["aria-label"]&&!o["aria-labelledby"]&&console.warn("An aria-label or aria-labelledby prop is required for accessibility.");let{listProps:D}=gt({selectionManager:t.selectionManager,collection:t.collection,disabledKeys:t.disabledKeys,ref:n,keyboardDelegate:i,layoutDelegate:r,isVirtualized:e,selectOnFocus:t.selectionManager.selectionBehavior==="replace",shouldFocusWrap:o.shouldFocusWrap,linkBehavior:c}),g=pe(o.id);$e.set(t,{id:g,onAction:a,linkBehavior:c,keyboardNavigationBehavior:u});let P=ze({selectionManager:t.selectionManager,hasItemActions:!!a}),y=$t(n,{isDisabled:t.collection.size!==0}),v=fe(o,{labelable:!0}),b=W(v,{role:"grid",id:g,"aria-multiselectable":t.selectionManager.selectionMode==="multiple"?"true":void 0},t.collection.size===0?{tabIndex:y?-1:0}:D,P);return e&&(b["aria-rowcount"]=t.collection.size,b["aria-colcount"]=1),Ge({},t),{gridProps:b}}const Ie={expand:{ltr:"ArrowRight",rtl:"ArrowLeft"},collapse:{ltr:"ArrowLeft",rtl:"ArrowRight"}};function er(o,t,n){var e,i;let{node:r,isVirtualized:a,shouldSelectOnPressUp:c}=o,{direction:u}=ye(),{onAction:D,linkBehavior:g,keyboardNavigationBehavior:P}=$e.get(t),y=Je(),v=K.useRef(null),b=()=>{var S;n.current!==null&&(v.current!=null&&r.key!==v.current||!(!((S=n.current)===null||S===void 0)&&S.contains(document.activeElement)))&&q(n.current)},s={},m,p=t.selectionManager.isLink(r.key);if(r!=null&&"expandedKeys"in t){var d,f,k;let S=(d=(f=t.collection).getChildren)===null||d===void 0?void 0:d.call(f,r.key);m=[...S??[]].length>1,D==null&&!p&&t.selectionManager.selectionMode==="none"&&m&&(D=()=>t.toggleKey(r.key));let M=m?t.expandedKeys.has(r.key):void 0,V=1;var l;if(r.level>0&&(r==null?void 0:r.parentKey)!=null){let T=t.collection.getItem(r.parentKey);if(T){var $,h;let F=($=(h=t.collection).getChildren)===null||$===void 0?void 0:$.call(h,T.key);V=at(F).index+1}}else V=((l=(k=[...t.collection].filter(T=>T.level===0).at(-1))===null||k===void 0?void 0:k.index)!==null&&l!==void 0?l:0)+1;s={"aria-expanded":M,"aria-level":r.level+1,"aria-posinset":(r==null?void 0:r.index)+1,"aria-setsize":V}}let{itemProps:w,...I}=dt({selectionManager:t.selectionManager,key:r.key,ref:n,isVirtualized:a,shouldSelectOnPressUp:c,onAction:D||!((e=r.props)===null||e===void 0)&&e.onAction?Qe((i=r.props)===null||i===void 0?void 0:i.onAction,D?()=>D(r.key):void 0):void 0,focus:b,linkBehavior:g}),E=S=>{if(!S.currentTarget.contains(S.target)||!n.current||!document.activeElement)return;let M=xe(n.current);if(M.currentNode=document.activeElement,"expandedKeys"in t&&document.activeElement===n.current){if(S.key===Ie.expand[u]&&t.selectionManager.focusedKey===r.key&&m&&!t.expandedKeys.has(r.key)){t.toggleKey(r.key),S.stopPropagation();return}else if(S.key===Ie.collapse[u]&&t.selectionManager.focusedKey===r.key&&m&&t.expandedKeys.has(r.key)){t.toggleKey(r.key),S.stopPropagation();return}}switch(S.key){case"ArrowLeft":if(P==="arrow"){let T=u==="rtl"?M.nextNode():M.previousNode();if(T)S.preventDefault(),S.stopPropagation(),q(T),G(T,{containingElement:z(n.current)});else if(S.preventDefault(),S.stopPropagation(),u==="rtl")q(n.current),G(n.current,{containingElement:z(n.current)});else{M.currentNode=n.current;let F=Se(M);F&&(q(F),G(F,{containingElement:z(n.current)}))}}break;case"ArrowRight":if(P==="arrow"){let T=u==="rtl"?M.previousNode():M.nextNode();if(T)S.preventDefault(),S.stopPropagation(),q(T),G(T,{containingElement:z(n.current)});else if(S.preventDefault(),S.stopPropagation(),u==="ltr")q(n.current),G(n.current,{containingElement:z(n.current)});else{M.currentNode=n.current;let F=Se(M);F&&(q(F),G(F,{containingElement:z(n.current)}))}}break;case"ArrowUp":case"ArrowDown":if(!S.altKey&&n.current.contains(S.target)){var V;S.stopPropagation(),S.preventDefault(),(V=n.current.parentElement)===null||V===void 0||V.dispatchEvent(new KeyboardEvent(S.nativeEvent.type,S.nativeEvent))}break;case"Tab":if(P==="tab"){let T=xe(n.current,{tabbable:!0});T.currentNode=document.activeElement,(S.shiftKey?T.previousNode():T.nextNode())&&S.stopPropagation()}}},x=S=>{if(v.current=r.key,S.target!==n.current){_e()||t.selectionManager.setFocusedKey(r.key);return}},O=mt(r.props),R=I.hasAction?O:{},B=W(w,R,{role:"row",onKeyDownCapture:E,onFocus:x,"aria-label":r.textValue||void 0,"aria-selected":t.selectionManager.canSelectItem(r.key)?t.selectionManager.isSelected(r.key):void 0,"aria-disabled":t.selectionManager.isDisabled(r.key)||void 0,"aria-labelledby":y&&r.textValue?`${ce(t,r.key)} ${y}`:void 0,id:ce(t,r.key)});a&&(B["aria-rowindex"]=r.index+1);let C={role:"gridcell","aria-colindex":1};return{rowProps:{...W(B,s)},gridCellProps:C,descriptionProps:{id:y},...I}}function Se(o){let t=null,n=null;do n=o.lastChild(),n&&(t=n);while(n);return t}function tr(o,t){let{key:n}=o;const{checkboxProps:e}=je(o,t);return{checkboxProps:{...e,"aria-labelledby":`${e.id} ${ce(t,n)}`}}}function rr(o){let{getItems:t,isDisabled:n,collection:e,selectionManager:i,onDragStart:r,onDragMove:a,onDragEnd:c,preview:u,getAllowedDropOperations:D}=o,[,g]=K.useState(!1),P=K.useRef(new Set),y=K.useRef(null),v=b=>{let s=new Set(i.isSelected(b)?new Set([...i.selectedKeys].filter(m=>!!e.getItem(m))):[]);return s.add(b),s};return{collection:e,selectionManager:i,get draggedKey(){return y.current},get draggingKeys(){return P.current},isDragging(b){return P.current.has(b)},getKeysForDrag:v,getItems(b){return t(v(b))},isDisabled:n,preview:u,getAllowedDropOperations:D,startDrag(b,s){let m=v(b);P.current=m,y.current=b,i.setFocused(!1),g(!0),typeof r=="function"&&r({...s,keys:m})},moveDrag(b){typeof a=="function"&&a({...b,keys:P.current})},endDrag(b){let{isInternal:s}=b;typeof c=="function"&&c({...b,keys:P.current,isInternal:s}),P.current=new Set,y.current=null,g(!1)}}}function or(o){let{acceptedDragTypes:t="all",isDisabled:n,onInsert:e,onRootDrop:i,onItemDrop:r,onReorder:a,shouldAcceptItemDrop:c,collection:u,selectionManager:D,onDropEnter:g,getDropOperation:P,onDrop:y}=o,[v,b]=K.useState(null),s=K.useRef(null),m=d=>{if(d.dropPosition==="before"){let f=u.getKeyBefore(d.key);return f!=null?{type:"item",key:f,dropPosition:"after"}:null}else if(d.dropPosition==="after"){let f=u.getKeyAfter(d.key);return f!=null?{type:"item",key:f,dropPosition:"before"}:null}return null},p=K.useCallback(d=>{let{target:f,types:k,allowedOperations:l,isInternal:$,draggingKeys:h}=d;if(n||!f)return"cancel";if(t==="all"||t.some(w=>k.has(w))){let w=e&&f.type==="item"&&!$&&(f.dropPosition==="before"||f.dropPosition==="after"),I=a&&f.type==="item"&&$&&(f.dropPosition==="before"||f.dropPosition==="after"),E=i&&f.type==="root"&&!$,x=r&&f.type==="item"&&f.dropPosition==="on"&&!($&&f.key!=null&&h.has(f.key))&&(!c||c(f,k));if(y||w||I||E||x)return P?P(f,k,l):l[0]}return"cancel"},[n,t,P,e,i,r,c,a,y]);return{collection:u,selectionManager:D,isDisabled:n,target:v,setTarget(d){if(this.isDropTarget(d))return;let f=s.current;f&&typeof o.onDropExit=="function"&&o.onDropExit({type:"dropexit",x:0,y:0,target:f}),d&&typeof g=="function"&&g({type:"dropenter",x:0,y:0,target:d}),s.current=d??null,b(d??null)},isDropTarget(d){let f=s.current;return!f||!d?!1:ie(d,f)?!0:(d==null?void 0:d.type)==="item"&&(f==null?void 0:f.type)==="item"&&d.key!==f.key&&d.dropPosition!==f.dropPosition&&d.dropPosition!=="on"&&f.dropPosition!=="on"?ie(m(d),f)||ie(d,m(f)):!1},getDropOperation(d){return p(d)}}}function ie(o,t){if(!o)return!t;switch(o.type){case"root":return(t==null?void 0:t.type)==="root";case"item":return(t==null?void 0:t.type)==="item"&&(t==null?void 0:t.key)===o.key&&(t==null?void 0:t.dropPosition)===o.dropPosition}}function ir(o){let{initialItems:t=[],initialSelectedKeys:n,getKey:e=D=>{var g;return(g=D.id)!==null&&g!==void 0?g:D.key},filter:i,initialFilterText:r=""}=o,[a,c]=K.useState({items:t,selectedKeys:n==="all"?"all":new Set(n||[]),filterText:r}),u=K.useMemo(()=>i?a.items.filter(D=>i(D,a.filterText)):a.items,[a.items,a.filterText,i]);return{...a,items:u,...nr({getKey:e},c),getItem(D){return a.items.find(g=>e(g)===D)}}}function nr(o,t){let{cursor:n,getKey:e}=o;return{setSelectedKeys(i){t(r=>({...r,selectedKeys:i}))},setFilterText(i){t(r=>({...r,filterText:i}))},insert(i,...r){t(a=>X(a,i,...r))},insertBefore(i,...r){t(a=>{let c=a.items.findIndex(u=>(e==null?void 0:e(u))===i);if(c===-1)if(a.items.length===0)c=0;else return a;return X(a,c,...r)})},insertAfter(i,...r){t(a=>{let c=a.items.findIndex(u=>(e==null?void 0:e(u))===i);if(c===-1)if(a.items.length===0)c=0;else return a;return X(a,c+1,...r)})},prepend(...i){t(r=>X(r,0,...i))},append(...i){t(r=>X(r,r.items.length,...i))},remove(...i){t(r=>{let a=new Set(i),c=r.items.filter(D=>!a.has(e(D))),u="all";if(r.selectedKeys!=="all"){u=new Set(r.selectedKeys);for(let D of i)u.delete(D)}return n==null&&c.length===0&&(u=new Set),{...r,items:c,selectedKeys:u}})},removeSelectedItems(){t(i=>{if(i.selectedKeys==="all")return{...i,items:[],selectedKeys:new Set};let r=i.selectedKeys,a=i.items.filter(c=>!r.has(e(c)));return{...i,items:a,selectedKeys:new Set}})},move(i,r){t(a=>{let c=a.items.findIndex(g=>e(g)===i);if(c===-1)return a;let u=a.items.slice(),[D]=u.splice(c,1);return u.splice(r,0,D),{...a,items:u}})},moveBefore(i,r){t(a=>{let c=a.items.findIndex(g=>e(g)===i);if(c===-1)return a;let D=(Array.isArray(r)?r:[...r]).map(g=>a.items.findIndex(P=>e(P)===g)).sort((g,P)=>g-P);return Ee(a,D,c)})},moveAfter(i,r){t(a=>{let c=a.items.findIndex(g=>e(g)===i);if(c===-1)return a;let D=(Array.isArray(r)?r:[...r]).map(g=>a.items.findIndex(P=>e(P)===g)).sort((g,P)=>g-P);return Ee(a,D,c+1)})},update(i,r){t(a=>{let c=a.items.findIndex(u=>e(u)===i);return c===-1?a:{...a,items:[...a.items.slice(0,c),r,...a.items.slice(c+1)]}})}}}function X(o,t,...n){return{...o,items:[...o.items.slice(0,t),...n,...o.items.slice(t)]}}function Ee(o,t,n){n-=t.filter(r=>r<n).length;let e=t.map(r=>({from:r,to:n++}));for(let r=0;r<e.length;r++){let a=e[r].from;for(let c=r;c<e.length;c++)e[c].from>a&&e[c].from--}for(let r=0;r<e.length;r++){let a=e[r];for(let c=e.length-1;c>r;c--){let u=e[c];u.from<a.to?a.to++:u.from++}}let i=o.items.slice();for(let r of e){let[a]=i.splice(r.from,1);i.splice(r.to,0,a)}return{...o,items:i}}const lr=K.createContext(null);function ar(o,t){return[o,t]=tt(o,t,lr),A.createElement(nt,{content:A.createElement(lt,o)},n=>A.createElement(dr,{props:o,collection:n,gridListRef:t}))}function dr({props:o,collection:t,gridListRef:n}){let{dragAndDropHooks:e,keyboardNavigationBehavior:i="arrow",layout:r="stack"}=o,{CollectionRoot:a,isVirtualized:c,layoutDelegate:u,dropTargetDelegate:D}=K.useContext(ae),g=yt({...o,collection:t,children:void 0,layoutDelegate:u}),P=st({usage:"search",sensitivity:"base"}),{disabledBehavior:y,disabledKeys:v}=g.selectionManager,{direction:b}=ye(),s=K.useMemo(()=>new he({collection:t,collator:P,ref:n,disabledKeys:v,disabledBehavior:y,layoutDelegate:u,layout:r,direction:b}),[t,n,r,v,y,u,P,b]),{gridProps:m}=_t({...o,keyboardDelegate:s,keyboardNavigationBehavior:r==="grid"?"tab":i,isVirtualized:c},g,n),p=g.selectionManager,d=!!(e!=null&&e.useDraggableCollectionState),f=!!(e!=null&&e.useDroppableCollectionState),k=K.useRef(d),l=K.useRef(f);K.useEffect(()=>{k.current!==d&&console.warn("Drag hooks were provided during one render, but not another. This should be avoided as it may produce unexpected behavior."),l.current!==f&&console.warn("Drop hooks were provided during one render, but not another. This should be avoided as it may produce unexpected behavior.")},[d,f]);let $,h,w,I=!1,E=null,x=K.useRef(null);if(d&&e){$=e.useDraggableCollectionState({collection:t,selectionManager:p,preview:e.renderDragPreview?x:void 0}),e.useDraggableCollection({},$,n);let T=e.DragPreview;E=e.renderDragPreview?A.createElement(T,{ref:x},e.renderDragPreview):null}if(f&&e){h=e.useDroppableCollectionState({collection:t,selectionManager:p});let T=new he({collection:t,disabledKeys:p.disabledKeys,disabledBehavior:p.disabledBehavior,ref:n}),F=e.dropTargetDelegate||D||new e.ListDropTargetDelegate(t,n,{layout:r,direction:b});w=e.useDroppableCollection({keyboardDelegate:T,dropTargetDelegate:F},h,n),I=h.isDropTarget({type:"root"})}let{focusProps:O,isFocused:R,isFocusVisible:B}=Ce(),C={isDropTarget:I,isEmpty:g.collection.size===0,isFocused:R,isFocusVisible:B,layout:r,state:g},S=ge({className:o.className,style:o.style,defaultClassName:"react-aria-GridList",values:C}),M=null,V=null;if(g.collection.size===0&&o.renderEmptyState){let T=o.renderEmptyState(C);M=A.createElement("div",{role:"row",style:{display:"contents"}},A.createElement("div",{role:"gridcell",style:{display:"contents"}},T))}return A.createElement(vt,null,A.createElement("div",{...fe(o),...S,...W(m,O,w==null?void 0:w.collectionProps,V),ref:n,slot:o.slot||void 0,onScroll:o.onScroll,"data-drop-target":I||void 0,"data-empty":g.collection.size===0||void 0,"data-focused":R||void 0,"data-focus-visible":B||void 0,"data-layout":r},A.createElement(Be,{values:[[de,g],[_,{dragAndDropHooks:e,dragState:$,dropState:h}],[ct,{render:ur}]]},f&&A.createElement(gr,null),A.createElement(a,{collection:t,scrollRef:n,persistedKeys:ut(p,e,h),renderDropIndicator:pt(e,h)})),M,E))}const sr=K.forwardRef(ar),cr=ot("item",function(t,n,e){let i=K.useContext(de),{dragAndDropHooks:r,dragState:a,dropState:c}=K.useContext(_),u=Me(n),{isVirtualized:D}=K.useContext(ae),{rowProps:g,gridCellProps:P,descriptionProps:y,...v}=er({node:e,shouldSelectOnPressUp:!!a,isVirtualized:D},i,u),{hoverProps:b,isHovered:s}=et({isDisabled:!v.allowsSelection&&!v.hasAction,onHoverStart:e.props.onHoverStart,onHoverChange:e.props.onHoverChange,onHoverEnd:e.props.onHoverEnd}),{isFocusVisible:m,focusProps:p}=Ce(),{checkboxProps:d}=tr({key:e.key},i),f=i.selectionManager.disabledBehavior==="all"&&v.isDisabled?{isDisabled:!0}:{},k=null;a&&r&&(k=r.useDraggableItem({key:e.key,hasDragButton:!0},a));let l=null,$=K.useRef(null),{visuallyHiddenProps:h}=be();c&&r&&(l=r.useDropIndicator({target:{type:"item",key:e.key,dropPosition:"on"}},c,$));let w=a&&a.isDragging(e.key),I=ge({...t,id:void 0,children:e.rendered,defaultClassName:"react-aria-GridListItem",values:{...v,isHovered:s,isFocusVisible:m,selectionMode:i.selectionManager.selectionMode,selectionBehavior:i.selectionManager.selectionBehavior,allowsDragging:!!a,isDragging:w,isDropTarget:l==null?void 0:l.isDropTarget}}),E=K.useRef(null);return K.useEffect(()=>{a&&!E.current&&console.warn('Draggable items in a GridList must contain a <Button slot="drag"> element so that keyboard and screen reader users can drag them.')},[]),K.useEffect(()=>{e.textValue||console.warn("A `textValue` prop is required for <GridListItem> elements with non-plain text children in order to support accessibility features such as type to select.")},[e.textValue]),A.createElement(A.Fragment,null,l&&!l.isHidden&&A.createElement("div",{role:"row",style:{position:"absolute"}},A.createElement("div",{role:"gridcell"},A.createElement("div",{role:"button",...h,...l==null?void 0:l.dropIndicatorProps,ref:$}))),A.createElement("div",{...W(fe(t),g,p,b,k==null?void 0:k.dragProps),...I,ref:u,"data-selected":v.isSelected||void 0,"data-disabled":v.isDisabled||void 0,"data-hovered":s||void 0,"data-focused":v.isFocused||void 0,"data-focus-visible":m||void 0,"data-pressed":v.isPressed||void 0,"data-allows-dragging":!!a||void 0,"data-dragging":w||void 0,"data-drop-target":(l==null?void 0:l.isDropTarget)||void 0,"data-selection-mode":i.selectionManager.selectionMode==="none"?void 0:i.selectionManager.selectionMode},A.createElement("div",{...P,style:{display:"contents"}},A.createElement(Be,{values:[[rt,{slots:{[ee]:{},selection:d}}],[We,{slots:{[ee]:f,drag:{...k==null?void 0:k.dragButtonProps,ref:E,style:{pointerEvents:"none"}}}}],[bt,{slots:{[ee]:{},description:y}}],[ae,it],[de,null]]},I.children))))});function ur(o,t){t=Me(t);let{dragAndDropHooks:n,dropState:e}=K.useContext(_),i=K.useRef(null),{dropIndicatorProps:r,isHidden:a,isDropTarget:c}=n.useDropIndicator(o,e,i);return a?null:A.createElement(fr,{...o,dropIndicatorProps:r,isDropTarget:c,buttonRef:i,ref:t})}function pr(o,t){let{dropIndicatorProps:n,isDropTarget:e,buttonRef:i,...r}=o,{visuallyHiddenProps:a}=be(),c=ge({...r,defaultClassName:"react-aria-DropIndicator",values:{isDropTarget:e}});return A.createElement("div",{...c,role:"row",ref:t,"data-drop-target":e||void 0},A.createElement("div",{role:"gridcell"},A.createElement("div",{...a,role:"button",...n,ref:i}),c.children))}const fr=K.forwardRef(pr);function gr(){let{dragAndDropHooks:o,dropState:t}=K.useContext(_),n=K.useRef(null),{dropIndicatorProps:e}=o.useDropIndicator({target:{type:"root"}},t,n),i=t.isDropTarget({type:"root"}),{visuallyHiddenProps:r}=be();return!i&&e["aria-hidden"]?null:A.createElement("div",{role:"row","aria-hidden":e["aria-hidden"],style:{position:"absolute"}},A.createElement("div",{role:"gridcell"},A.createElement("div",{role:"button",...r,...e,ref:n})))}function yr(o){return{dragAndDropHooks:K.useMemo(()=>{let{onDrop:n,onInsert:e,onItemDrop:i,onReorder:r,onRootDrop:a,getItems:c,renderDragPreview:u,renderDropIndicator:D,dropTargetDelegate:g}=o,P=!!c,y=!!(n||e||i||r||a),v={};return P&&(v.useDraggableCollectionState=function(s){return rr({...s,...o})},v.useDraggableCollection=Xt,v.useDraggableItem=Wt,v.DragPreview=Zt,v.renderDragPreview=u,v.isVirtualDragging=Rt),y&&(v.useDroppableCollectionState=function(s){return or({...s,...o})},v.useDroppableItem=Ne,v.useDroppableCollection=function(s,m,p){return qt({...s,...o},m,p)},v.useDropIndicator=Gt,v.renderDropIndicator=D,v.dropTargetDelegate=g,v.ListDropTargetDelegate=Jt),v},[o])}}const br=({children:o,...t})=>H.jsx(sr,{...t,className:le(t.className,n=>ne("group flex flex-col gap-1 overflow-auto rounded-sm border border-neutral-200 bg-control p-1 text-foreground outline-none","data-[empty]:p-6 data-[empty]:text-center data-[empty]:text-sm",n)),children:o}),mr=({children:o,className:t,classNames:n,...e})=>{const i=typeof o=="string"?o:void 0;return H.jsx(cr,{textValue:i,className:le(t,r=>ne("relative flex w-full cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none","data-[disabled]:pointer-events-none data-[disabled]:opacity-50","data-[focus-visible]:z-10 data-[focus-visible]:outline-none data-[focus-visible]:ring-2 data-[focus-visible]:ring-ring data-[focus-visible]:ring-offset-2 data-[focus-visible]:ring-offset-background","data-[hovered]:bg-accent data-[hovered]:text-accent-foreground","data-[selected]:bg-accent data-[selected]:text-accent-foreground","data-[dragging]:opacity-60",De(n==null?void 0:n.item),r)),...e,children:le(o,(r,a)=>H.jsxs(H.Fragment,{children:[a.selectionMode==="multiple"&&a.selectionBehavior==="toggle"&&H.jsx(qe,{slot:"selection"}),H.jsx("span",{className:"flex-1",children:r}),a.allowsDragging&&H.jsx(Xe,{slot:"drag",children:H.jsx(Ue,{className:ne("size-4",De(n==null?void 0:n.icon))})})]}))})},J=o=>{if(!o)throw new Error("GridList: no item provided to getKey");return"id"in o?o.id:o.label},ue=({items:o,className:t,onOrderChange:n,...e})=>{const i=ir({initialItems:o,getKey:J}),r=K.useRef(i.items),{dragAndDropHooks:a}=yr({getItems:u=>[...u].map(D=>({"text/plain":J(i.getItem(D))})),onReorder:u=>{u.target.dropPosition==="before"?i.moveBefore(u.target.key,u.keys):u.target.dropPosition==="after"&&i.moveAfter(u.target.key,u.keys)},renderDropIndicator:u=>H.jsx(ft,{target:u,className:"outline outline-1 outline-offset-0 outline-primary"})});K.useEffect(()=>{const u=i.items.map(g=>J(g)),D=r.current.map(g=>J(g));if(u.length===D.length){for(let g=0;g<u.length;g++)if(u[g]!==D[g]){n==null||n(u);return}}},[i.items,n]);const c=typeof t=="object"?t:{base:t};return H.jsx(br,{"aria-label":"gridlist",items:i.items,dragAndDropHooks:a,className:c.base,...e,children:u=>{const D="id"in u?u.id:u.label;return H.jsx(mr,{id:D,classNames:c,children:u.label})}})};try{ue.displayName="GridList",ue.__docgenInfo={description:"",displayName:"GridList",props:{items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"(ListItemWithId | ListItemWithoutId)[] | undefined"}},className:{defaultValue:null,description:"",name:"className",required:!0,type:{name:"string | ClassNameObject"}},onOrderChange:{defaultValue:null,description:"",name:"onOrderChange",required:!1,type:{name:"((items: string[]) => void)"}},children:{defaultValue:null,description:"The contents of the collection.",name:"children",required:!1,type:{name:"ReactNode | ((item: unknown) => ReactNode)"}},id:{defaultValue:null,description:"The element's unique identifier. See [MDN](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/id).",name:"id",required:!1,type:{name:"string"}},"aria-label":{defaultValue:null,description:"Defines a string value that labels the current element.",name:"aria-label",required:!1,type:{name:"string"}},"aria-labelledby":{defaultValue:null,description:"Identifies the element (or elements) that labels the current element.",name:"aria-labelledby",required:!1,type:{name:"string"}},"aria-describedby":{defaultValue:null,description:"Identifies the element (or elements) that describes the object.",name:"aria-describedby",required:!1,type:{name:"string"}},"aria-details":{defaultValue:null,description:"Identifies the element (or elements) that provide a detailed, extended description for the object.",name:"aria-details",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"The inline [style](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/style) for the element. A function may be provided to compute the style based on component state.",name:"style",required:!1,type:{name:"CSSProperties | ((values: GridListRenderProps & { defaultStyle: CSSProperties; }) => CSSProperties)"}},slot:{defaultValue:null,description:"A slot name for the component. Slots allow the component to receive props from a parent component.\nAn explicit `null` value indicates that the local props completely override all props received from a parent.",name:"slot",required:!1,type:{name:"string | null"}},onScroll:{defaultValue:null,description:"Handler that is called when a user scrolls. See [MDN](https://developer.mozilla.org/en-US/docs/Web/API/Element/scroll_event).",name:"onScroll",required:!1,type:{name:"((e: UIEvent<HTMLDivElement, UIEvent>) => void)"}},disabledKeys:{defaultValue:null,description:"The item keys that are disabled. These items cannot be selected, focused, or otherwise interacted with.",name:"disabledKeys",required:!1,type:{name:"Iterable<Key>"}},dependencies:{defaultValue:null,description:"Values that should invalidate the item cache when using dynamic collections.",name:"dependencies",required:!1,type:{name:"any[]"}},onAction:{defaultValue:null,description:"Handler that is called when a user performs an action on an item. The exact user event depends on\nthe collection's `selectionBehavior` prop and the interaction modality.",name:"onAction",required:!1,type:{name:"((key: Key) => void)"}},disallowEmptySelection:{defaultValue:null,description:"Whether the collection allows empty selection.",name:"disallowEmptySelection",required:!1,type:{name:"boolean"}},onSelectionChange:{defaultValue:null,description:"Handler that is called when the selection changes.",name:"onSelectionChange",required:!1,type:{name:"((keys: Selection) => void)"}},selectionBehavior:{defaultValue:null,description:"How multiple selection should behave in the collection.",name:"selectionBehavior",required:!1,type:{name:"enum",value:[{value:'"replace"'},{value:'"toggle"'}]}},selectionMode:{defaultValue:null,description:"The type of selection that is allowed in the collection.",name:"selectionMode",required:!1,type:{name:"enum",value:[{value:'"none"'},{value:'"single"'},{value:'"multiple"'}]}},selectedKeys:{defaultValue:null,description:"The currently selected keys in the collection (controlled).",name:"selectedKeys",required:!1,type:{name:'"all" | Iterable<Key>'}},defaultSelectedKeys:{defaultValue:null,description:"The initial selected keys in the collection (uncontrolled).",name:"defaultSelectedKeys",required:!1,type:{name:'"all" | Iterable<Key>'}},dragAndDropHooks:{defaultValue:null,description:"The drag and drop hooks returned by `useDragAndDrop` used to enable drag and drop behavior for the GridList.",name:"dragAndDropHooks",required:!1,type:{name:"DragAndDropHooks"}},renderEmptyState:{defaultValue:null,description:"Provides content to display when there are no items in the list.",name:"renderEmptyState",required:!1,type:{name:"((props: GridListRenderProps) => ReactNode)"}},layout:{defaultValue:{value:"'stack'"},description:"Whether the items are arranged in a stack or grid.",name:"layout",required:!1,type:{name:"enum",value:[{value:'"grid"'},{value:'"stack"'}]}},keyboardNavigationBehavior:{defaultValue:{value:"'arrow'"},description:`Whether keyboard navigation to focusable elements within grid list items is
via the left/right arrow keys or the tab key.`,name:"keyboardNavigationBehavior",required:!1,type:{name:"enum",value:[{value:'"tab"'},{value:'"arrow"'}]}},disabledBehavior:{defaultValue:null,description:"Whether `disabledKeys` applies to all interactions, or only selection.",name:"disabledBehavior",required:!1,type:{name:"enum",value:[{value:'"all"'},{value:'"selection"'}]}}}}}catch{}const Qr={component:ue},Q={args:{items:[{label:"Item 1"},{label:"Item 2"},{label:"Item 3"},{label:"Item 4"},{label:"Item 5"},{label:"Item 6"}]}};var Ae,Oe,Te;Q.parameters={...Q.parameters,docs:{...(Ae=Q.parameters)==null?void 0:Ae.docs,source:{originalSource:`{
  args: {
    items: [{
      label: "Item 1"
    }, {
      label: "Item 2"
    }, {
      label: "Item 3"
    }, {
      label: "Item 4"
    }, {
      label: "Item 5"
    }, {
      label: "Item 6"
    }]
  }
}`,...(Te=(Oe=Q.parameters)==null?void 0:Oe.docs)==null?void 0:Te.source}}};const _r=["Default"];export{Q as Default,_r as __namedExportsOrder,Qr as default};
